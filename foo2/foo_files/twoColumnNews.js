(function(e){function t(e,n,r){var i=e||"en",s;if(n)t.locale[i]=n;else{while(i&&!t.locale.hasOwnProperty(i))i=i.replace(/[-_]?[^-_]*$/,"");i||(i=e.replace(/[-_].*$/,""),t.loadLocale(i))}this.lc=i,this.globalName=r||"i18n"}"locale"in t||(t.locale={}),t.loadLocale=function(e){try{var n=require("path").join(__dirname,"locale",e+".js"),r=(""+require("fs").readFileSync(n)).match(/{[^]*}/);if(!r)throw"no function found in file '"+n+"'";t.locale[e]="function(n)"+r}catch(i){if(e!="en")throw i.message="Locale "+e+" could not be loaded: "+i.message,i;t.locale[e]='function(n){return n===1?"one":"other"}'}},t.prototype.functions=function(){var e=[];for(var n in t.locale)t.locale.hasOwnProperty(n)&&e.push(JSON.stringify(n)+":"+t.locale[n].toString().trim());return"{lc:{"+e.join(",")+"},\n"+'c:function(d,k){if(!d)throw new Error("MessageFormat: Data required for \'"+k+"\'.")},\n'+'n:function(d,k,o){if(isNaN(d[k]))throw new Error("MessageFormat: \'"+k+"\' isn\'t a number.");return d[k]-(o||0)},\n'+"v:function(d,k){"+this.globalName+".c(d,k);return d[k]},\n"+"p:function(d,k,o,l,p){"+this.globalName+".c(d,k);return d[k] in p?p[d[k]]:(k="+this.globalName+".lc[l](d[k]-o),k in p?p[k]:p.other)},\n"+"s:function(d,k,p){"+this.globalName+".c(d,k);return d[k] in p?p[d[k]]:p.other}}"};var n=function(){function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,t,n,r,i,s){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=i,this.column=s,this.name="SyntaxError"}function n(e){function St(){return e.substring(vt,dt)}function xt(){return vt}function Tt(){return Lt(vt).line}function Nt(){return Lt(vt).column}function Ct(e){throw Ot(null,[{type:"other",description:e}],vt)}function kt(e){throw Ot(e,null,vt)}function Lt(t){function n(t,n,r){var i,s;for(i=n;i<r;i++)s=e.charAt(i),s==="\n"?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):s==="\r"||s==="\u2028"||s==="\u2029"?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return mt!==t&&(mt>t&&(mt=0,gt={line:1,column:1,seenCR:!1}),n(gt,mt,t),mt=t),gt}function At(e){if(dt<yt)return;dt>yt&&(yt=dt,bt=[]),bt.push(e)}function Ot(n,r,i){function s(e){var t=1;e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});while(t<e.length)e[t-1]===e[t]?e.splice(t,1):t++}function o(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r=new Array(e.length),i,s,o;for(o=0;o<e.length;o++)r[o]=e[o].description;return i=e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0],s=t?'"'+n(t)+'"':"end of input","Expected "+i+" but "+s+" found."}var u=Lt(i),a=i<e.length?e.charAt(i):null;return r!==null&&s(r),new t(n!==null?n:o(r,a),r,a,i,u.line,u.column)}function Mt(){var e,t;return e=dt,t=_t(),t!==r&&(vt=e,t=o(t)),e=t,e}function _t(){var e,t,n,i;e=dt,t=zt();if(t!==r){n=[],i=Dt();while(i!==r)n.push(i),i=Dt();n!==r?(vt=e,t=f(t,n),e=t):(dt=e,e=u)}else dt=e,e=u;return e}function Dt(){var t,n,i,s,o,a,f;return t=dt,e.charCodeAt(dt)===123?(n=l,dt++):(n=r,wt===0&&At(c)),n!==r?(i=Kt(),i!==r?(s=Pt(),s!==r?(o=Kt(),o!==r?(e.charCodeAt(dt)===125?(a=h,dt++):(a=r,wt===0&&At(p)),a!==r?(f=zt(),f!==r?(vt=t,n=d(s,f),t=n):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u),t}function Pt(){var t,n,i,s,o;return t=dt,n=Wt(),n!==r?(i=dt,e.charCodeAt(dt)===44?(s=m,dt++):(s=r,wt===0&&At(g)),s!==r?(o=Ht(),o!==r?(s=[s,o],i=s):(dt=i,i=u)):(dt=i,i=u),i===r&&(i=v),i!==r?(vt=t,n=y(n,i),t=n):(dt=t,t=u)):(dt=t,t=u),t}function Ht(){var t,n,i,s,o,a,f,l;return t=dt,n=Kt(),n!==r?(e.substr(dt,6)===b?(i=b,dt+=6):(i=r,wt===0&&At(w)),i!==r?(s=Kt(),s!==r?(e.charCodeAt(dt)===44?(o=m,dt++):(o=r,wt===0&&At(g)),o!==r?(a=Kt(),a!==r?(f=Bt(),f!==r?(l=Kt(),l!==r?(vt=t,n=E(i,f),t=n):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u),t===r&&(t=dt,n=Kt(),n!==r?(e.substr(dt,6)===S?(i=S,dt+=6):(i=r,wt===0&&At(x)),i!==r?(s=Kt(),s!==r?(e.charCodeAt(dt)===44?(o=m,dt++):(o=r,wt===0&&At(g)),o!==r?(a=Kt(),a!==r?(f=jt(),f!==r?(l=Kt(),l!==r?(vt=t,n=E(i,f),t=n):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)),t}function Bt(){var e,t;return e=dt,t=Ft(),t!==r&&(vt=e,t=T(t)),e=t,e}function jt(){var e,t;return e=dt,t=qt(),t!==r&&(vt=e,t=N(t)),e=t,e}function Ft(){var e,t,n,i;e=dt,t=It(),t===r&&(t=v);if(t!==r){n=[],i=Rt();while(i!==r)n.push(i),i=Rt();n!==r?(vt=e,t=C(t,n),e=t):(dt=e,e=u)}else dt=e,e=u;return e}function It(){var t,n,i,s,o,a,f,l;return t=dt,n=Kt(),n!==r?(e.substr(dt,6)===k?(i=k,dt+=6):(i=r,wt===0&&At(L)),i!==r?(s=Kt(),s!==r?(e.charCodeAt(dt)===58?(o=A,dt++):(o=r,wt===0&&At(O)),o!==r?(a=Kt(),a!==r?(f=$t(),f!==r?(l=Kt(),l!==r?(vt=t,n=M(f),t=n):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u),t}function qt(){var e,t,n;e=dt,t=[],n=Rt();while(n!==r)t.push(n),n=Rt();return t!==r&&(vt=e,t=_(t)),e=t,e}function Rt(){var t,n,i,s,o,a,f,d,v;return t=dt,n=Kt(),n!==r?(i=Ut(),i!==r?(s=Kt(),s!==r?(e.charCodeAt(dt)===123?(o=l,dt++):(o=r,wt===0&&At(c)),o!==r?(a=Kt(),a!==r?(f=_t(),f!==r?(d=Kt(),d!==r?(e.charCodeAt(dt)===125?(v=h,dt++):(v=r,wt===0&&At(p)),v!==r?(vt=t,n=D(i,f),t=n):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u),t}function Ut(){var t,n,i;return t=dt,n=Wt(),n!==r&&(vt=t,n=P(n)),t=n,t===r&&(t=dt,e.charCodeAt(dt)===61?(n=H,dt++):(n=r,wt===0&&At(B)),n!==r?(i=$t(),i!==r?(vt=t,n=M(i),t=n):(dt=t,t=u)):(dt=t,t=u)),t}function zt(){var e,t,n,i,s,o,a;e=dt,t=Kt();if(t!==r){n=[],i=dt,s=Kt(),s!==r?(o=Xt(),o!==r?(a=Kt(),a!==r?(s=[s,o,a],i=s):(dt=i,i=u)):(dt=i,i=u)):(dt=i,i=u);while(i!==r)n.push(i),i=dt,s=Kt(),s!==r?(o=Xt(),o!==r?(a=Kt(),a!==r?(s=[s,o,a],i=s):(dt=i,i=u)):(dt=i,i=u)):(dt=i,i=u);n!==r?(vt=e,t=j(t,n),e=t):(dt=e,e=u)}else dt=e,e=u;return e}function Wt(){var t,n,i,s,o;t=dt,n=Kt();if(n!==r){F.test(e.charAt(dt))?(i=e.charAt(dt),dt++):(i=r,wt===0&&At(I));if(i!==r){s=[],q.test(e.charAt(dt))?(o=e.charAt(dt),dt++):(o=r,wt===0&&At(R));while(o!==r)s.push(o),q.test(e.charAt(dt))?(o=e.charAt(dt),dt++):(o=r,wt===0&&At(R));s!==r?(o=Kt(),o!==r?(vt=t,n=U(i,s),t=n):(dt=t,t=u)):(dt=t,t=u)}else dt=t,t=u}else dt=t,t=u;return t}function Xt(){var e,t,n;e=dt,t=[],n=Vt();if(n!==r)while(n!==r)t.push(n),n=Vt();else t=u;return t!==r&&(vt=e,t=z(t)),e=t,e}function Vt(){var t,n,i,s,o,a;return t=dt,W.test(e.charAt(dt))?(n=e.charAt(dt),dt++):(n=r,wt===0&&At(X)),n!==r&&(vt=t,n=V(n)),t=n,t===r&&(t=dt,e.substr(dt,2)===$?(n=$,dt+=2):(n=r,wt===0&&At(J)),n!==r&&(vt=t,n=K()),t=n,t===r&&(t=dt,e.substr(dt,2)===Q?(n=Q,dt+=2):(n=r,wt===0&&At(G)),n!==r&&(vt=t,n=Y()),t=n,t===r&&(t=dt,e.substr(dt,2)===Z?(n=Z,dt+=2):(n=r,wt===0&&At(et)),n!==r&&(vt=t,n=tt()),t=n,t===r&&(t=dt,e.substr(dt,2)===nt?(n=nt,dt+=2):(n=r,wt===0&&At(rt)),n!==r?(i=Jt(),i!==r?(s=Jt(),s!==r?(o=Jt(),o!==r?(a=Jt(),a!==r?(vt=t,n=it(i,s,o,a),t=n):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u))))),t}function $t(){var t,n,i;t=dt,n=[],st.test(e.charAt(dt))?(i=e.charAt(dt),dt++):(i=r,wt===0&&At(ot));if(i!==r)while(i!==r)n.push(i),st.test(e.charAt(dt))?(i=e.charAt(dt),dt++):(i=r,wt===0&&At(ot));else n=u;return n!==r&&(vt=t,n=ut(n)),t=n,t}function Jt(){var t;return at.test(e.charAt(dt))?(t=e.charAt(dt),dt++):(t=r,wt===0&&At(ft)),t}function Kt(){var e,t,n;wt++,e=dt,t=[],n=Qt();while(n!==r)t.push(n),n=Qt();return t!==r&&(vt=e,t=ct(t)),e=t,wt--,e===r&&(t=r,wt===0&&At(lt)),e}function Qt(){var t;return ht.test(e.charAt(dt))?(t=e.charAt(dt),dt++):(t=r,wt===0&&At(pt)),t}var n=arguments.length>1?arguments[1]:{},r={},i={start:Mt},s=Mt,o=function(e){return{type:"program",program:e}},u=r,a=[],f=function(e,t){var n=[];e&&e.val&&n.push(e);for(var r in t)t.hasOwnProperty(r)&&n.push(t[r]);return{type:"messageFormatPattern",statements:n}},l="{",c={type:"literal",value:"{",description:'"{"'},h="}",p={type:"literal",value:"}",description:'"}"'},d=function(e,t){var n=[];return e&&n.push(e),t&&t.val&&n.push(t),{type:"messageFormatPatternRight",statements:n}},v=null,m=",",g={type:"literal",value:",",description:'","'},y=function(e,t){var n={type:"messageFormatElement",argumentIndex:e};return t&&t.length?n.elementFormat=t[1]:n.output=!0,n},b="plural",w={type:"literal",value:"plural",description:'"plural"'},E=function(e,t){return{type:"elementFormat",key:e,val:t.val}},S="select",x={type:"literal",value:"select",description:'"select"'},T=function(e){return{type:"pluralStyle",val:e}},N=function(e){return{type:"selectStyle",val:e}},C=function(e,t){var n={type:"pluralFormatPattern",pluralForms:t};return e?n.offset=e:n.offset=0,n},k="offset",L={type:"literal",value:"offset",description:'"offset"'},A=":",O={type:"literal",value:":",description:'":"'},M=function(e){return e},_=function(e){return{type:"selectFormatPattern",pluralForms:e}},D=function(e,t){return{type:"pluralForms",key:e,val:t}},P=function(e){return e},H="=",B={type:"literal",value:"=",description:'"="'},j=function(e,t){var n=[];for(var r=0;r<t.length;++r)for(var i=0;i<t[r].length;++i)n.push(t[r][i]);return{type:"string",val:e+n.join("")}},F=/^[0-9a-zA-Z$_]/,I={type:"class",value:"[0-9a-zA-Z$_]",description:"[0-9a-zA-Z$_]"},q=/^[^ \t\n\r,.+={}]/,R={type:"class",value:"[^ \\t\\n\\r,.+={}]",description:"[^ \\t\\n\\r,.+={}]"},U=function(e,t){return e+(t?t.join(""):"")},z=function(e){return e.join("")},W=/^[^{}\\\0-\x1F \t\n\r]/,X={type:"class",value:"[^{}\\\\\\0-\\x1F \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F \\t\\n\\r]"},V=function(e){return e},$="\\#",J={type:"literal",value:"\\#",description:'"\\\\#"'},K=function(){return"\\#"},Q="\\{",G={type:"literal",value:"\\{",description:'"\\\\{"'},Y=function(){return"{"},Z="\\}",et={type:"literal",value:"\\}",description:'"\\\\}"'},tt=function(){return"}"},nt="\\u",rt={type:"literal",value:"\\u",description:'"\\\\u"'},it=function(e,t,n,r){return String.fromCharCode(parseInt("0x"+e+t+n+r))},st=/^[0-9]/,ot={type:"class",value:"[0-9]",description:"[0-9]"},ut=function(e){return parseInt(e.join(""),10)},at=/^[0-9a-fA-F]/,ft={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},lt={type:"other",description:"whitespace"},ct=function(e){return e.join("")},ht=/^[ \t\n\r]/,pt={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},dt=0,vt=0,mt=0,gt={line:1,column:1,seenCR:!1},yt=0,bt=[],wt=0,Et;if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');s=i[n.startRule]}Et=s();if(Et!==r&&dt===e.length)return Et;throw Et!==r&&dt<e.length&&At({type:"end",description:"end of input"}),Ot(null,bt,yt)}return e(t,Error),{SyntaxError:t,parse:n}}();t.prototype.parse=function(){return n.parse.apply(n,arguments)},t.prototype.precompile=function(e){function r(e){var t=JSON.parse(JSON.stringify(e));return t.pf_count++,t}function i(e,s){s=s||{keys:{},offset:{}};var o=[],u,a;switch(e.type){case"program":return i(e.program);case"messageFormatPattern":for(u=0;u<e.statements.length;++u)o.push(i(e.statements[u],s));return a=o.join("+")||'""',s.pf_count?a:"function(d){return "+a+"}";case"messageFormatPatternRight":for(u=0;u<e.statements.length;++u)o.push(i(e.statements[u],s));return o.join("+");case"messageFormatElement":return s.pf_count=s.pf_count||0,e.output?t.globalName+'.v(d,"'+e.argumentIndex+'")':(s.keys[s.pf_count]='"'+e.argumentIndex+'"',i(e.elementFormat,s));case"elementFormat":if(e.key==="select")return t.globalName+".s(d,"+s.keys[s.pf_count]+","+i(e.val,s)+")";if(e.key==="plural")return s.offset[s.pf_count||0]=e.val.offset||0,t.globalName+".p(d,"+s.keys[s.pf_count]+","+(s.offset[s.pf_count]||0)+',"'+t.lc+'",'+i(e.val,s)+")";return"";case"pluralFormatPattern":s.pf_count=s.pf_count||0,n=!0;for(u=0;u<e.pluralForms.length;++u)e.pluralForms[u].key==="other"&&(n=!1),o.push('"'+e.pluralForms[u].key+'":'+i(e.pluralForms[u].val,r(s)));if(n)throw new Error("No 'other' form found in pluralFormatPattern "+s.pf_count);return"{"+o.join(",")+"}";case"selectFormatPattern":s.pf_count=s.pf_count||0,s.offset[s.pf_count]=0,n=!0;for(u=0;u<e.pluralForms.length;++u)e.pluralForms[u].key==="other"&&(n=!1),o.push('"'+e.pluralForms[u].key+'":'+i(e.pluralForms[u].val,r(s)));if(n)throw new Error("No 'other' form found in selectFormatPattern "+s.pf_count);return"{"+o.join(",")+"}";case"string":a='"'+(e.val||"").replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"';if(s.pf_count){var f=s.offset[s.pf_count-1];a=a.replace(/(^|[^\\])#/g,'$1"+'+t.globalName+".n(d,"+s.keys[s.pf_count-1]+(f?","+f:"")+')+"'),a=a.replace(/^""\+/,"").replace(/\+""$/,"")}return a;default:throw new Error("Bad AST type: "+e.type)}}var t=this,n=!1;return i(e)},t.prototype.compile=function(e){return(new Function("this['"+this.globalName+"']="+this.functions()+";"+"return "+this.precompile(this.parse(e))))()},t.prototype.precompileObject=function(e){var t=[];for(var n in e)t.push(JSON.stringify(n)+":"+this.precompile(this.parse(e[n])));return"{\n"+t.join(",\n")+"}"},typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=t),exports.MessageFormat=t):typeof define=="function"&&define.amd?define("MessageFormat",[],function(){return t}):e.MessageFormat=t})(this),define("text",["module"],function(e){"use strict";var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.14",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]==="﻿"&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!catalogs/admin.json",[],function(){return'{\n    "admin.allExistingInvites": "All Existing Invites",\n    "admin.api.title": "Api Reference",\n    "admin.auditLog.action": "Action",\n    "admin.auditLog.allActions": "All Actions",\n    "admin.auditLog.apply": "Apply",\n    "admin.auditLog.category": "Category",\n    "admin.auditLog.collection": "Story",\n    "admin.auditLog.collectionPlaceholder": "Enter a URL, slug or content id",\n    "admin.auditLog.content": "Content",\n    "admin.auditLog.contentDeleted": "Content was deleted.",\n    "admin.auditLog.contentId": "ContentId",\n    "admin.auditLog.contentType": "Content Type",\n    "admin.auditLog.createdHub": "Created hub",\n    "admin.auditLog.date": "Date",\n    "admin.auditLog.deletedHub": "Deleted hub",\n    "admin.auditLog.deletedStory": "Deleted story",\n    "admin.auditLog.deleteItem": "Delete Item",\n    "admin.auditLog.featured": "Featured",\n    "admin.auditLog.featuredOn": "Featured on",\n    "admin.auditLog.filters": "Filters",\n    "admin.auditLog.hero": "Hero",\n    "admin.auditLog.heroedOn": "Heroed on",\n    "admin.auditLog.impersonatedBy": "Impersonated By",\n    "admin.auditLog.item": "Item",\n    "admin.auditLog.itemAddedToStory": "Item added to story",\n    "admin.auditLog.itemRemovedFromStory": "Item removed from story",\n    "admin.auditLog.language": "Language",\n    "admin.auditLog.method": "Method",\n    "admin.auditLog.ownerChanged": "Owner changed",\n    "admin.auditLog.publishedHub": "Published hub",\n    "admin.auditLog.publishedStory": "Published story",\n    "admin.auditLog.title": "Audit Log",\n    "admin.auditLog.trustedUser": " Trusted User",\n    "admin.auditLog.unfeatured": "Unfeatured",\n    "admin.auditLog.unhero": "Unhero",\n    "admin.auditLog.untrustedUser": "Untrusted User",\n    "admin.auditLog.unverified": "Unverified",\n    "admin.auditLog.updatedBackgroundPhoto": "Updated background photo",\n    "admin.auditLog.updatedCategory": "Updated category",\n    "admin.auditLog.updatedItemPhoto": "Updated item photo",\n    "admin.auditLog.updatedLanguage": "Updated language",\n    "admin.auditLog.user": "User",\n    "admin.auditLog.userDeleted": "(user deleted)",\n    "admin.auditLog.verified": "Verified",\n    "admin.banner.notification.verified": "Verified",\n    "admin.cannotFindUser": "Cannot find this user.",\n    "admin.cannotIdentifyTheseObjects": "Cannot identify these objects:",\n    "admin.cannotIdentifyTheseRecipes": "Cannot identify these recipes or collections or core objects:",\n    "admin.changedOwnershipOfX": "Changed ownership of {COUNT} collections/core objects.",\n    "admin.changeOwnership": "Change Ownership",\n    "admin.collect.invalidCollectionType": "Collection type must be either \'story\' or \'hub\'.",\n    "admin.collect.unexpectedCollectionType": "The collection does not have the expected collectionType.",\n    "admin.collectionNameExists": "The user already has collections with the same name as the following. Please rename or delete them first.",\n    "admin.config.ads.storyTile.first.description": "Where to show the first ad on a story page. If this is 4, then an ad will appear after the 4th item.",\n    "admin.config.ads.storyTile.second.description": "Where to show the second ad on a story page. If this is 10, then an ad will appear after the 10th item.",\n    "admin.config.assetCacheBuster": "Value to append to JS/CSS urls to bust their caches after deployments (to fix mixed-mode issues).",\n    "admin.config.caviarJSURL": "Caviar JS URL.",\n    "admin.config.caviarVersion": "Caviar verion.",\n    "admin.config.chaining.promoted.delay": "Delays the showing of the first chained video/story by this many seconds to give the promoted video/story a chance to load.",\n    "admin.config.hydraApiJsUrl": "This will allow us to test and ultimately change the version we use for our internal Infra tools without having to do a hotfix or wait for a release.",\n    "admin.config.hydraQueryTimeout": "Timeout for hydra db queries. Only use for DEV servers. Keep zero for production.",\n    "admin.config.infiniteScroll.threshold": "Threshold of the number of pixels left below or above (reverse infinite scroll) to fire off a new content request.",\n    "admin.config.maxAgeInDays": "Max number of days since the story/video was featured or verified. If it exceeds this maximum, it won\'t appear in chained stories/videos.",\n    "admin.config.nativeVideos.chaining.probability.description": "Probability of seeing a native video as the next item in the story/video chain.",\n    "admin.config.nativeVideos.relatedVideos.count": "Max number of videos to show in related videos.",\n    "admin.config.nativeVideos.relatedVideos.min": "Min number of videos to show in related videos.",\n    "admin.config.ptfCardTimeout.description": "X milliseconds after which the executed people-to-follow disappears itself.",\n    "admin.config.quackFireVersion":"Quack fire version.",\n    "admin.config.socialCount.keys": "Keys to sum over to generate the social count for a collection.",\n    "admin.config.socialCount.threshold": "Threshold below which the social count will not be displayed for a story.",\n    "admin.config.title": "Config",\n    "admin.config.unpublishedCollection.interval": "Users will recieve notifications after this much of interval in minutes for unpublished collections.",\n    "admin.config.unpublishedCollection.threshold": "Users will be notified if they have unpublished collections that have not been updated in this many minutes.",\n    "admin.config.viewCount.threshold": "Threshold below which the view count will not be displayed for a story.",\n    "admin.confirm.placeholder": "Enter new owner\'s user ID",\n    "admin.confirm.transferId": " to: {INPUT}<br><br>",\n    "admin.confirm.userHas": "- Delete {COLLECTIONS} stories<br> - Abandon {FOLLOWERS} followers<br> - Reassign {COLLECTION_MEMBERS} items",\n    "admin.confirmBan": "Are you sure you want to ban this user? This will:<br>- Prevent this user from logging in<br>- Flag this user as problematic",\n    "admin.confirmDeactive": "Are you sure you want to deactivate this user? This will:",\n    "admin.confirmDelete": "Are you sure you want to delete this user? This will:<br>- Delete all login credentials and social media connections",\n    "admin.coreobject.confirm.delete": "The object has been collected into below stories. <br>Are you sure you want to delete this object?",\n    "admin.coreobject.invalid.object.description": "These objects are not core objects",\n    "admin.coreobject.invalid.object.title": "Cannot identify these objects",\n    "admin.createInvites": "Create Invites",\n    "admin.delete": "Delete",\n    "admin.deletedX": "Started background deletion of {COUNT} objects.",\n    "admin.deleteObjects": "Delete Core Objects",\n    "admin.dynamicCollection.frequency.msg": "Frequency number of how often the stories appear",\n    "admin.dynamicCollection.startSlot.msg": "Start slot number where the first story will appear",\n    "admin.dynamicCollections": "Dynamic Stories",\n    "admin.embed.description": "Paste embed code here",\n    "admin.embed.output": "Embed Output",\n    "admin.embed.submit.button": "Submit",\n    "admin.embed.title": "Embed",\n    "admin.error": "Error",\n    "admin.error.ban": "Encountered an error while banning user.",\n    "admin.error.deactivate": "Encountered an error while deactivating user.",\n    "admin.error.delete": "Encountered an error while deleting user.",\n    "admin.error.request": "An error was encountered while making this request.",\n    "admin.export.dsvFileAll": "Foodie_Users_all_users.dsv",\n    "admin.export.dsvFileEnd": "Foodie_Users_{END_DATE}.dsv",\n    "admin.export.dsvFileStart": "Foodie_Users_{START_DATE}_today.dsv",\n    "admin.export.dsvFileStartEnd": "Foodie_Users_{START_DATE}_{END_DATE}.dsv",\n    "admin.export.dsvFileTitle": "Name{DELIMITER}Email{DELIMITER}Slug{DELIMITER}Registration Date\\n",\n    "admin.exportUsers": "Export Users",\n    "admin.featureFlag.config.disabled": "Disabled by config",\n    "admin.featureFlag.config.enabled": "Enabled by config",\n    "admin.featureFlag.description": "Description",\n    "admin.featureFlag.details": "Use these temporary controls to enable features that in currently in development. These feature flags will be removed after new featured is available to all users. For feature controls dedicated to troubleshooting issues, see <a {HREF_ATTRS}>Troubleshooting Feature Controls</a>.<br>Select the user status that has access to the specified feature. Features that have been explicitly enabled or disabled by config file cannot be managed here.",\n    "admin.featureFlag.feature": "Feature",\n    "admin.featureFlag.label.adsOnFirstTwoStories": "Display ads on the first two stories, not just the first one: masthead/banner, feed x 2 (if cannesStoryFeedAds is enabled)",\n    "admin.featureFlag.label.ajaxNewsfeed": "Use AJAX to load newsfeed pages.",\n    "admin.featureFlag.label.akamaiCachingHack": "Prefix some API URLs with /c/ because Akamai isn\'t caching the non-/c/ URLs for some reason. See MODE-37197.",\n    "admin.featureFlag.label.browserExtension": "Allow download of browser extension.",\n    "admin.featureFlag.label.cannesAds": "Display ads on Glam",\n    "admin.featureFlag.label.cannesStoryFeedAds": "Display ads in the story feed.",\n    "admin.featureFlag.label.deferJs": "Enable defer for render-blocking scripts",\n    "admin.featureFlag.label.disableHydraMetricsQueries": "Prevent queries to hydra_metrics_trending_by_source. This will cause social-energy and page-view counts to disappear.",\n    "admin.featureFlag.label.disableIsCollectedQueries": "Prevent queries in isCollected(). This will cause the + button to not be bold if you collected an object.",\n    "admin.featureFlag.label.disableLogin": "<strong>Do not turn on flag until you have approval from RAJ.</strong> This flag will log out logged in user and new/exisiting users will not able to login. They will get friendly message about it.",\n    "admin.featureFlag.label.doNotStoreHydraFeedResultsInYokoCache": "Always hit Hydra - don\'t cache its results. If you want caching, use /c at the start of Hydra feed urls for Akamai caching.",\n    "admin.featureFlag.label.enableGAObjectViewEvent": "Enables GA object view event.",\n    "admin.featureFlag.label.enableHttpsForBlobs": "Enables https for caviar urls.",\n    "admin.featureFlag.label.fixActivityEventPrivacy": "Heeds ActivityEvent privacy when choosing which story to link an object to. Do not turn this on until MODE-36824 is run.",\n    "admin.featureFlag.label.getAdaptVariableRulesFromListeria": "Get the rules for adapt variables from Hydra Listeria.",\n    "admin.featureFlag.label.hydraFeedForCategoryPage": "A new category page without action labels, and based on a Hydra feed that returns stories and videos only.",\n    "admin.featureFlag.label.hydraFeedForChaining": "Whether to use a Hydra feed instead of Bacon to determine which chained story/video to show next.",\n    "admin.featureFlag.label.i18nUILanguage": "Whether to show I18N language-related UI elements. Don\'t turn this on before turning on i18nDatabase.",\n    "admin.featureFlag.label.insightsTab": "Show Insights tab on the users profile page.",\n    "admin.featureFlag.label.nativeVideoFeed": "Whether to show native video events in feeds.",\n    "admin.featureFlag.label.profileVideosTab": "Display user\'s videos on profile page",\n    "admin.featureFlag.label.promoted": "Show promoted videos and stories among the chained stories and videos.",\n    "admin.featureFlag.label.removeGoogleTagManager": "Remove Google Tag Manager.",\n    "admin.featureFlag.label.setCollectionCategory": "Whether admins/product/editors can change the category of a story or hub. Before turning this on, make sure that Yoko is notifying Hydra about story/hub category changes.",\n    "admin.featureFlag.label.setCollectionLanguage": "Whether admins/product/editors can change the language of a story or hub. Before turning this on, make sure that Yoko is notifying Hydra about story/hub language changes.",\n    "admin.featureFlag.label.setGaLocation": "Whether to allow the Google Analytics location (current URL) to be set explicitly. This would just be done on the channel pages for now. It would force /GLAM to be /glam for Google Analytics.",\n    "admin.featureFlag.label.setObjectCategory": "Whether admins/product/editors can change the category of an object. Before turning this on, make sure that Yoko is notifying Hydra about object category changes.",\n    "admin.featureFlag.label.setObjectLanguage": "Whether admins/product/editors can change the language of an object. Before turning this on, make sure that Yoko is notifying Hydra about object language changes.",\n    "admin.featureFlag.label.showBaseline": "Show only baseline content. If enabled no external calls would be made.",\n    "admin.featureFlag.label.socialShareStoryBottom": "Display the lower social share buttons",\n    "admin.featureFlag.label.storyCommentingBottom": "Enabled commenting on the BOTTOM of story pages.",\n    "admin.featureFlag.label.trusteBanner": "javascript provided by Truste which is a 3rd party company that we work with to ensure we\'re in compliance with various cookie and data protection laws around the world. The script will create a banner at the top of Glam.com that appears if you come from certain countries (mostly in the EU) that will allow users to set their cookie preferences.",\n    "admin.featureFlag.label.trusteBannerTest": "Requests the test Truste JS instead of the production JS (uses the country=gb param). You must also have the above Truste Banner turned on for this to work.",\n    "admin.featureFlag.label.useDrawer": "Use drawer instead of dialog box.",\n    "admin.featureFlag.label.v1NewsfeedSpecificEvents": "Use new event data in v1 newsfeed end points but with the current format and eventType values.",\n    "admin.featureFlag.label.videoPlayViaCaviar": "Enable video play via Caviar JS(To get most suitable video).",\n    "admin.featureFlag.label.videoShareUrl": "Enable video share url.",\n    "admin.featureFlag.label.videoUpload": "Enable video upload.(Do not turn it on before checking with Brian)",\n    "admin.featureFlag.label.yoko35275Check": "Include js on signed out pages to refresh the page if the user is actually signed in.",\n    "admin.featureFlag.label.yoko35547PlayCount": "Include hydra metrics and play count on core objects in story details and category pages.",\n    "admin.featureFlag.rule.allUsers": "Enabled For All Users",\n    "admin.featureFlag.rule.byRole": "Enabled For Roles",\n    "admin.featureFlag.rule.defaultDisabled": "Use default (Disabled)",\n    "admin.featureFlag.rule.defaultEnabled": "Use default (Enabled)",\n    "admin.featureFlag.rule.title": "Config Rule",\n    "admin.featureFlag.title": "Temporary Feature Controls",\n    "admin.featureFlag.troubleshooting.details": "Use these controls to enable features for troubleshooting or for specific purposes. These feature flags will always remain available. For feature controls dedicated to new feature rollout, see Title: <a {HREF_ATTRS}>Temporary Feature Controls</a>.<br>Select the user status that has access to the specified feature. Features that have been explicitly enabled or disabled by config file cannot be managed here.",\n    "admin.featureFlag.troubleshooting.title": "Troubleshooting Feature Controls",\n    "admin.group.success.add": "Successfully added {NAME} to the “{GROUP}” group.",\n    "admin.group.success.remove": "Successfully removed {NAME} from the “{GROUP}” group.",\n    "admin.hydraApiJsUrl.version": "Hydra end point details with version (You can edit version)",\n    "admin.hydraApiJsUrl.wait": "Specify a period of seconds to wait after page load before running content extraction.",\n    "admin.hydracontentextractor.description": "Under this tag, user able to paste any url to get response from Hydra.js",\n    "admin.hydracontentextractor.minifiedjs": "Use Minified JS",\n    "admin.hydracontentextractor.no": "No",\n    "admin.hydracontentextractor.title": "Hydra Content Extractor",\n    "admin.hydracontentextractor.yes": "Yes",\n    "admin.hydraFeeds.description": "This page is for managing all Hydra feeds. In the urls, you can use the following tokens:",\n    "admin.hydraFeeds.description.affiliateIdForHydra": "&lt;affiliateIdForHydra&gt; inserts the XN_YOKO_AFFILIATE_ID_FOR_HYDRA config-file value.",\n    "admin.hydraFeeds.description.category": "&lt;category&gt; for the category key, e.g., health",\n    "admin.hydraFeeds.description.channel": "&lt;channel&gt; for the current channel, set in <a href=\'/admin/regions\'>/admin/regions</a>, e.g., glam",\n    "admin.hydraFeeds.description.channelRegionLanguage": "&lt;channelRegionLanguage&gt; for the channel\'s region\'s language, set in <a href=\'/admin/regions\'>/admin/regions</a>, e.g., en",\n    "admin.hydraFeeds.description.contentTypes": "&lt;contentTypes&gt; will have value(s) from [Collection, User , CoreObjects\' types].",\n    "admin.hydraFeeds.description.dateRange": "&lt;dateRange&gt; date range metrics should be pulls from, e.g., 7Day, 30Day, Total.",\n    "admin.hydraFeeds.description.from": "&lt;from&gt; Index to fetch the resultset at. Used for pagination.",\n    "admin.hydraFeeds.description.hydraRegion": "&lt;viewer.hydraRegion&gt; Hydra Region for the user\'s region, set in <a href=\'/admin/regions\'>/admin/regions</a>, e.g., US",\n    "admin.hydraFeeds.description.hydraSource": "&lt;hydraSource&gt; inserts the XN_YOKO_HYDRA_SOURCE config-file value.",\n    "admin.hydraFeeds.description.language": "&lt;viewer.language&gt; for the user\'s language, e.g., en-US",\n    "admin.hydraFeeds.description.lowercaseHydraRegion": "&lt;viewer.lowercaseHydraRegion&gt; Same as &lt;viewer.hydraRegion&gt; but lowercase.",\n    "admin.hydraFeeds.description.objectId": "&lt;objectId&gt; Object Id.",\n    "admin.hydraFeeds.description.querySuggestions": "&lt;querySuggestions&gt; Suggested query terms based on \'&lt;userQuery&gt;\'.",\n    "admin.hydraFeeds.description.region": "&lt;viewer.region&gt; for the user\'s region, e.g., US",\n    "admin.hydraFeeds.description.regionHydraLanguage": "&lt;viewer.regionHydraLanguage&gt; for the user\'s region\'s Hydra Language, set in <a href=\'/admin/regions\'>/admin/regions</a>, e.g., en",\n    "admin.hydraFeeds.description.signedIn": "&lt;signedIn&gt; inserts 1 for signed-in users and 0 for signed-out users",\n    "admin.hydraFeeds.description.signedInTernary": "&lt;signedIn?\'foo\':\'bar\'&gt; inserts foo if signed in, bar if signed out",\n    "admin.hydraFeeds.description.size": "&lt;size&gt; No. of resultset to be fetched. Used for pagination",\n    "admin.hydraFeeds.description.userId": "&lt;userId&gt; Yoko id of the user.",\n    "admin.hydraFeeds.description.userQuery": "&lt;userQuery&gt; Search query entered by a user.",\n    "admin.hydraFeeds.description.viewerIp": "&lt;viewer.ip&gt; IP address of the viewer. If you are paginating an ElasticSearch query with from/size, it is good to set <a href=\\"https://www.elastic.co/guide/en/elasticsearch/reference/2.0/search-request-preference.html\\" target=\\"_blank\\">__preference=&lt;viewer.ip&gt;</a> to ensure that the search results are from the same ElasticSearch shards and are thus more stable.",\n    "admin.hydraFeeds.feedDescriptions.category.stories": "Stories in a category, for the iOS api.",\n    "admin.hydraFeeds.feedDescriptions.category.videos": "Videos in a category, for the iOS api.",\n    "admin.hydraFeeds.feedDescriptions.category.videosAndStories": "Videos and stories for the category pages.",\n    "admin.hydraFeeds.feedDescriptions.chaining": "Story and video chaining.",\n    "admin.hydraFeeds.feedDescriptions.insights.mode.stories.social": "Insights: Glam Stories Social",\n    "admin.hydraFeeds.feedDescriptions.insights.mode.stories.views": "Insights: Glam Stories Views",\n    "admin.hydraFeeds.feedDescriptions.insights.mode.videos.social": "Insights: Glam Videos Social",\n    "admin.hydraFeeds.feedDescriptions.insights.mode.videos.views": "Insights: Glam Videos Views",\n    "admin.hydraFeeds.feedDescriptions.insights.object.trending.daily": "Get daily metrics for a single object by id.",\n    "admin.hydraFeeds.feedDescriptions.insights.stories.engagement": "Insights: StoriesEngagement",\n    "admin.hydraFeeds.feedDescriptions.insights.stories.social": "Insights: Social",\n    "admin.hydraFeeds.feedDescriptions.insights.stories.views": "Insights: Views",\n    "admin.hydraFeeds.feedDescriptions.insights.videos.engagement": "Insights: Videos Engagement",\n    "admin.hydraFeeds.feedDescriptions.insights.videos.social": "Insights: Videos Social",\n    "admin.hydraFeeds.feedDescriptions.insights.videos.views": "Insights: Videos Views",\n    "admin.hydraFeeds.feedDescriptions.modeVideos": "Feed for the Glam Videos page.",\n    "admin.hydraFeeds.feedDescriptions.recommendedVideo": "It recommends videos based on search-text and category.",\n    "admin.hydraFeeds.feedDescriptions.search.keyword": "It is for site-wide search and searches for stories, core-objects and users.",\n    "admin.hydraFeeds.feedDescriptions.search.keyword.video": "Search for native and non-native videos.",\n    "admin.hydraFeeds.feedDescriptions.search.spellSuggester": "It suggests similar looking terms based on user-query text.",\n    "admin.hydraFeeds.feedDescriptions.trending.category": "First version of trending content on a category page. Includes stories, hubs and videos.",\n    "admin.hydraFeeds.feedDescriptions.trending.category.video": "First version of trending content on the Glam Video category page. Includes only videos.",\n    "admin.hydraFeeds.feedDescriptions.trending.channel": "First version of trending content on a channel page. Includes stories and hubs. Used by old mobile apps.",\n    "admin.hydraFeeds.feedDescriptions.trending.channel.2": "Second version of trending content on a channel page. Includes stories, hubs and videos.",\n    "admin.hydraFeeds.feedDescriptions.trending.explore.stories": "Trending stories on the mobile app explore screen.",\n    "admin.hydraFeeds.feedDescriptions.trending.explore.topics": "The popular topics on the site.",\n    "admin.hydraFeeds.feedDescriptions.trending.explore.videos": "Trending native videos on the mobile app explore screen.",\n    "admin.hydraFeeds.feedDescriptions.trending.explore.videos_and_stories": "Trending stories and native videos on the mobile app explore screen.",\n    "admin.hydraFeeds.feedDescriptions.trending.home": "First version of trending content on the homepage. Includes stories and hubs. Used by old mobile apps.",\n    "admin.hydraFeeds.feedDescriptions.trending.home.2": "Second version of trending content on the homepage. Includes stories, hubs and videos.",\n    "admin.hydraFeeds.feedDescriptions.trending.video": "First version of trending content on a single-video page. Includes only videos",\n    "admin.hydraFeeds.preview.button": "Load",\n    "admin.hydraFeeds.preview.description": "Here you can check the results of any feed.",\n    "admin.hydraFeeds.preview.instruction": "Choose a Hydra feed or enter a feed URL:",\n    "admin.hydraFeeds.preview.title": "Preview",\n    "admin.hydraFeeds.results.id": "ID",\n    "admin.hydraFeeds.results.image": "Image",\n    "admin.hydraFeeds.results.title": "Title",\n    "admin.hydraFeeds.title": "Hydra Feeds",\n    "admin.hydraFeeds.viewerIpError": "The following feeds both contain &lt;viewer.ip&gt; and begin with /c: <strong>{BAD_FEEDS}</strong>. Having &lt;viewer.ip&gt; will defeat the Akamai caching of /c. Please use one or the other.",\n    "admin.inviteAdmin": "Invite Admin",\n    "admin.languages": "Languages",\n    "admin.languages.description": "This page allows you to change the visibility of languages.",\n    "admin.manageAdmins.error.sameUser": "Sorry, you cannot change your own admin privileges.",\n    "admin.manageAdmins.success.assign": "Successfully assigned admin privileges.",\n    "admin.manageAdmins.success.revoke": "Successfully revoked admin privileges.",\n    "admin.mobileApp.releaseNotes": "Release Notes",\n    "admin.mobileApp.sizeInMB": "{SIZE_IN_MB} MB",\n    "admin.mobileApp.title": "Staged Mobile App",\n    "admin.mobileApp.version": "Version {SHORT_VERSION} ({VERSION})",\n    "admin.newInvites": "New Invites",\n    "admin.newOwner": "New Owner ID/slug/profile URL:",\n    "admin.noAddressesFound": "Please enter one or more valid email addresses",\n    "admin.notCoreObjects": "These objects are not core objects:",\n    "admin.objectIdEtc": "Object IDs/slugs/URLs:",\n    "admin.pageNotice.debuggingOn": "Debugging on. Click to turn off.",\n    "admin.paginationLinks.first": "« FIRST",\n    "admin.paginationLinks.label": "PAGES:",\n    "admin.paginationLinks.last": "LAST »",\n    "admin.paginationLinks.next": "NEXT ›",\n    "admin.paginationLinks.previous": "‹ PREVIOUS",\n    "admin.panel": "Admin Panel",\n    "admin.placeholder.dateEnd": "Provide date(YYYY-MM-DD)",\n    "admin.placeholder.dateStart": "Provide date(YYYY-MM-DD)",\n    "admin.privilegedUserOptions": "Privileged User Options",\n    "admin.privilegedUserOptions.ads": "Ads",\n    "admin.privilegedUserOptions.auth": "Auth:",\n    "admin.privilegedUserOptions.authorName": "Author Name:",\n    "admin.privilegedUserOptions.ban": "Ban",\n    "admin.privilegedUserOptions.ban.description": "Prevent this user from logging in.",\n    "admin.privilegedUserOptions.branded": "Branded:",\n    "admin.privilegedUserOptions.branding": "Branding",\n    "admin.privilegedUserOptions.cancellabel":"Cancel",\n    "admin.privilegedUserOptions.category": "Category:",\n    "admin.privilegedUserOptions.channelManagers": "Channel Managers:",\n    "admin.privilegedUserOptions.channels": "Channel(s):",\n    "admin.privilegedUserOptions.confirmUnfeature": "Are you sure that you want to remove this from {COLLECTION_NAME}?",\n    "admin.privilegedUserOptions.country": "Country:",\n    "admin.privilegedUserOptions.createdDate": "Created Date:",\n    "admin.privilegedUserOptions.currentlyFeaturedOn": "Currently Featured On",\n    "admin.privilegedUserOptions.deactivate": "Deactivate",\n    "admin.privilegedUserOptions.deactivate.description": "Suspend this user\'s account",\n    "admin.privilegedUserOptions.debug": "Debug",\n    "admin.privilegedUserOptions.debugPanel.description": "Flags for testing and debugging. These options affect the current user only (you).",\n    "admin.privilegedUserOptions.debugPanel.testAdPlaceholders": "Display the name of the ad slot just below where the ad slot should appear.",\n    "admin.privilegedUserOptions.debugPanel.testHydraMetricsTimingOut": "Simulate Hydra metrics queries taking forever (up to hydraQueryTimeout seconds). If hydraQueryTimeout is 0, then this will take forever.",\n    "admin.privilegedUserOptions.debugPanel.testListeriaDown": "Simulate Listeria being down when retrieving the Adapt data rules. Was used to test MODE-36748.",\n    "admin.privilegedUserOptions.debugPanel.testListeriaStaging": "Use Listeria staging, not Listeria production, for the rules for mapping data to Adapt values. Useful for trying out new rules on production data.",\n    "admin.privilegedUserOptions.debugPanel.testNewFields": "Displays additional fields for core objects, stories, etc.",\n    "admin.privilegedUserOptions.delete": "delete",\n    "admin.privilegedUserOptions.delete.description": "Remove this user\'s account.",\n    "admin.privilegedUserOptions.feature": "Feature",\n    "admin.privilegedUserOptions.featureThisItem": "Feature this item",\n    "admin.privilegedUserOptions.featureWithoutVerification": "This item has not been verified—are you sure you want to feature it?",\n    "admin.privilegedUserOptions.general": "General",\n    "admin.privilegedUserOptions.getImagesAndVideos": "Get Images & Videos",\n    "admin.privilegedUserOptions.hero": "(Hero)",\n    "admin.privilegedUserOptions.hubs": "Hub(s):",\n    "admin.privilegedUserOptions.hydraFeeds": "Hydra Feeds",\n    "admin.privilegedUserOptions.id": "Id:",\n    "admin.privilegedUserOptions.impersonate": "Impersonate",\n    "admin.privilegedUserOptions.impersonate.description": "Pretend to be this user.",\n    "admin.privilegedUserOptions.info": "Info",\n    "admin.privilegedUserOptions.invalidUrl": "That Source Link is not a valid URL.",\n    "admin.privilegedUserOptions.joinDate": "Join Date:",\n    "admin.privilegedUserOptions.jsonView": "JSON View",\n    "admin.privilegedUserOptions.language": "Language:",\n    "admin.privilegedUserOptions.logoEnabled": "Show Logo",\n    "admin.privilegedUserOptions.logoImageUrl": "Logo Image",\n    "admin.privilegedUserOptions.logoSubtitle": "Sponsored Text",\n    "admin.privilegedUserOptions.logoTitle": "Logo Text",\n    "admin.privilegedUserOptions.logoUrl": "Logo Link",\n    "admin.privilegedUserOptions.mediaType": "Media Type:",\n    "admin.privilegedUserOptions.metrics": "Metrics",\n    "admin.privilegedUserOptions.name": "Name:",\n    "admin.privilegedUserOptions.native": "Native:",\n    "admin.privilegedUserOptions.no": "No",\n    "admin.privilegedUserOptions.noMetrics": "No metrics are available for this item.",\n    "admin.privilegedUserOptions.none": "None",\n    "admin.privilegedUserOptions.notApplicable": "N/A",\n    "admin.privilegedUserOptions.options": "Options",\n    "admin.privilegedUserOptions.outlineView": "Outline View",\n    "admin.privilegedUserOptions.ownerInformation": "Owner Information",\n    "admin.privilegedUserOptions.private": "Private:",\n    "admin.privilegedUserOptions.publishedDate": "Published Date:",\n    "admin.privilegedUserOptions.rating": "Rating:",\n    "admin.privilegedUserOptions.reassignlabel":"Reassign",\n    "admin.privilegedUserOptions.role": "Role:",\n    "admin.privilegedUserOptions.save": "Save",\n    "admin.privilegedUserOptions.source": "Source",\n    "admin.privilegedUserOptions.sourceLink": "Source Link:",\n    "admin.privilegedUserOptions.stories": "Stories:",\n    "admin.privilegedUserOptions.timeline": "Timeline",\n    "admin.privilegedUserOptions.trusted": "Trusted:",\n    "admin.privilegedUserOptions.trustedWithDescription": "Trusted. Clearing this will clear all checkboxes",\n    "admin.privilegedUserOptions.type": "Type:",\n    "admin.privilegedUserOptions.unfeature": "Unfeature",\n    "admin.privilegedUserOptions.url": "URL:",\n    "admin.privilegedUserOptions.urlLocked": "URL Locked:",\n    "admin.privilegedUserOptions.urlTaken": "Sorry, that URL has been taken by another item.\\n\\nWould you like to see the other item? Press OK to open the other item in a new window.",\n    "admin.privilegedUserOptions.verified": "Verified:",\n    "admin.privilegedUserOptions.verifiedDate": "Verified Date:",\n    "admin.privilegedUserOptions.videoJson": "Video JSON",\n    "admin.privilegedUserOptions.yes": "Yes",\n    "admin.recipeIdEtc": "Collection/CoreObject IDs/slugs/URLs",\n    "admin.regions": "Regions",\n    "admin.regions.cannotDeleteUsChannel": "Sorry, you cannot delete a standard US channel.",\n    "admin.regions.cannotDeleteUsRegion": "Sorry, you cannot delete the US region.",\n    "admin.regions.channels": "{REGION} Channels",\n    "admin.regions.channels.backToRegions": "← Back to Regions",\n    "admin.regions.channels.channelForDefaults.blissUS": "Bliss US",\n    "admin.regions.channels.channelForDefaults.brashUS": "Brash US",\n    "admin.regions.channels.channelForDefaults.buzzUS": "Buzz US",\n    "admin.regions.channels.channelForDefaults.foodieUS": "Foodie US",\n    "admin.regions.channels.channelForDefaults.glamUS": "Glam US",\n    "admin.regions.channels.channelForDefaults.tendUS": "Tend US",\n    "admin.regions.channels.channelForDefaults.videoUS": "Video US",\n    "admin.regions.channels.delete": "Delete the {CHANNEL} {REGION} channel",\n    "admin.regions.channels.description": "This page allows you to add/remove channels and edit them.",\n    "admin.regions.channels.displayName": "Display Name",\n    "admin.regions.channels.displayName.description": "The channel name, e.g., Glam",\n    "admin.regions.channels.displayName.missing": "Please specify a display name, e.g., Brash.",\n    "admin.regions.channels.fillInBlanks": "Fill in the blanks from:",\n    "admin.regions.channels.hydraChannel": "Hydra Channel",\n    "admin.regions.channels.hydraChannel.description": "&lt;channel&gt; to pass to <a {LINK_ATTRS}>Hydra Feeds</a>.",\n    "admin.regions.channels.images": "Images",\n    "admin.regions.channels.logoImage": "Logo (SVG)",\n    "admin.regions.channels.logoImagePng": "Logo (PNG)",\n    "admin.regions.channels.mch": "Adapt MCH Value",\n    "admin.regions.channels.mch.description": "Channel code that will be sent to Adapt.",\n    "admin.regions.channels.moveDown": "▼ Move down",\n    "admin.regions.channels.moveUp": "▲ Move up",\n    "admin.regions.channels.navImage": "Nav Image",\n    "admin.regions.channels.newChannel": "New Channel",\n    "admin.regions.channels.onboardingImage": "Onboarding Image",\n    "admin.regions.channels.pageImage": "Page Image",\n    "admin.regions.channels.responsiveLogoWidth": "Responsive Logo Width",\n    "admin.regions.channels.responsiveLogoWidth.description": "Logo width on phones and tablets.",\n    "admin.regions.channels.slug": "Slug",\n    "admin.regions.channels.slug.description": "The URL path, e.g., glam",\n    "admin.regions.channels.slug.invalidCharacters": "The slug contains invalid characters.",\n    "admin.regions.channels.slug.missing": "Please specify a slug, e.g., brash.",\n    "admin.regions.channels.slug.taken": "Sorry, that slug is already in use by another channel in this region.",\n    "admin.regions.channels.visibility": "Visibility",\n    "admin.regions.channels.visibility.description": "Who can see this channel?",\n    "admin.regions.countryCodes": "Country Codes",\n    "admin.regions.countryCodes.description": "<a {LINK_ATTRS}>ISO 3166-1</a> country codes, separated by commas. Used to set the user\'s initial region.",\n    "admin.regions.delete": "Delete the {REGION} region",\n    "admin.regions.delete.cancelled": "Cancelled deletion.",\n    "admin.regions.delete.instruction": "Enter “{PASSPHRASE}” to confirm deletion.",\n    "admin.regions.description": "This page allows you to add/remove regions and edit them.",\n    "admin.regions.editChannels": "Edit channels",\n    "admin.regions.flagImage": "Flag Image",\n    "admin.regions.hydraRegion": "Hydra Region",\n    "admin.regions.hydraRegion.description": "&lt;region&gt; to pass to <a {LINK_ATTRS}>Hydra Feeds</a>.",\n    "admin.regions.hydraRegionLanguage": "Hydra Language",\n    "admin.regions.hydraRegionLanguage.description": "regionLanguage to pass to <a {LINK_ATTRS}>Hydra Feeds</a>.",\n    "admin.regions.links.desktopAboutLinks": "Desktop About Links",\n    "admin.regions.links.invalidLink": "Invalid link: \'{LINK}\'",\n    "admin.regions.links.mobileAboutLinks": "Mobile About Links",\n    "admin.regions.newRegion": "New Region",\n    "admin.regions.regionAlreadyExists": "Sorry, that region already exists.",\n    "admin.regions.regionCode": "Region Code",\n    "admin.regions.regionCode.description": "A 2-letter ISO-3166-1 country code, or a custom 3-letter code. 2-letter codes get automatic IP detection for new users.",\n    "admin.regions.regionContainsInvalidCharacters": "Sorry, the region contains some invalid characters.",\n    "admin.regions.regionExceeds3Characters": "Sorry, the region should be 2-3 characters in length.",\n    "admin.regions.regionMissing": "Please specify a 2-3-character region code.",\n    "admin.regions.testRegion": "Test Region",\n    "admin.regions.testRegion.description": "Check this if you think this region is for testing purpose like ZZ region",\n    "admin.regions.viewChannels": "View channels",\n    "admin.regions.visibility": "Visibility",\n    "admin.regions.visibility.admins": "Admins",\n    "admin.regions.visibility.adops": "Ad Ops",\n    "admin.regions.visibility.description": "Who can see this region?",\n    "admin.regions.visibility.editors": "Editors",\n    "admin.regions.visibility.everyone": "Everyone",\n    "admin.regions.visibility.none": "None",\n    "admin.regions.visibility.product": "Product",\n    "admin.runtimeProperties.description": "These are the config-file properties being used by Yoko. They are taken from config files in Yoko and Gepo.",\n    "admin.runtimeProperties.title": "Runtime Properties",\n    "admin.scheduledTasks.channelSelect": "Select channel",\n    "admin.scheduledTasks.correctSchedule": "Please provide correct schedule date.",\n    "admin.scheduledTasks.defaultDatetime": "YYYY-MM-DD HH:MM:SS AM/PM",\n    "admin.scheduledTasks.delete": "Delete",\n    "admin.scheduledTasks.description": "This page allows you to add/edit/delete scheduled tasks. You can schedule various jobs like publishing of a story or adding it to story.",\n    "admin.scheduledTasks.input": "Input the number at the end of the URL when you scroll to the top of the story/hub page.",\n    "admin.scheduledTasks.inputDate": "Input the date time in your timezone.",\n    "admin.scheduledTasks.invalidTaskType": "Please select correct task type.",\n    "admin.scheduledTasks.listAuthor": "Task Author",\n    "admin.scheduledTasks.listCreatedDate": "Task Created Date",\n    "admin.scheduledTasks.listScheduledDate": "Task Scheduled Date",\n    "admin.scheduledTasks.listTitle": "Task Title",\n    "admin.scheduledTasks.newTask": "New Task",\n    "admin.scheduledTasks.noTasks": "No tasks",\n    "admin.scheduledTasks.pendingTasks": "Pending tasks",\n    "admin.scheduledTasks.provideChannelId": "Please select a channel.",\n    "admin.scheduledTasks.provideStoryOrHubId": "Please provide Story or Hub id.",\n    "admin.scheduledTasks.scheduleInFuture": "Scheduled time should be in the future.",\n    "admin.scheduledTasks.scheduleOn" : "Schedule task on",\n    "admin.scheduledTasks.selectedChannel": "Select channel",\n    "admin.scheduledTasks.storyOrHubAlreadyAddedForFeatureOrHero": "Story or Hub is already added for feature or hero.",\n    "admin.scheduledTasks.storyOrHubAlreadyAddedForHero": "Story or Hub is already added for hero.",\n    "admin.scheduledTasks.storyOrHubAlreadyAddedForPublishOrHeroOrFeature": "Story or Hub is already added for publish or hero or feature.",\n    "admin.scheduledTasks.storyOrHubAlreadyFeatured": "Story or Hub is already featured.",\n    "admin.scheduledTasks.storyOrHubAlreadyHeroed": "Story or Hub is already hero.",\n    "admin.scheduledTasks.storyOrHubAlreadyPublished": "Story or Hub is already published.",\n    "admin.scheduledTasks.storyOrHubToAdd": "ID of Story or Hub to add",\n    "admin.scheduledTasks.storyOrHubToPublish": "ID of Story or Hub to publish",\n    "admin.scheduledTasks.taskFeature": "Feature",\n    "admin.scheduledTasks.taskHero": "Hero",\n    "admin.scheduledTasks.taskPublish": "Publish",\n    "admin.scheduledTasks.taskSelect": "Select",\n    "admin.scheduledTasks.taskType": "Task type",\n    "admin.scheduledTasks.title": "Scheduled Tasks",\n    "admin.scheduledTasks.titleForFeature": "Feature {TYPE} {COLLECTION} on {CHANNEL}",\n    "admin.scheduledTasks.titleForHero": "Hero {TYPE} {COLLECTION} on {CHANNEL}",\n    "admin.scheduledTasks.titleForPublish": "Publish {TYPE} {COLLECTION} ",\n    "admin.selectDate": "Select date range:",\n    "admin.selectFrom": "From",\n    "admin.selectTo": "To",\n    "admin.story.featureWithoutVerification": "This story has not been verified, are you sure you want to feature it?",\n    "admin.tab.nav.label": "Admin",\n    "admin.table.lengthMenu": "Show _MENU_",\n    "admin.table.paginate.next": "❯",\n    "admin.table.paginate.previous": "❮",\n    "admin.table.zeroRecords": "No records to display.",\n    "admin.tile.body.placeholder": "Enter additional content.",\n    "admin.toCreateNewInvites": "To create new invites, enter email addresses for users to be invited.",\n    "admin.troubleshooting": "Troubleshooting",\n    "admin.troubleshooting.title": "Troubleshooting",\n    "admin.user.status.admin": "Admin",\n    "admin.user.status.adops": "Ad Ops",\n    "admin.user.status.editor": "Editor",\n    "admin.user.status.member": "Member",\n    "admin.user.status.product": "Product",\n    "admin.userManagement": "User Management",\n    "admin.userManagement.assignmentsAccountManager": "Assignments Account Manager",\n    "admin.userManagement.assignmentsAdmin": "Assignments Admin",\n    "admin.userManagement.assignmentsCreator": "Assignments Creator",\n    "admin.userManagement.assignmentsDas": "Assignments DAS",\n    "admin.userManagement.assignmentsDcc": "Assignments DCC",\n    "admin.userManagement.assignmentsEditor": "Assignments Editor",\n    "admin.userManagement.assignmentsPm": "Assignments PM",\n    "admin.userManagement.assignmentsQa": "Assignments QA",\n    "admin.userManagement.assignmentsSalesperson": "Assignments Salesperson",\n    "admin.userManagement.auth": "AUTH",\n    "admin.userManagement.channelManagers": "CHANNEL MANAGERS",\n    "admin.userManagement.countryLang": "COUNTRY / LANGUAGE",\n    "admin.userManagement.email": "EMAIL",\n    "admin.userManagement.groups": "GROUPS",\n    "admin.userManagement.id": "ID",\n    "admin.userManagement.influencer": "Influencer",\n    "admin.userManagement.joined": "JOINED",\n    "admin.userManagement.name": "NAME",\n    "admin.userManagement.roles": "ROLE",\n    "admin.userManagement.submenu.activeUsers": "ACTIVE",\n    "admin.userManagement.submenu.bannedUsers": "BANNED",\n    "admin.userManagement.submenu.deactivatedUsers": "DEACTIVATED",\n    "admin.userManagement.trusted": "TRUSTED",\n    "admin.userManagement.trusted.confirm.main": "Are you sure you want to remove this user from the Main Trusted list? It will remove them from the category page and from the trusted lists for all regions and channels.",\n    "admin.userManagement.trusted.confirm.region": "Are you sure you want to remove this user from the {REGION} Region Trusted list? It will remove them from trusted lists for all {REGION} channels.",\n    "admin.userManagement.trustedChannels": "TRUSTED CHANNELS",\n    "admin.userManagement.verification.notVerified": "Not Verified",\n    "admin.userManagement.verification.undeliverable": "Undeliverable",\n    "admin.userManagement.verification.verified": "Verified",\n    "admin.wrongDateRange": "Date range provided is wrong.",\n    "admin.youJustInvited": "You just created the following invites:",\n    "band.unpublished.message.hub": "This hub is in Draft status. When you’re ready, <a {HREF_ATTRS}><strong>publish</strong></a> it.",\n    "collect.chooseHub": "Choose a hub",\n    "collect.newHub": "+ New Hub",\n    "collect.widget.header.hub": "Add to Hub",\n    "collection.dialog.noHeroControl": "Hero controls are enabled when this belongs to any hub.",\n    "date.YMDHMS": "{YEAR}-{MONTH_PAD}-{DAY_PAD} {HR24}:{MIN}:{SECOND}",\n    "message.tile.actions.deleteFromChannel": "Remove item from channel",\n    "message.tile.actions.deleteFromHub": "Remove item from hub",\n    "nav.settings.disableAdminView": "Disable Admin",\n    "nav.settings.disableAdopsView": "Disable Adops",\n    "nav.settings.disableEditorView": "Disable Editor",\n    "nav.settings.disableProductView": "Disable Product",\n    "nav.settings.enableAdminView": "Enable Admin",\n    "nav.settings.enableAdopsView": "Enable Adops",\n    "nav.settings.enableEditorView": "Enable Editor",\n    "nav.settings.enableProductView": "Enable Product",\n    "nav.settings.stopDebugging": "Stop Debugging",\n    "nav.settings.stopImpersonating": "Stop Impersonating",\n    "user.tempMember.googleAnalyticsIdNotCorrect": "Warning: The Google Analytics ID is not correct for this environment.",\n    "user.tempMember.noTrackingPixelAffiliateId": "Warning: No affiliate ID is specified for the tracking pixel.",\n    "user.tempMember.viewAsMember": "VIEWING AS {USER_ROLE}. CLICK TO VIEW AS MEMBER.",\n    "": ""\n}\n'}),define("html",[],function(){"use strict";var e={};return e.escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")},e.unescape=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes.length===0?"":t.childNodes[0].nodeValue},e}),define("i18n",["MessageFormat","text!catalogs/admin.json","html","require"],function(e,t,n,r){"use strict";var i={},s,o,u,a,f,l,c="#SAFE#";return a=y$.parseJSON(t),u=y$.extend({},window.yokoCatalog,a),i.html=function(e,t){var r={},i,s;typeof e=="object"&&(t=y$.extend(e[1],t),e=e[0]);for(i in t)t.hasOwnProperty(i)&&(s=t[i]===null?"":t[i].toString(),s.indexOf(c)===0?r[i]=s.substr(c.length):r[i]=n.escape(t[i]));return f(e,r)},i.text=function(e,t){var r=new RegExp(/<\/?[^>]+>/g),s=i.html(e,t);return n.unescape(s.replace(r,""))},i.safe=function(e){return c+e},f=function(t,n,r){var i=l(n||{}),s=r||"en_US",u=s.substr(0,2),a=new e(u),f=o(t,s),c=a.compile(f);return c(i)},l=function(e){var t={},n;for(n in e)e.hasOwnProperty(n)&&(t[s(n)]=e[n]);return t},o=function(e,t){return u[e]||s(e)},s=function(e){return e.replace(/([A-Z])/g,function(e){return"_"+e.toUpperCase()}).toUpperCase()},jSmart.prototype.registerPlugin("function","h",function(e,t){var n={},r,s,o;if(!e.k)throw{name:"KeyNotSuppliedException",message:"Key not supplied for i18n phrase."};e.k instanceof Array?(s=e.k[0],o=y$.extend(e.k[1],e)):(s=e.k,o=e);for(r in o)if(o.hasOwnProperty(r)&&r.indexOf("_")!==0&&r!=="k"){n[r]=o[r];if(r.substr(-4)==="Html"||r.substr(-5)==="Attrs")n[r]=i.safe(n[r])}return i.html(s,n)}),jSmart.prototype.registerPlugin("function","t",function(e,t){var n={},r,s,o;if(!e.k)throw{name:"KeyNotSuppliedException",message:"Key not supplied for i18n phrase."};e.k instanceof Array?(s=e.k[0],o=e.k[1],o=y$.extend(e.k[1],e)):(s=e.k,o=e);for(r in o)o.hasOwnProperty(r)&&r.indexOf("_")!==0&&r!=="k"&&(n[r]=o[r]);return i.text(s,n)}),i}),define("util/datetime",["i18n"],function(e){"use strict";var t={};return Date.prototype.getDOY=function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil((this-e)/864e5)},Date.prototype.getMondayWeek=function(){var e=new Date(this.getFullYear(),0,1),t=e.getDay()||7;return Math.ceil(((this-e)/864e5+t)/7)-1},Date.prototype.getSundayWeek=function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)-1},t.parseTime=function(e){var t,n,r,i,s,o,u;return t=e.replace(/\D+$/,"").split(/\D+/).reverse(),n={days:0,hours:0,minutes:0},r=["minutes","hours","days"],i={minutes:{max:60,next:"hours"},hours:{max:24,next:"days"}},s=0,o=t.length,y$.each(t,function(e,t){n[r[s]]=parseInt(t,10),s+=1}),y$.each(i,function(e,t){o=n[e];if(!o||o<t.max)return;u=parseInt(o/t.max,10),o-=u*t.max,n[e]=o,n[t.next]=(n[t.next]||0)+u}),n},t.partsToTime=function(e){var t,n,r,i;return t={minutes:!0,hours:!0,days:!1},n=[],y$.each(t,function(s,o){o=t[s],r=parseInt(e[s]||0,10),isNaN(r)&&(r=0);if(r>0||o)i=o&&r<10?"0"+r:String(r),n.unshift(i)}),i=n.join(":"),i==="00:00"?"":i},t.timeDuration=function(t,n){var r,i,s,o,u,a;r=["seconds","minutes","hours","days"],n||(t+=":00"),i=t.split(":"),s={};for(a in r)r.hasOwnProperty(a)&&(o=r[a],u=parseInt(i.pop(),10),s[o]=isNaN(u)?0:u);return e.html("time.duration",s)},t.duration=function(n){var r=t.prepareDurationArgs(n);return y$.trim(e.html("time.duration",r))},t.durationAbbr=function(n){var r=t.prepareDurationArgs(n);return y$.trim(e.html("time.durationAbbr",r))},t.prepareDurationArgs=function(e){var t,n,r,i,s;e=parseInt(e,10),t={days:86400,hours:3600,minutes:60,seconds:1},n={};for(r in t)t.hasOwnProperty(r)&&(i=t[r],e>=i?(s=parseInt(e/i,10),n[r]=s,e-=s*i):n[r]=0);return n},t.relative=function(n,r){var i=t.parseDate(n),s=new Date,o=parseInt(s.getTime()/1e3,10),u=o-i;return r||(r={seconds:"date.secondsAgo",minutes:"date.minutesAgo",hours:"date.hoursAgo",days:"date.daysAgo",weeks:"date.weeksAgo",months:"date.monthDayFormat",years:"date.monthDayYearFormat"}),u<60?e.html(r.seconds,{seconds:u}):u<3600?e.html(r.minutes,{minutes:parseInt(u/60,10)}):u<86400?e.html(r.hours,{hours:parseInt(u/3600,10)}):u<604800?e.html(r.days,{days:parseInt(u/86400,10)}):u<2419200?e.html(r.weeks,{weeks:parseInt(u/604800,10)}):s.getFullYear()===(new Date(i*1e3)).getFullYear()?t.format(r.months,i):t.format(r.years,i)},t.relativeShort=function(e){var n={seconds:"date.sAgo",minutes:"date.mAgo",hours:"date.hAgo",days:"date.dAgo",weeks:"date.wAgo",months:"date.monDayFormat",years:"date.monDayYearFormat"};return t.relative(e,n)},t.relativeTooShort=function(e){var n={seconds:"date.s",minutes:"date.m",hours:"date.h",days:"date.d",weeks:"date.w",months:"date.monDayFormat",years:"date.monDayYearFormat"};return t.relative(e,n)},t.format=function(n,r){var i=t.parseDate(r),s=new Date(i*1e3),o=s.getTimezoneOffset(),u=new Date(s.getTime()+o*60*1e3),a=t.prepareDateParams(u);return e.html(n,a)},t.parseDate=function(e){var t,n,r,i;if(e===undefined||e===null)return i=(new Date).getTime(),parseInt(i/1e3,10);t=String(e).match(/(\d\d\d\d)-(\d\d)-(\d\d)(?:[T ](\d\d:\d\d:\d\d)(\.\d+)?)*(?:\s*(Z|UTC|GMT|[\+\-]\d+))*/);if(t)return n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=n[parseInt(t[2]-1,10)]+" "+t[3]+" "+t[1]+" "+(t[4]||"00:00:00")+" "+(t[6]==="Z"||t[6]==="UTC"||t[6]==="GMT"?"+0000":t[6]),parseInt(Date.parse(r)/1e3,10);i=(new Date).setTime(e*1e3);if(isNaN(i))throw{name:"InvalidDateException",message:"Invalid date: "+e};return parseInt(i/1e3,10)},t.prepareDateParams=function(e){var t={dow:e.getDay(),doy:e.getDOY(),day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear(),hour:e.getHours(),minute:("0"+e.getMinutes()).slice(-2),second:("0"+e.getSeconds()).slice(-2),swoy:e.getSundayWeek(),mwoy:e.getMondayWeek()};return{dowNameShort:t.dow,dowName:t.dow,monthName:t.month,monthNameShort:t.month,day:t.day,year:t.year,hr12:!t.hour||t.hour===12?12:t.hour%12,hr24:t.hour,dayOfYear:t.doy,min:t.minute,month:t.month,ampm:t.hour<12?"am":"pm",second:t.second,sundayWoy:t.swoy,mondayWoy:t.mwoy,iso8601Dow:t.dow||7,sunday0Dow:t.dow}},t.parseTimeToMinutes=function(e){var n,r,i,s;return s=0,i={minutes:1,hours:60,days:1440},n=t.parseTime(e),y$.each(i,function(e,t){r=n[e],r!==undefined&&(s+=t*parseInt(r,10))}),s},window.D=function(e,n){var r;return n==="short"?r=t.relativeShort(e):n==="tooShort"?r=t.relativeTooShort(e):n?r=t.format(n,e):r=t.relative(e),r},jSmart.prototype.registerPlugin("function","d",function(e,t){var n=e.d,r;return n.date&&(r=n.timezone,r||(r="+0000"),e.d=n.date+r),window.D(e.d,e.f)}),t}),define("util/number",["i18n"],function(e){"use strict";var t={};return t.format=function(t,n){var r,i="",s,o,u=[],a=String(t),f=a.match(/\.(\d+)$/),l=e.text("number.sep.thousand"),c=e.text("number.sep.decimal");n===!0&&(f?n=f[1].length:n=0),r=a.replace(/\.\d+$/,"").split("").reverse();while(r.length>0)u.unshift(r.splice(0,3).reverse().join(""));return a=u.join(l),n>0&&(f&&(o=Math.pow(10,n),i=String(Math.round(("1"+f[0])*o)).substr(1)),i.length<n&&(s=[],s.length=n-i.length+1,i+=s.join("0")),a=a+c+i),a},t.abbr=function(t,n){var r={0:"number.abbr.one",3:"number.abbr.thousand",6:"number.abbr.million",9:"number.abbr.billion",12:"number.abbr.trillion"},i={0:{mag:0,dec:0},1:{mag:0,dec:0},2:{mag:0,dec:0},3:{mag:3,dec:1},4:{mag:3,dec:1},5:{mag:3,dec:0},6:{mag:6,dec:1},7:{mag:6,dec:1},8:{mag:6,dec:0},9:{mag:9,dec:1},10:{mag:9,dec:1},11:{mag:9,dec:0},12:{mag:12,dec:1},13:{mag:12,dec:1},14:{mag:12,dec:0}},s=String(t),o=s.length-1,u=i[o],a=u.mag,f=e.text("number.sep.decimal");return u===undefined?null:(s/=Math.pow(10,a),s=Number(s.toString().match(/^\d+(?:\.\d{0,1})?/)),u.dec!==0&&(s=s.toString().replace(/\.[1-9]*0+$/,"")),s=s.toString().replace(/\./,f),n?e.html(r[a],{number:s,numberAttrs:e.safe('class="number"'),unitAttrs:e.safe('class="unit"')}):e.text(r[a],{number:s}))},t.isNumberInput=function(e){var t,n=e.val();return!n.match(/^[0-9]+$/)&&n!==""?(setTimeout(function(){e.val(n.replace(/[^0-9]/g,""))},1),t=!1):t=!0,t},window.N=function(e,n,r){return n==="abbr"?t.abbr(e,r):t.format(e,n)},jSmart.prototype.registerPlugin("function","n",function(e,t){return window.N(e.n,e.f,e.s)}),t}),define("util/http",[],function(){"use strict";var e={},t=window.location.href;return e.delete=function(e,t,n,r){return t=t||{},n=n||function(){y$.noop()},r=r||function(e){var t=JSON.parse(e.responseText);n(t)},y$.ajax({url:e,type:"DELETE",data:t,success:n,error:r})},e.put=function(e,t,n,r){return t=t||{},n=n||function(){y$.noop()},r=r||function(e){var t=JSON.parse(e.responseText);n(t)},y$.ajax({url:e,type:"PUT",data:t,success:n,error:r})},e.post=function(e,t,n,r){return t=t||{},n=n||function(){y$.noop()},r=r||function(e){var t=JSON.parse(e.responseText);n(t)},y$.ajax({url:e,type:"POST",data:t,success:n,error:r})},e.get=function(e,t,n,r){return t=t||{},n=n||function(){y$.noop()},r=r||function(e){var t=JSON.parse(e.responseText);n(t)},y$.ajax({url:e,type:"GET",data:t,success:n,error:r})},e.buildUrl=function(n,r,i,s){var o,u,a;return i=i||"abs",typeof n!="string"&&(n=t),o=e.parseUrl(n),a=e.parseUrl(t),u=e.parseStr(o.query,!0),r?typeof r=="string"&&(r=e.parseStr(r)):r={},o.host||(o.scheme=a.scheme,o.host=a.host,a.port&&(o.port=a.port)),y$.each(r,function(e,t){t===null?delete u[e]:u[e]=encodeURIComponent(t)}),o.query=e.buildQuery(u,!0),i==="ssl"?o.scheme="https":i==="!ssl"&&(o.scheme="http"),i!=="rel"?(o.user&&(o.auth=o.user+(o.pass?":"+o.pass:"")),n=(o.scheme||a.scheme)+"://"+(o.auth?o.auth+"@":"")+o.host+(o.port?":"+o.port:"")):n="",s!==undefined&&(o.fragment=s),n+(o.path||"/")+(o.query?"?"+o.query:"")+(o.fragment?"#"+o.fragment:"")},e.parseUrl=function(t){var n={},r,i,s;return t.indexOf("#")!==-1&&(r=e.psplit(t,"#",2),n.fragment=r[1],t=r[0]),t.indexOf("?")!==-1&&(r=e.psplit(t,"?",2),n.query=r[1],t=r[0]),t.indexOf("//")===0?(s=t.indexOf("/",2),n.host=t.substring(2,s),n.path=t.substr(s)):t.indexOf("/")===0?n.path=t:t.indexOf("://")!==-1&&(r=e.psplit(t,"://",2),n.scheme=r[0],r=e.psplit(r[1],"/",2),n.path="/"+(r[1]||""),r[0].indexOf("@")!==-1&&(r=e.psplit(r[0],"@",2),i=e.psplit(r[0],":",2),n.user=i[0],n.pass=i[1],r[0]=r[1]),r[0].indexOf(":")!==-1?(r=e.psplit(r[0],":",2),n.host=r[0],n.port=r[1]):n.host=r[0]),n},e.simplifyPath=function(e){var t,n,r=[],i;e=e.replace(/^\/+/,""),t=e.split("/"),n=t.length;for(i=0;i<n;i+=1)t[i]===".."?r.pop():t[i]&&t[i]!=="."&&r.push(t[i]);return"/"+r.join("/")},e.psplit=function(e,t,n){var r=e.split(t),i=[];return n!==undefined&&n<r.length?(i=r.splice(0,n-1),i[n-1]=r.join(t)):i=r,i},e.parseStr=function(t,n){var r,i={};return t?(r=t.split(/\&/),y$.each(r,function(t,r){var s=e.psplit(r,"=",2);n?i[decodeURIComponent(s[0])]=s[1]:i[decodeURIComponent(s[0])]=decodeURIComponent(s[1].replace(/\+/g,"%20"))}),i):i},e.buildQuery=function(e,t){var n=[];return y$.each(e,function(e,r){t?n.push(encodeURIComponent(e)+"="+r):n.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}),n.join("&")},e.setCurrentUrl=function(e){if(window.location.protocol!=="file:")throw{name:"UnitTestUseOnly",message:"Setting current URL is only allowed from unit tests."};t=e},jSmart.prototype.registerPlugin("function","u",function(t,n){return e.buildUrl(t.u,t.a,t.o)}),window.U=e.buildUrl,e}),define("util/ifseta",["html"],function(e){"use strict";var t=function(t,n,r,i){return t&&t[n]!==undefined?i?e.escape(t[n]):t[n]:r===undefined?null:r};return jSmart.prototype.registerPlugin("function","ifseta",function(e,n){return t(e.a,e.i,e.d,e.qh)}),t}),define("util/ifseta2",["util/ifseta"],function(e){"use strict";jSmart.prototype.registerPlugin("function","ifseta2",function(t,n){return n[t.o]=e(t.a,t.i,e(t,"d")),""})}),define("util/json",["html"],function(e){"use strict";return jSmart.prototype.registerPlugin("function","json",function(t,n){var r=JSON.stringify(t.a);return t.qh&&(r=e.escape(r)),r}),JSON}),define("util/aspect",[],function(){"use strict";var e=function(e){return e!==undefined?100/e:100};return jSmart.prototype.registerPlugin("function","aspect",function(t,n){return e(t.a)}),e}),define("util/contextMsgKey",[],function(){"use strict";var e=function(e,t){return window.yoko&&window.yoko.appContext&&window.yoko.appContext.context&&window.yoko.appContext.context==="cannes"?e:t};return jSmart.prototype.registerPlugin("function","contextMsgKey",function(t,n){return e(t.cannes,t.foodie)}),e}),define("util/shy",[],function(){"use strict";var e=function(e,t){var n;return e!==undefined&&t!==undefined?(n=new RegExp("(\\w{"+t+",100})","gi"),e.replace(n,function(e,t,n,r){return t.replace(/(\w{3})(\w{2})/g,"$1&shy;$2")})):e!==undefined?e.replace(/(\w{3})(\w{2})/g,"$1&shy;$2"):e||null};return jSmart.prototype.registerPlugin("function","shy",function(t,n){return e(t.s,t.n)}),e}),define("util/image",[],function(){"use strict";var e=function(e,t){var n,r,i=[];if(!e)return!1;if(e.search("cdn.mode.com")===-1)return e;for(n in t)t.hasOwnProperty(n)&&(r={},r[n]=t[n],i.push(r));return i.length<1?e:BlobManager.transform(e,i)};return jSmart.prototype.registerPlugin("function","image",function(t,n){return e(t.u,t.t)}),e}),define("util/round",[],function(){"use strict";jSmart.prototype.registerPlugin("function","round",function(e,t){return Math.round(e.n)})}),define("template",["i18n","util/datetime","util/number","util/http","util/ifseta","util/ifseta2","util/json","util/aspect","util/contextMsgKey","util/shy","util/image","util/round"],function(){"use strict";jSmart.prototype.addDefaultModifier(["escape"]);var e,t={};return window.yoko.templates=window.yoko.templates||{},window.yoko.partials=window.yoko.partials||{},t.renderAs=function(e,n,r,i){y$(e).html(t.render(n,r,i))},t.render=function(n,r,i){var s,o=jSmart;return t.addPartials(i),s=e(n),window.yoko.templates[s]||(window.yoko.templates[s]=new o(n)),window.yoko.templates[s].fetch(r)},t.addPartials=function(e){if(e===undefined)return;y$.each(e,function(e,t){window.yoko.partials[e]=t})},e=function(e){var t,n,r=0;if(e.length===0)return r;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t),r=(r<<5)-r+n,r&=r;return r},jSmart.prototype.getTemplate=function(e){return window.yoko.partials[e]||null},t}),define("placeholder",["i18n"],function(e){"use strict";var t={},n,r;return t.init=function(e,t){y$(e).each(function(){n(this,t)}),y$("body").on("focus",e,function(e){y$(this).data("usingPlaceholder")&&(y$(this).text(""),y$(this).toggleClass("placeholder",!1),y$(this).data("usingPlaceholder",!1),y$(this).prop("contenteditable")&&r(this))}),y$("body").on("blur",e,function(){n(this,t)})},t.release=function(e){y$("body").off("focus blur",e)},n=function(t,n){var r=y$(t).data("placeholder");n=n||{},!y$.trim(y$(t).text())&&r&&(y$(t).text(e.text(r,n)),y$(t).toggleClass("placeholder",!0),y$(t).data("usingPlaceholder",!0))},r=function(e){var t,n;t=document.createRange(),t.selectNodeContents(e),t.collapse(!0),n=window.getSelection(),n.removeAllRanges(),n.addRange(t),y$(e).click()},t}),define("util/limitCharacters",[],function(){"use strict";var e={attach:function(t,n){var r;if(!t)return;n=n||{},r=y$(t),r.on("focus",".char-show",e.showCharCount).on("keyup",".char-show",e.calculateCharacterCount).on("paste",".char-show",function(t){setTimeout(function(){e.enforceMaxLength(y$(t.target))},100)}),n.hideOnBlur===!1?e.showCharCount({target:r.find(".char-show")}):r.on("blur",".char-show",function(t){window.setTimeout(e.hideCharCount,300,t)})},showCharCount:function(t){var n=y$(t.target);e.calculateCharacterCount(t),n.siblings(".char-limit").css("display","block"),n.siblings(".char-limit").css("visibility","visible")},hideCharCount:function(e){var t=y$(e.target);t.siblings(".char-limit").css("display","none"),t.siblings(".char-limit").css("visibility","hidden")},calculateCharacterCount:function(t){var n,r,i=y$(t.target);n=i.data("maxLength"),r=i.is(":input")?i.val().length:i.text().length,i.data("usingPlaceholder")?i.siblings(".char-limit").children().first().text(n):r>n?i.siblings(".char-limit").children().first().text(0):i.siblings(".char-limit").children().first().text(n-r),e.enforceMaxLengthOnKeyEvent(t)},enforceMaxLengthOnKeyEvent:function(t){var n,r,i=y$(t.target);if(t.keyCode<48&&t.keyCode!==32)return;n=i.data("maxLength");if(!(n>0))return;r=i.is(":input")?i.val().length:i.text().trim().length,r>=n&&(t.preventDefault(),t.type==="keyup"&&r-n>=1&&e.enforceMaxLength(i))},enforceMaxLength:function(e){var t=e.data("maxLength"),n=e.is(":input")?e.val().length:e.text().length;t&&n>t&&(e.is(":input")?e.val(e.val().substr(0,t)).blur():e.text(e.text().substr(0,t)).blur())}};return e}),define("text!t/error/input.smarty",[],function(){return'{**\n * Input error.\n *\n * @param string $html Error in HTML.\n *}\n<span class="error">\n    {$html}\n</span>\n'}),define("text!t/util/edtGroupRemove.smarty",[],function(){return'{**\n * Group item remove icon.\n *}\n<a href="#" class="edt-group-remove"><i class="icon icn-remove"></i></a>\n'}),define("editable",["template","i18n","placeholder","util/http","util/limitCharacters","util/datetime","text!t/error/input.smarty","text!t/util/edtGroupRemove.smarty"],function(e,t,n,r,i,s,o,u){"use strict";var a={},f=!1,l,c,h,p,d,v,m,g,y,b,w,E,S;return a.init=function(){n.init(".editable"),y$(".edt-text, .edt-time, .edt-int, .edt-url").prop("contenteditable",!0),y$(".edt-url").each(function(e,t){w(y$(t))}),d(y$(".edt-group-item")),f||(y$("body").on("focus",".edt-text, .edt-group-item, .edt-time, .edt-int, .edt-url",l).on("focus",".edt-dropdown",c).on("click",".edt-clear-url",y).on("click",".edt-group-remove",v).on("paste",".edt-text, .edt-time, .edt-int, .edt-url",function(e){E(e),setTimeout(function(){i.enforceMaxLength(y$(e.target))},100)}).on("keydown",".edt-time",function(e){e.keyCode===13&&y$(e.target).trigger("blur")}).on("keydown",".edt-text, .edt-int, .edt-url",function(e){e.keyCode===13&&!y$(this).hasClass("edt-wysiwyg")&&y$(e.target).trigger("blur"),i.enforceMaxLengthOnKeyEvent(e)}).on("keyup",".edt-text, .edt-int, .edt-url",function(e){i.enforceMaxLengthOnKeyEvent(e)}).on("keyup",".char-show",i.calculateCharacterCount).on("blur",".edt-text, .edt-time, .edt-int",h).on("blur",".edt-url",p).on("blur",".edt-group-item",m).on("blur",".editable-dropdown select",g),f=!0)},l=function(e){var t=y$(e.target);i.showCharCount(e),b(t),t.data("editableValue")&&t.text(t.data("editableValue")),t.addClass("is-active")},h=function(e,t){var n=y$(e.target),r=n.data("editableId"),o=n.data("editableField"),u=n.data("editableValue"),a,f;i.enforceMaxLength(y$(e.target));if(n.data("editableCallDisabled"))return!1;n.hasClass("edt-wysiwyg")?a=n.html().replace(/<br>\s*<\/div>/gi,"<br>").replace(/<div>/gi,"").replace(/<\/div>/gi,"<br>"):a=y$.trim(n.text()),i.hideCharCount(e),n.data("editableValue")?n.addClass("disabled").prop("disabled",!0):n.removeClass("is-active"),b(n);if(n.hasClass("edt-time")){f=s.parseTimeToMinutes(a);if(isNaN(f)){n.text(s.timeDuration(u));return}a=f}else n.hasClass("edt-int")&&(a=parseInt(a,10));n.data("usingPlaceholder")&&(a=""),S(n,{editableId:r,editableField:o,fieldValue:a},t)},p=function(e){var t=y$(e.target),n=function(e){return w(t),!0};h(e,n)},d=function(t){var n=e.render(u),r;t.each(function(e,t){var i=y$(t),s=y$.trim(i.text());i.data("usingPlaceholder")||i.data("val",s),i.prop("contenteditable",!0),r=i.closest(".editable-group").find(".edt-group-item").not(".edt-group-item-new").length,r>1&&!i.hasClass("edt-group-item-new")&&!i.next().hasClass("edt-group-remove")&&i.after(n)})},v=function(e){var t=y$(e.target).closest(".edt-group-row"),n=t.find(".edt-group-item");e.preventDefault(),n.data({val:!1}).text("").trigger("blur")},m=function(t){var r=[],i=y$(t.target).closest(".edt-group-item"),s=i.closest(".editable-group"),o=s.find(".edt-group-row"),u=[],a=s.data("editableId"),f=s.data("editableField"),l=s.data("editableTemplate"),c=s.data("editableNewTemplate"),h=y$.trim(i.text()),p=i.data("val");i.removeClass("is-active");if(!(p===!1||h!==p&&!i.data("usingPlaceholder")))return;if(s.hasClass("disabled"))return;s.addClass("disabled").find("*").prop("contenteditable",!1),o.each(function(e,t){var n=[],i=y$(t);i.find(".edt-group-item").each(function(){var e=y$(this),t=parseInt(e.data("editableIndex"),10)-1,r=y$.trim(e.text());e.data("usingPlaceholder")&&(r=""),r||(r=e.data("val")),r&&(n[t]=r)}),r.push(n),i.hasClass("edt-group-new")&&i.find(".edt-group-item").text("")}),S(i,{editableId:a,editableField:f,fieldValue:r},function(t){if(t.status!=="ok")return;s.find(".edt-group-row").html(""),y$.each(t.data[f],function(t,n){u.push(e.render(l,{i:t,val:n,editable:!0}))}),u.push(e.render(c)),o.eq(-1).after(u.join("")),o.remove(),n.init(s.find(".editable")),d(s.find(".edt-group-item")),s.removeClass("disabled")})},c=function(e){var t=y$(e.target),n=t.siblings(".editable-dropdown"),r=n.children("select");t.hide(),n.addClass("is-active").show(),r.focus()},g=function(e){var t=y$(e.target),n=t.closest(".editable-dropdown"),r=n.data("editableId"),i=n.data("editableField"),s=y$.trim(t.val());t.removeClass("is-active"),S(t,{editableId:r,editableField:i,fieldValue:s},function(e){if(e.status==="ok"){var t=n.find("option:selected").text();n.hide().siblings(".edt-dropdown").text(t).show()}return!0})},y=function(e){var t=y$(e.target).siblings(".edt-url");t.parent().find(".edt-clear-url").remove(),y$(e.target).remove(),t.html(""),b(t),t.addClass("is-active"),t.focus()},b=function(e){e.removeClass("edt-error"),e.siblings(".error").remove()},w=function(e){e.parent().find(".edt-clear-url").remove(),e.html()&&!e.data("usingPlaceholder")&&e.after('<a class="edt-clear-url"></a>')},E=function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain"),n=y$(e.target);n.hasClass("edt-notabs")&&(t=t.replace(/[\r\n\t]/gm," ")),document.execCommand("insertText",!1,t)},S=function(n,i,s){var u=encodeURIComponent(i.editableId),a=encodeURIComponent(i.editableField),f;r.put("/api/web/latest/content/"+u+"/field/"+a,{fieldValue:i.fieldValue},function(r){var u=!0;s!==undefined&&(u=s.call(this,r)),u===!0&&r.status!=="ok"&&(f=e.render(o,{html:t.html(r.errors[i.editableField].message)}),n.addClass("edt-error"),n.siblings(".error").length>0?n.siblings(".error").replaceWith(f):n.after(f)),n.hasClass("edt-error")||n.data("editableValue")&&(n.data("editableValue",i.fieldValue),n.text(r.data[i.editableField])),n.removeClass("is-active disabled").prop("disabled",!1)})},a.doTimeOut=function(e,t,n){var r;n||(n=1e3),e.on("keyup change",function(){window.clearTimeout(r),r=window.setTimeout(function(){t()},n)})},a}),define("util/sticky",[],function(){"use strict";var e=!1,t=y$(".sticky-anchor"),n=y$(".l-content.home").length||y$(".l-content.hub").length||y$(".l-content.category").length,r=y$(window),i={};i.anchor=null,i.checkNodes=function(t){var n=y$(window).scrollTop(),r=100;y$(".sticky").each(function(){var t=y$(this),s,o,u,a,f,l,c,h;t.data("setup")!==!0&&i.initSticky(t),o=t.offset().top,u=t.height(),f=o-i.anchor,l=t.css("position")||"static";if(t.data("persistent"))e&&window.console&&console.log("persistent"),n>f?l!=="fixed"&&(t.data("onTheMove",!0),t.data("stickyTop",f),t.data("stickyPosition",l),t.css({position:"fixed",top:i.anchor,width:t.outerWidth()})):t.data("onTheMove")&&n<t.data("stickyTop")&&(t.data("onTheMove",!1),t.css({position:t.data("stickyPosition"),top:"auto",width:t.data("stickyWidth")}));else{s=t.data("container"),c=s.height(),h=s.offset().top,a=h+c-r-u;if(c<i.anchor)return;n>a?t.data("onTheMove")&&(e&&window.console&&(console.log("too far down, going away."),console.dir({scrollTop:n,containerHeight:c,objectHeight:u,containerOffset:h,stickyBottomThreshold:a,"container - object":c-u})),t.data("onTheMove",!1),t.css({position:t.data("stickyPosition"),top:"auto",width:t.data("stickyWidth")})):n>f?l!=="fixed"&&(e&&window.console&&(console.log("set it to fixed"),console.dir({"offset-top":o,"self-anchor":i.anchor,scrollTop:n,y:o-i.anchor})),t.data("onTheMove",!0),t.data("stickyTop",f),t.data("stickyPosition",l),t.css({position:"fixed",top:i.anchor,width:t.outerWidth()})):n<t.data("stickyTop")&&t.data("onTheMove")&&(e&&window.console&&console.log("set it to relative"),t.data("onTheMove",!1),t.css({position:t.data("stickyPosition"),top:"auto",width:t.data("stickyWidth")}))}})},i.initStickies=function(){y$(".sticky").each(function(){var e=y$(this);i.initSticky(e)}),i.checkNodes()},i.initSticky=function(t){var r=t.prev();t.data("setup",!0),t.data("persistent",n),t.data("onTheMove",!0),t.data("stickyPosition","static"),t.data("stickyWidth","auto"),t.data("expired",!1),t.data("container",t.closest(".chained-section")),t.data("prevSiblingBottom",i.anchor),r.length>0&&(t.data("stickyTop")<0||t.offset().top<r.height())&&t.data("stickyTop",r.offset().top+r.height()-i.anchor),e&&window.console&&(r.length>0&&(console.log(r.offset().top+r.height()-i.anchor),console.log("reset stick top")),console.dir(t),console.log(t.data("stickyTop")),console.log(t.offset().top),console.dir(t.prev()),console.dir(t.prev().offset().top+t.prev().height()),t.css("background-color","red"))},i.initialize=function(){t.length>0&&(i.anchor=t.outerHeight()+t.position().top+10,i.initStickies(),r.on("resize",i.initStickies),y$(document).on("scroll",y_.throttle(i.checkNodes,250)))},i.initialize()}),define("text!t/discover/vignette.smarty",[],function(){return'{**\n * Renders the box for a content object in the discover feed.\n *\n * @param array   $entry            Array of content data to display.\n * @param string  $oldest           Time to pull in items before\n * @param boolean $canEdit          Can the current user edit the displayed item.\n * @param string  $imgAspectClass   Optional class for image aspect ratio.\n * @param string  $agentClasses     User agent classnames.\n * @param string  $vignetteClass    Subtype class of a vignette.\n * @param boolean $isPrivilegedUser Is current user above a basic user e.g. admins, product, and editors.\n *}\n<li class="three l-boxes l-waterfall-box">\n{if $entry.type == \'adapt\'}\n    {include "./adapt.smarty"}\n{else}\n    <div class="vignette{if isset($vignetteClass)} {$vignetteClass}{/if} content-parent" data-title="{ifseta a=$entry i=\'title\' qh=true}" data-content-id="{$entry.id}" data-content-type="{$entry.type}" data-activity-id="{ifseta a=$entry i=\'objectId\' qh=true}" data-content-url="{ifseta a=$entry i=\'detailUrl\' qh=true}" data-content-is-core-object="true">\n        {if ($canEdit)}\n            {if $entry.contentObject.native && $entry.contentObject.hasVideo}\n                {include "./_video_actions_menu.smarty" actionsCtaClass="acn-vgn" entry=$entry}\n            {/if}\n        {/if}\n        <h2 class="vgn-title">\n            <a href="{ifseta a=$entry i=\'detailUrl\' qh=true}" class="fn org">{ifseta a=$entry i=\'title\' qh=true}</a>\n            {if isset($entry.debugOutput)}{$entry.debugOutput}{/if}\n        </h2>\n        {if $entry.imageUrl}\n            {assign var="aspectRatio" value={ifseta a=$entry i=\'imageAspectRatio\'}}\n            {if isset($imgAspectClass)}\n                {assign var="aspectRatio" value=""}\n            {else}\n                {assign var="imgAspectClass" value=""}\n            {/if}\n            <div class="vgn-image{if $entry.videoUrls} vgn-video{/if}">\n                {if $entry.videoUrls}\n                    {if isset($entry.playCount) || isset($entry.socialCount)}\n                    <div class="vgn-collection-size-bg"></div>\n                    <ul class="vgn-collection-size">\n                        {if isset($entry.playCount)}\n                        <li>\n                            <span class="vgn-count-cta">\n                                {n n=$entry.playCount f=\'abbr\' s=true}\n                            </span>\n                            <i class="icon icn-view-s"></i>\n                        </li>\n                        {/if}\n                        {if isset($entry.socialCount)}\n                        <li>\n                            <span class="vgn-count-cta social-energy">\n                                {n n=$entry.socialCount f=\'abbr\' s=true}\n                            </span>\n                            <i class="icon icn-lightning-s"></i>\n                        </li>\n                        {/if}\n                    </ul>\n                    {/if}\n                {/if}\n                {if $entry.videoUrls}\n                    <a href="{$entry.detailUrl}"><i class="icon icn-video-play"></i></a>\n                {/if}\n                {include "../scaledImage.smarty"\n                    href="{ifseta a=$entry i=\'detailUrl\'}"\n                    imageUrl=$entry.imageUrl\n                    aspectRatio=$aspectRatio\n                    class="image img-aspect img-cover {$imgAspectClass}"}\n            </div>\n        {/if}\n\n        {if $entry.contentObject.private}\n            {if $entry.contentObject.native && $entry.contentObject.hasVideo}\n            <div class="vgn-private-band">\n                <i class="icon icn-edit"></i>\n                <span class="vgn-publish-msg">\n                    {h k="unpublished.video.message" hrefAttrs="href = {ifseta a=$entry i=\'detailUrl\' qh=true}"}\n                </span>\n            </div>\n            {/if}\n        {else}\n            {assign var="showToolbar" value="{ifseta a=$entry i=\'showToolbar\'}"}\n            {if $showToolbar}\n                {include "../discover/_vignetteToolbar.smarty"\n                tally=$entry\n                class="vgn-toolbar"\n                showLove=true\n                showKeyButton=$isPrivilegedUser}\n            {/if}\n        {/if}\n        {assign var="showActivity" value="{ifseta a=$entry i=\'showActivity\'}"}\n        {if $showActivity}\n            <div class="activity vgn-preamble">\n                <div class="vgn-activities">\n                    {if isset($entry.iconType)}\n                        <div class="act-icon ntf-icon ntf-small" {if isset($entry.iconBackgroundColor)}style="background-color: {$entry.iconBackgroundColor}"{/if}>\n                            <i class="icon icn-{$entry.iconType}"></i>\n                        </div>\n                    {else}\n                        <a class="avatar avt-small act-avatar" href="{$entry.user.url}">\n                            <img class="avt-image" src="{$entry.user.avatarUrl}">\n                        </a>\n                    {/if}\n                    <div class="act-summary">\n                        {h k=$entry.activityMessageKey\n                            userLinkAttrs="class=\\"act-actor\\" href=\\"{$entry.user.url}\\""\n                            userTitle=$entry.user.title\n                            actvSpanAttrs=\'class="act-verb"\'\n                            collectionLinkAttrs=$entry.collection.link\n                            collectionName=$entry.collection.name\n                            minutes=$entry.minutes}\n                    </div>\n                </div>\n            {if $entry.collection.id == null}\n                {assign var="isEntryRelated" value="{ifseta a=$entry i=\'related\'}"}\n                {if $isEntryRelated}\n                    {foreach $entry.related as $relatedEntry}\n                        <div class="vgn-activities">\n                            <a class="avatar avt-small act-avatar" href="{$relatedEntry.user.url}">\n                                <img class="avt-image" src="{$relatedEntry.user.avatarUrl}">\n                            </a>\n                            <div class="act-summary">\n                                {h k=$relatedEntry.activityMessageKey\n                                    userLinkAttrs="class=\\"act-actor\\" href=\\"{$relatedEntry.user.url}\\""\n                                    userTitle=$relatedEntry.user.title\n                                    actvSpanAttrs=\'class="act-verb"\'\n                                    collectionLinkAttrs=$relatedEntry.collection.link\n                                    collectionName=$relatedEntry.collection.name\n                                    minutes=$relatedEntry.minutes}\n                            </div>\n                        </div>\n                    {/foreach}\n                {/if}\n            {/if}\n            </div>\n        {/if}\n    </div>\n{/if}\n</li>\n'}),define("text!t/discover/_vignetteToolbar.smarty",[],function(){return'{**\n * Toolbar overlay for Tile layouts specifically.\n *\n * @param array   $tally              A hash of tally counts.\n * @param array   $user               A hash of user profile information.\n * @param boolean $hideCollect        Hide collect button.\n * @param boolean $showEmbed          Show embed button.\n * @param boolean $showShare          Show share button.\n * @param boolean $showSocialShare    Show social share buttons.\n * @param boolean $showSubscribe      Show the subscribe button.\n * @param boolean $showLove           Show the love button.\n * @param array   $object             Properties of a core object; used with admin options.\n * @param string  $class              Additional CSS class(es) for this toolbar.\n * @param string  $socialClass        Additional CSS class(es) for the social part of the toolbar.\n * @param string  $extraHtml          Extra html which can be part of toolbar.\n * @param boolean $private            Whether the content is private.\n * @param boolean $hideSubscribeCount Show/Hide subscribe count next to the heart icon.\n * @param boolean $largeIcons         Use large/regular sized share or subscribe icons.\n * @param boolean $forNativeVideo     Whether the current video is a native mode video.\n * @param boolean $showKeyButton      Whether to show the Privileged User Options button.\n *}\n{if !isset($private)}\n    {assign var="private" value=false}\n{/if}\n{if !isset($largeIcons)}\n    {assign var="largeIcons" value=false}\n{/if}\n\n<ul class="toolbar l-hbox {$class}">\n{if !$private}\n{if isset($showSubscribe)}\n    {* Handling for dynamic collection *}\n    {if $showSubscribe}\n    <li class="tlb-item">\n        <button class="tlb-subscribe{if $tally.isSubscribed} is-executed{/if}" data-action="{if $tally.isSubscribed}unsubscribe{else}subscribe{/if}" data-content-id="{$tally.id}" title="{if $tally.isSubscribed}{h k=\'button.unsubscribe.title\'}{else}{h k=\'button.subscribe.title\'}{/if}">\n            <i class="icon {if $largeIcons}icn-love-l{else}icn-love{/if}"></i>\n        </button>\n    </li>\n    {/if}\n{/if}\n{if isset($showLove)}\n    {if $showLove}\n    <li class="tlb-item">\n        <button class="tlb-love{if $tally.isLoved} is-executed{/if}" data-action="{if $tally.isLoved}unlove{else}love{/if}" title="{if $tally.isLoved}{h k=\'button.unlove.title\'}{else}{h k=\'button.love.title\'}{/if}">\n            <i class="icon {if $largeIcons}icn-love-l{else}icn-love{/if}"></i>\n        </button>\n    </li>\n    {/if}\n{/if}\n{/if}\n\n{** Collection button can be shown on private stories. **}\n{if !isset($hideCollect)}\n    <li class="tlb-item tlb-item-last">\n        <button class="tlb-collect action-collect{if $tally.isCollected} is-executed{/if}" data-action="collect" title="{h k=\'button.collect.title\'}">\n            <i class="icon icn-add"></i>\n        </button>\n    </li>\n{/if}\n\n{if !$private}\n{if isset($showShare)}\n    <li class="tlb-item tlb-item-share">\n        <button class="tlb-share" title="{h k=\'banner.callToAction.share.alt\'}">\n            <i class="icon {if $largeIcons}icn-popout-l{else}icn-popout{/if}"></i>\n        </button>\n    </li>\n{/if}\n{if isset($showSocialShare)}\n    {if isset($tally.detailUrl)}\n        {assign var="contentUrl" value=$tally.detailUrl}\n    {else if isset($tally.url)}\n        {assign var="contentUrl" value=$tally.url}\n    {else}\n        {assign var="contentUrl" value={u}}\n    {/if}\n\n    {assign var="annotation" value={ifseta a=$tally i=\'annotation\'}}\n    {if $annotation}\n        {assign var="contentTitle" value=$tally.annotation}\n        {assign var="contentUser" value=$user.title}\n    {else if isset($tally.title)}\n        {assign var="contentTitle" value=$tally.title}\n        {assign var="contentUser" value=""}\n    {/if}\n    <div class="{$socialClass} is-hidden">\n        <li class="tlb-item tlb-item-label is-hidden">{h k=\'banner.callToAction.share.alt\'}</li>\n        {foreach $tally.socialShare as $provider}\n            <li class="tlb-item">\n                <button class="tlb-social {$provider.class}" title="{h k=$provider.bannerCtaMessageKey}"\n                    data-provider="{$provider.provider}"\n                    data-content-url="{$contentUrl}"\n                    data-content-title="{$contentTitle}"\n                    data-user="{$contentUser}"\n                    data-bg-url="{$tally.imageUrl}"\n                    data-handle="{$provider.handle}">\n                    <i class="icon {if $largeIcons}icn-{$provider.provider}-l{else}icn-{$provider.provider}{/if}"></i>\n                </button>\n            </li>\n        {/foreach}\n        {if $showEmbed}\n            <li class="tlb-item tlb-item-embed">\n                <button class="tlb-embed widget_embed embed_widget_modal logged_out_enabled" title="{h k=\'widget.embed.title\'}"\n                    data-content-author-url="{$user.url}"\n                    data-content-author-id="{$user.id}"\n                    data-content-author-title="{$user.title}"\n                    data-content-id="{$tally.id}"\n                    data-content-title="{$tally.title}"\n                    data-content-url="{$contentUrl}"\n                    {if isset($forNativeVideo)}\n                        {if $forNativeVideo}\n                            {if $tally.videoUrls}\n                                data-video-url="{$tally.videoUrls[0].url}"\n                            {/if}\n                        {/if}\n                    {/if}>\n                    <i class="icon {if $largeIcons}icn-embed-l{else}icn-embed{/if}"></i>\n                </button>\n            </li>\n        {/if}\n        <li class="tlb-item tlb-item-email">\n            <button class="tlb-email email_page logged_out_enabled" title="{h k=\'button.email.title\'}"\n                data-content-id="{$tally.id}"\n                data-content-type="{$tally.type}"\n                data-content-title="{$tally.title}"\n                data-content-url="{$contentUrl}">\n                <i class="icon {if $largeIcons}icn-email-l{else}icn-email{/if}"></i>\n            </button>\n        </li>\n        <li class="tlb-item tlb-item-close">\n            <button class="tlb-close" title="{h k=\'shared.close\'}">\n                <i class="icon icn-close-s"></i>\n            </button>\n        </li>\n    </div>\n{/if}\n{/if}\n{** End of social share layout html **}\n\n{if isset($showKeyButton)}\n    {if $showKeyButton}\n        <li class="tlb-item">\n            <button class="btn-privileged-user-options" title="{h k="admin.privilegedUserOptions"}"  data-id="{$tally.id}" data-type="core-object">\n                <i class="icon icn-key"></i>\n            </button>\n        </li>\n    {/if}\n{/if}\n{if isset($extraHtml)}{$extraHtml nofilter}{/if}\n</ul>\n'}),define("text!t/discover/_tileToolbar.smarty",[],function(){return'{**\n * Toolbar overlay for Tile layouts specifically.\n *\n * @param array   $tally              A hash of tally counts.\n * @param array   $user               A hash of user profile information.\n * @param boolean $hideCollect        Hide collect button.\n * @param boolean $showEmbed          Show embed button.\n * @param boolean $showShare          Show share button.\n * @param boolean $showSocialShare    Show social share buttons.\n * @param boolean $showSubscribe      Show the subscribe button.\n * @param boolean $showLove           Show the love button.\n * @param array   $object             Properties of a core object; used with admin options.\n * @param string  $class              Additional CSS class(es) for this toolbar.\n * @param string  $socialClass        Additional CSS class(es) for the social part of the toolbar.\n * @param string  $extraHtml          Extra html which can be part of toolbar.\n * @param boolean $private            Whether the content is private.\n * @param boolean $hideSubscribeCount Show/Hide subscribe count next to the heart icon.\n * @param boolean $largeIcons         Use large/regular sized share or subscribe icons.\n * @param boolean $forNativeVideo     Whether the current video is a native mode video.\n * @param boolean $showKeyButton      Whether to show the Privileged User Options button.\n * @param boolean $isPrivilegedUser   Is current user above a basic user e.g. admins, product, and editors.\n *}\n{if !isset($private)}\n    {assign var="private" value=false}\n{/if}\n{if !isset($largeIcons)}\n    {assign var="largeIcons" value=false}\n{/if}\n{assign var="embedVideoUrl" value=false}\n{if isset($forNativeVideo)}\n    {if $forNativeVideo}\n        {foreach $tally.videoUrls as $key}\n            {assign var="embedVideoUrl" value=$key.url}\n        {/foreach}\n    {/if}\n{/if}\n<ul class="toolbar l-hbox {$class}">\n{if !$private}\n{if isset($showSubscribe)}\n    {* Handling for dynamic collection *}\n    {if $showSubscribe}\n    <li class="tlb-item">\n        <button class="tlb-subscribe{if $tally.isSubscribed} is-executed{/if}" data-action="{if $tally.isSubscribed}unsubscribe{else}subscribe{/if}" data-content-id="{$tally.id}" title="{if $tally.isSubscribed}{h k=\'button.unsubscribe.title\'}{else}{h k=\'button.subscribe.title\'}{/if}">\n            <i class="icon {if $largeIcons}icn-love-l{else}icn-love{/if}"></i>\n        </button>\n    </li>\n    {/if}\n{/if}\n{if isset($showLove)}\n    {if $showLove}\n    <li class="tlb-item">\n        <button class="tlb-love{if $tally.isLoved} is-executed{/if}" data-action="{if $tally.isLoved}unlove{else}love{/if}" title="{if $tally.isLoved}{h k=\'button.unlove.title\'}{else}{h k=\'button.love.title\'}{/if}">\n            <i class="icon {if $largeIcons}icn-love-l{else}icn-love{/if}"></i>\n        </button>\n    </li>\n    {/if}\n{/if}\n{/if}\n\n{** Collection button can be shown on private stories. **}\n{if !isset($hideCollect)}\n    <li class="tlb-item tlb-item-last">\n        <button class="tlb-collect action-collect{if $tally.isCollected} is-executed{/if}" data-action="collect" title="{h k=\'button.collect.title\'}">\n            <i class="icon icn-add"></i>\n        </button>\n    </li>\n{/if}\n\n{if $isPrivilegedUser && $private}\n{if $showEmbed}\n    <li class="tlb-item">\n        <button class="tlb-embed widget_embed embed_widget_modal logged_out_enabled" title="{h k=\'widget.embed.title\'}"\n                data-content-author-url="{$user.url}"\n                data-content-author-id="{$user.id}"\n                data-content-author-title="{$user.title}"\n                data-content-id="{$tally.id}"\n                data-content-title="{$tally.title}"\n                data-content-url="{$contentUrl}"\n                {if $embedVideoUrl}\n                    data-video-url="{$embedVideoUrl}"\n                {/if}>\n            <i class="icon {if $largeIcons}icn-embed-l{else}icn-embed{/if}"></i>\n        </button>\n    </li>\n{/if}\n{/if}\n\n{if !$private}\n{if isset($showShare)}\n    <li class="tlb-item tlb-item-share">\n        <button class="tlb-share" title="{h k=\'banner.callToAction.share.alt\'}">\n            <i class="icon {if $largeIcons}icn-popout-l{else}icn-popout{/if}"></i>\n        </button>\n    </li>\n{/if}\n{if isset($showSocialShare)}\n    {if isset($tally.detailUrl)}\n        {assign var="contentUrl" value=$tally.detailUrl}\n    {else if isset($tally.url)}\n        {assign var="contentUrl" value=$tally.url}\n    {else}\n        {assign var="contentUrl" value={u}}\n    {/if}\n\n    {assign var="annotation" value={ifseta a=$tally i=\'annotation\'}}\n    {if $annotation}\n        {assign var="contentTitle" value=$tally.annotation}\n        {assign var="contentUser" value=$user.title}\n    {else if isset($tally.title)}\n        {assign var="contentTitle" value=$tally.title}\n        {assign var="contentUser" value=""}\n    {/if}\n    <div class="{$socialClass} is-hidden">\n        <li class="tlb-item tlb-item-label is-hidden">{h k=\'banner.callToAction.share.alt\'}</li>\n        {foreach $tally.socialShare as $provider}\n            <li class="tlb-item">\n                <button class="tlb-social {$provider.class}" title="{h k=$provider.bannerCtaMessageKey}"\n                    data-provider="{$provider.provider}"\n                    data-content-url="{$contentUrl}"\n                    data-content-title="{$contentTitle}"\n                    data-user="{$contentUser}"\n                    data-bg-url="{$tally.imageUrl}"\n                    data-handle="{$provider.handle}">\n                    <i class="icon {if $largeIcons}icn-{$provider.provider}-l{else}icn-{$provider.provider}{/if}"></i>\n                </button>\n            </li>\n        {/foreach}\n        {if $showEmbed}\n            <li class="tlb-item tlb-item-embed">\n                <button class="tlb-embed widget_embed embed_widget_modal logged_out_enabled" title="{h k=\'widget.embed.title\'}"\n                    data-content-author-url="{$user.url}"\n                    data-content-author-id="{$user.id}"\n                    data-content-author-title="{$user.title}"\n                    data-content-id="{$tally.id}"\n                    data-content-title="{$tally.title}"\n                    data-content-url="{$contentUrl}"\n                    {if $embedVideoUrl}\n                        data-video-url="{$embedVideoUrl}"\n                    {/if}>\n                    <i class="icon {if $largeIcons}icn-embed-l{else}icn-embed{/if}"></i>\n                </button>\n            </li>\n        {/if}\n        <li class="tlb-item tlb-item-email">\n            <button class="tlb-email email_page logged_out_enabled" title="{h k=\'button.email.title\'}"\n                data-content-id="{$tally.id}"\n                data-content-type="{$tally.type}"\n                data-content-title="{$tally.title}"\n                data-content-url="{$contentUrl}">\n                <i class="icon {if $largeIcons}icn-email-l{else}icn-email{/if}"></i>\n            </button>\n        </li>\n        <li class="tlb-item tlb-item-close">\n            <button class="tlb-close" title="{h k=\'shared.close\'}">\n                <i class="icon icn-close-s"></i>\n            </button>\n        </li>\n    </div>\n{/if}\n{/if}\n{** End of social share layout html **}\n\n{if isset($showKeyButton)}\n    {if $showKeyButton}\n        <li class="tlb-item">\n            <button class="btn-privileged-user-options" title="{h k="admin.privilegedUserOptions"}">\n                <i class="icon icn-key"></i>\n            </button>\n        </li>\n    {/if}\n{/if}\n{if isset($extraHtml)}{$extraHtml nofilter}{/if}\n</ul>\n'}),define("text!t/discover/adapt.smarty",[],function(){return'{**\n * Renders the rectangular box for inline content feed Glam Adapt ad in the waterfall.\n *\n * @param array $entry Ad properties.\n *}\n{assign var="entryTitle" value=""}\n{if {ifseta a=$entry i=\'title\'}}\n    {assign var="entryTitle" value=$entry.title}\n{/if}\n{**\n * Renders the rectangular box for inline content feed Glam Adapt ad in the waterfall.\n *\n * @param array $entry Ad properties.\n *}\n<div class="ada-tile" data-title="{$entryTitle}" data-content-id="{$entry.name}" data-content-type="adapt" data-activity-id="{$entry.name}">\n    <div class="ada-unit">\n        {include file="../ad.smarty" slot=$entry class=$entry.name}\n    </div>\n</div>\n'}),define("text!t/newsfeed/_toolbar.smarty",[],function(){return'{**\n * Toolbar overlay for Bands specifically.\n *\n * @param array   $tally              A hash of tally counts.\n * @param array   $user               A hash of user profile information.\n * @param boolean $hideCollect        Hide collect button.\n * @param boolean $showEmbed          Show embed button.\n * @param boolean $showShare          Show share button.\n * @param boolean $showSocialShare    Show social share buttons.\n * @param boolean $showSubscribe      Show the subscribe button.\n * @param boolean $showLove           Show the love button.\n * @param array   $object             Properties of a core object; used with admin options.\n * @param string  $class              Additional CSS class(es) for this toolbar.\n * @param string  $socialClass        Additional CSS class(es) for the social part of the toolbar.\n * @param string  $extraHtml          Extra html which can be part of toolbar.\n * @param boolean $private            Whether the content is private.\n * @param boolean $hideSubscribeCount Show/Hide subscribe count next to the heart icon.\n * @param boolean $largeIcons         Use large/regular sized share or subscrisocialclassde video.\n * @param boolean $showKeyButton      Whether to show the Privileged User Options button.\n * @param boolean $forNativeVideo     Is this toolbar for a native video? Use different embed.\n *}\n{if !isset($private)}\n    {assign var="private" value=false}\n{/if}\n{if !isset($largeIcons)}\n    {assign var="largeIcons" value=false}\n{/if}\n{assign var="embedVideoUrl" value=false}\n{if isset($forNativeVideo)}\n    {if $forNativeVideo}\n        {foreach $tally.videoUrls as $key}\n            {assign var="embedVideoUrl" value=$key.url}\n        {/foreach}\n    {/if}\n{/if}\n<ul class="toolbar l-hbox {$class}">\n{if !$private}\n{if isset($showSubscribe)}\n    {* Handling for dynamic collection *}\n    {if $showSubscribe}\n    <li class="tlb-item">\n        <button class="tlb-subscribe{if $tally.isSubscribed} is-executed{/if}" data-action="{if $tally.isSubscribed}unsubscribe{else}subscribe{/if}" data-content-id="{$tally.id}" title="{if $tally.isSubscribed}{h k=\'button.unsubscribe.title\'}{else}{h k=\'button.subscribe.title\'}{/if}">\n            <i class="icon {if $largeIcons}icn-love-l{else}icn-love{/if}"></i>\n        </button>\n    </li>\n    {/if}\n{/if}\n{if isset($showLove)}\n    {if $showLove}\n    <li class="tlb-item">\n        <button class="tlb-love{if $tally.isLoved} is-executed{/if}" data-action="{if $tally.isLoved}unlove{else}love{/if}" title="{if $tally.isLoved}{h k=\'button.unlove.title\'}{else}{h k=\'button.love.title\'}{/if}">\n            <i class="icon {if $largeIcons}icn-love-l{else}icn-love{/if}"></i>\n        </button>\n    </li>\n    {/if}\n{/if}\n{/if}\n\n{** Collection button can be shown on private stories. **}\n{if !isset($hideCollect)}\n    <li class="tlb-item tlb-item-last">\n        <button class="tlb-collect action-collect{if $tally.isCollected} is-executed{/if}" data-action="collect" title="{h k=\'button.collect.title\'}">\n            <i class="icon icn-add"></i>\n        </button>\n    </li>\n{/if}\n\n{if !$private}\n{if isset($showShare)}\n    <li class="tlb-item tlb-item-share">\n        <button class="tlb-share" title="{h k=\'banner.callToAction.share.alt\'}">\n            <i class="icon {if $largeIcons}icn-popout-l{else}icn-popout{/if}"></i>\n        </button>\n    </li>\n{/if}\n{if isset($showSocialShare)}\n    {if isset($tally.detailUrl)}\n        {assign var="contentUrl" value=$tally.detailUrl}\n    {else if isset($tally.url)}\n        {assign var="contentUrl" value=$tally.url}\n    {else}\n        {assign var="contentUrl" value={u}}\n    {/if}\n\n    {assign var="annotation" value={ifseta a=$tally i=\'annotation\'}}\n    {if $annotation}\n        {assign var="contentTitle" value=$tally.annotation}\n        {assign var="contentUser" value=$user.title}\n    {else if isset($tally.title)}\n        {assign var="contentTitle" value=$tally.title}\n        {assign var="contentUser" value=""}\n    {/if}\n    <div class="{$socialClass} is-hidden">\n        <li class="tlb-item tlb-item-label is-hidden">{h k=\'banner.callToAction.share.alt\'}</li>\n        {foreach $tally.socialShare as $provider}\n            <li class="tlb-item">\n                <button class="tlb-social {$provider.class}" title="{h k=$provider.bannerCtaMessageKey}"\n                    data-provider="{$provider.provider}"\n                    data-content-url="{$contentUrl}"\n                    data-content-title="{$contentTitle}"\n                    data-user="{$contentUser}"\n                    data-bg-url="{$tally.imageUrl}"\n                    data-handle="{$provider.handle}">\n                    <i class="icon {if $largeIcons}icn-{$provider.provider}-l{else}icn-{$provider.provider}{/if}"></i>\n                </button>\n            </li>\n        {/foreach}\n        {if $showEmbed}\n            <li class="tlb-item tlb-item-embed">\n                <button class="tlb-embed widget_embed embed_widget_modal logged_out_enabled" title="{h k=\'widget.embed.title\'}"\n                    data-content-author-url="{$user.url}"\n                    data-content-author-id="{$user.id}"\n                    data-content-author-title="{$user.title}"\n                    data-content-id="{$tally.id}"\n                    data-content-title="{$tally.title}"\n                    data-content-url="{$contentUrl}"\n                    {if $embedVideoUrl}\n                        data-video-url="{$embedVideoUrl}"\n                    {/if}>\n                    <i class="icon {if $largeIcons}icn-embed-l{else}icn-embed{/if}"></i>\n                </button>\n            </li>\n        {/if}\n        <li class="tlb-item tlb-item-email">\n            <button class="tlb-email email_page logged_out_enabled" title="{h k=\'button.email.title\'}"\n                data-content-id="{$tally.id}"\n                data-content-type="{$tally.type}"\n                data-content-title="{$tally.title}"\n                data-content-url="{$contentUrl}">\n                <i class="icon {if $largeIcons}icn-email-l{else}icn-email{/if}"></i>\n            </button>\n        </li>\n        <li class="tlb-item tlb-item-close">\n            <button class="tlb-close" title="{h k=\'shared.close\'}">\n                <i class="icon icn-close-s"></i>\n            </button>\n        </li>\n    </div>\n{/if}\n{/if}\n{** End of social share layout html **}\n\n{if isset($showKeyButton)}\n    {if $showKeyButton}\n        <li class="tlb-item">\n            <button class="btn-privileged-user-options" title="{h k="admin.privilegedUserOptions"}">\n                <i class="icon icn-key"></i>\n            </button>\n        </li>\n    {/if}\n{/if}\n{if isset($extraHtml)}{$extraHtml nofilter}{/if}\n</ul>\n'}),define("text!t/twoColumnNews/newsblockToolbar.smarty",[],function(){return'{**\n * Toolbar for newsblocks.\n *\n * @param array   $content       Data for the content.\n * @param boolean $showSubscribe Show the subscribe button for collections.\n * @param boolean $showLove      Show the love button for objects.\n * @param array   $user          A hash of user profile information.\n *}\n<ul class="nb-toolbar">\n    {if $showSubscribe}\n        <li class="nb-tlb-item">\n            <button class="tlb-subscribe{if $content.isSubscribed} is-executed{/if}" data-action="{if $content.isSubscribed}unsubscribe{else}subscribe{/if}" data-content-id="{$content.id}" title="{if $content.isSubscribed}{h k=\'button.unsubscribe.title\'}{else}{h k=\'button.subscribe.title\'}{/if}">\n                <i class="icon icn-love-l"></i>\n            </button>\n        </li>\n    {/if}\n    {if $showLove}\n    <li class="nb-tlb-item">\n        <button class="tlb-love{if $content.isLoved} is-executed{/if}" data-action="{if $content.isLoved}unlove{else}love{/if}" title="{if $content.isLoved}{h k=\'button.unlove.title\'}{else}{h k=\'button.love.title\'}{/if}">\n            <i class="icon icn-love-l"></i>\n        </button>\n    </li>\n    {/if}\n    {if isset($content.detailUrl)}\n        {assign var="contentUrl" value=$content.detailUrl}\n    {else if isset($content.url)}\n        {assign var="contentUrl" value=$content.url}\n    {else}\n        {assign var="contentUrl" value={u}}\n    {/if}\n    {assign var="annotation" value={ifseta a=$content i=\'annotation\'}}\n    {if $annotation}\n        {assign var="contentTitle" value=$content.annotation}\n        {assign var="contentUser" value=$user.title}\n    {else if isset($content.title)}\n        {assign var="contentTitle" value=$content.title}\n        {assign var="contentUser" value=""}\n    {/if}\n    <li class="nb-tlb-share nb-tlb-item">\n        <a href="#/">{h k=\'banner.callToAction.share.alt\'}</a>\n    </li>\n    <div class="nb-tlb-share-panel is-hidden">\n        {foreach $content.socialShare as $provider}\n            <li class="nb-tlb-item">\n                <button class="nb-tlb-social {$provider.class}" title="{h k=$provider.bannerCtaMessageKey}"\n                    data-provider="{$provider.provider}"\n                    data-content-url="{$contentUrl}"\n                    data-content-title="{$contentTitle}"\n                    data-user="{$contentUser}"\n                    data-bg-url="{$content.imageUrl}"\n                    data-handle="{$provider.handle}">\n                    <i class="icon icn-{$provider.provider}-l"></i>\n                </button>\n            </li>\n        {/foreach}\n        <li class="nb-tlb-item">\n            <button class="email_page logged_out_enabled" title="{h k=\'button.email.title\'}"\n                data-content-id="{$content.id}"\n                data-content-type="{$content.type}"\n                data-content-title="{$content.title}"\n                data-content-url="{$contentUrl}">\n                <i class="icon icn-email-l"></i>\n            </button>\n        </li>\n        <li class="nb-tlb-item">\n            <button class="nb-tlb-close" title="{h k=\'shared.close\'}">\n                <i class="icon icn-close-l"></i>\n            </button>\n        </li>\n    </div>\n</ul>\n'}),define("text!t/twoColumnNews/newsblockFollow.smarty",[],function(){return'{**\n * Follow/Unfollow/Following button for the newsblock toolbar.\n *\n * @param boolean $following   Whether the current viewer is currently\n *                             following the followee.\n * @param string  $followClass Follow button custom class.\n * @param string  $followerId  Id of potential follower.\n * @param string  $followeeId  Id of potential followee.\n * @param string  $gaLabel     Identify area of page where this button is placed for GA.\n *\n * @see views/follow.js\n *}\n<button class="button btn-action btn-follow tlb-follow nb-follow {if $following}is-executed{/if}"\n    {if $following}title="{h k=\'button.unfollow.title\'}"{/if}\n    {if !$following}title="{h k=\'button.follow.title\'}"{/if}\n    data-action="{if $following}unfollow{else}follow{/if}"\n    data-follower-id="{$followerId}"\n    data-followee-id="{$followeeId}"\n    data-ga-label="Band">\n    <div class="nb-follow-container">\n        <i class="icon icn-love"></i>\n        <span class="nb-follow-label">{h k=\'button.follow.title\'}</span>\n        <span class="nb-following-label">{h k=\'button.following.title\'}</span>\n    </div>\n</button>\n'}),define("text!t/collection/cover.smarty",[],function(){return'{**\n * Displays a cover for a collection.\n *\n * @param array   $collection Data for the collection being displayed.\n * @param boolean $canEdit    Is editable by current user or not.\n *}\n<li class="three l-boxes l-waterfall-box">\n{assign var="entryType" value="{ifseta a=$collection i=\'type\'}"}\n{if $entryType == \'adapt\'}\n    {include "../discover/adapt.smarty" entry=$collection}\n{else}\n{assign var="isHub" value="{ifseta a=$collection i=\'hasCollections\'}"}\n    <div class="montage vignette content-parent" data-content-id="{$collection.id}" data-title="{ifseta a=$collection i=\'title\' qh=true}" data-content-type="{$collection.type}" data-content-url="{ifseta a=$collection i=\'url\' qh=true}" data-content-is-hub="{if $collection.hasCollections}true{else}false{/if}">\n        <a href="{ifseta a=$collection i=\'url\' qh=true}">\n            <h2 class="mnt-title">{ifseta a=$collection i=\'title\' qh=true}</h2>\n            {include "./_cover_grid.smarty" collection=$collection}\n        </a>\n        {if ($canEdit)}\n            {include "./_actions_menu.smarty" actionsCtaClass="acn-vgn" collection=$collection isHub={$isHub}}\n        {/if}\n\n        {if $collection.private}\n            <div class="vgn-private-band">\n                <i class="icon icn-edit"></i>\n                <span class="vgn-publish-msg">\n                    {if $isHub}\n                        {h k="unpublished.hub.message" hrefAttrs="href = {ifseta a=$collection i=\'url\' qh=true}"}\n                    {else}\n                        {h k="unpublished.story.message" hrefAttrs="href = {ifseta a=$collection i=\'url\' qh=true}"}\n                    {/if}\n                </span>\n            </div>\n        {else}\n        {* Bijoy: Need to use common toolbar. *}\n        <ul class="toolbar l-hbox vgn-toolbar">\n        {assign var="subscriptionCount" value="{ifseta a=$collection i=\'subscriptionCount\'}"}\n        {assign var="isSubscribable" value="{ifseta a=$collection i=\'isSubscribable\'}"}\n        {assign var="isSubscribed" value="{ifseta a=$collection i=\'isSubscribed\'}"}\n        {assign var="isAuthor" value="{ifseta a=$collection i=\'isAuthor\'}"}\n        {if $isSubscribable}\n            <li class="tlb-item">\n                <button class="tlb-subscribe{if $isSubscribed} is-executed{/if}" data-action="{if $isSubscribed}unsubscribe{else}subscribe{/if}" data-content-id="{$collection.id}" title="{if $isSubscribed}{h k=$collection.msgKeys.unsubscribe}{else}{h k=$collection.msgKeys.subscribe}{/if}" {if $collection.private}disabled="disabled"{/if}>\n                    <i class="icon icn-subscribe"></i>\n                </button>\n            </li>\n        {/if}\n        {assign var="isPrivilegedUser" value="{ifseta a=$collection i=\'isPrivilegedUser\'}"}\n        {if $isPrivilegedUser}\n            <li class="tlb-item">\n                <button class="btn-privileged-user-options" title="{h k="admin.privilegedUserOptions"}" data-id="{$collection.id}" data-type="{if $collection.hasCollections}hub{else}story{/if}">\n                    <i class="icon icn-key"></i>\n                </button>\n            </li>\n        {/if}\n        </ul>\n        {/if}\n    </div>\n{/if}\n</li>\n'}),define("text!t/collection/_actions_menu.smarty",[],function(){return'{**\n * Action menu on various elements. eg. vignette or tiles.\n *\n * @param string $actionsCtaClass Class name to identify which type of an action menu is this.\n * @param array  $collection      Data for the collection being displayed.\n * @param array  $isHub           Boolean to identify whether the current collection is a hub.\n *}\n<ul class="actions-menu {if $actionsCtaClass}{$actionsCtaClass}{/if}">\n    <li>\n        <span class="actions_arrow acn-arrow">\n            <i class="arrow-down"></i>\n        </span>\n        <ul class="acn-dropdown">\n            <li>\n                <button type="button" class="acn-btn btn-remove">{if $isHub}{h k="button.objectOptions.remove.hub"}{else}{h k="button.objectOptions.remove.story"}{/if}</button>\n            </li>\n        </ul>\n    </li>\n</ul>\n'}),define("text!t/discover/_video_actions_menu.smarty",[],function(){return'{**\n * Action menu on various elements. eg. vignette or tiles.\n *\n * @param string $actionsCtaClass Class name to identify which type of an action menu is this.\n *}\n<ul class="actions-menu {if $actionsCtaClass}{$actionsCtaClass}{/if}">\n    <li>\n        <span class="actions_arrow acn-arrow">\n            <i class="arrow-down"></i>\n        </span>\n        <ul class="acn-dropdown">\n            <li>\n                <button type="button" class="acn-btn btn-remove">{h k="button.objectOptions.remove.video"}</button>\n            </li>\n        </ul>\n    </li>\n</ul>\n'}),define("text!t/collection/_cover_grid.smarty",[],function(){return'{**\n * Displays a cover for a collection.\n *\n * @param array $collection Data for the collection being displayed.\n *}\n<ul class="mnt-grid l-grid">\n    {assign var="members" value="{ifseta a=$collection i=\'members\'}"}\n    {if $members}\n        {foreach $collection.members as $member}\n            <li>\n                {assign var="titleExists" value={ifseta a=$member i=\'truncatedTitle\'}}\n                {assign var="imageExists" value={ifseta a=$member i=\'imageUrl\'}}\n\n                {if !$imageExists && $titleExists}\n                    <div class="title">\n                        <div class="l-valign title-text">\n                            <div class="l-val-table">\n                                <div class="l-val-cell"> {$member.truncatedTitle} </div>\n                            </div>\n                        </div>\n                    </div>\n                {/if}\n\n                {if $imageExists}\n                    {include "../scaledImage.smarty"\n                          href=false\n                          imageUrl=$member.imageUrl\n                          aspectRatio=false\n                          class="thumbnail"}\n                {/if}\n\n                {if !$imageExists && !$titleExists}\n                    <div class="empty-slot"></div>\n                {/if}\n            </li>\n        {/foreach}\n    {/if}\n    <li class="mnt-count"> {ifseta a=$collection i=\'size\' qh=true} </li>\n</ul>\n'}),define("text!t/ad.smarty",[],function(){return'{**\n * HTML for ad unit.\n *\n * @param array   $slot               Ad data for slot.\n * @param string  $class              Name of class for surrounding div.\n * @param boolean $testAdPlaceholders True to display a placeholder ad.\n *}\n<div class="{$class} ada-slot" id="{$slot.name}_container">\n\n<ins class="adsbygoogle"\n     style="display:block"\n     data-ad-client="ca-pub-2488454333696529"\n     data-ad-slot="3714716296"\n     data-ad-format="auto"></ins>\n<script>\n(adsbygoogle = window.adsbygoogle || []).push({});\n</script>\n\n</div>\n'}),define("text!t/scaledImage.smarty",[],function(){return'{**\n * Renders scaled image.\n *\n * Renders an image in a way that scales appropriately for the size and dimensions of the image\n * and the container it\'s rendered in.\n *\n * @param string $href        A link that clicking on the image should go to or false.\n * @param string $aspectRatio The aspect ratio of the image being displayed or false to ignore aspect ratio.\n * @param string $imageUrl    The url of the image being rendered.\n * @param string $class       A string of css classes to apply to the image.\n *}\n{if $href}\n    <a href="{$href}"\n{else}\n    <div\n{/if}\n        class="{$class}"\n        style="\n            background-image: url({$imageUrl});\n            {if $aspectRatio}padding-bottom: {aspect a=$aspectRatio}%;{/if}\n            filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(\n                src=\'{$imageUrl}\',\n                sizingMethod=\'scale\'\n            );">\n{if $href}\n    </a>\n{else}\n    </div>\n{/if}\n'}),define("text!t/profile/people-vignette.smarty",[],function(){return'{**\n * People vignette.\n *\n * @param array   $entry            Content data to display.\n * @param boolean $isPrivilegedUser Is current user above a basic user e.g. admins, product, and editors.\n *}\n<li class="three l-boxes l-waterfall-box">\n    <div class="vgn-cover vgn-people vignette content-parent">\n        <h2 class="vgn-title">\n            {if {ifseta a=$entry i=\'provider\'}}\n                <div  class="social">\n                {foreach $entry.provider as $provider}\n                    <span class="{$provider}"></span>\n                {/foreach}\n                </div>\n            {/if}\n            <a href="{$entry.url}">{$entry.title}</a>\n        </h2>\n        <div class="vgn-grid vgn-grid-texture people-grid">\n        {if {ifseta a=$entry i=\'topCollection\'}}\n            <ul class="vgn-core-container">\n            {foreach from=$entry.topCollection.members item=member}\n                {** Discarding more than 3 members from the API payload: YOKO-5895 *}\n                {if $member@iteration lt 4}\n                <li class="vgn-core-object">\n                {assign var="titleExists" value={ifseta a=$member i=\'truncatedTitle\'}}\n                {assign var="imageExists" value={ifseta a=$member i=\'imageUrl\'}}\n\n                {if $imageExists}\n                    <div style="background-image: url(\'{$member.imageUrl}\');" class="image img-aspect img-cover ">\n                    </div>\n                {/if}\n\n                {if !$imageExists && $titleExists}\n                    <div class="title">\n                        <div class="l-valign title-text">\n                            <div class="l-val-table">\n                                <div class="l-val-cell">{$member.truncatedTitle}</div>\n                            </div>\n                        </div>\n                    </div>\n                {/if}\n                </li>\n                {/if}\n            {/foreach}\n            </ul>\n        {/if}\n            <span class="vgn-center-holder">\n                <a href="{$entry.url}" class="avatar avt-large vgn-avatar">\n                    <img src="{$entry.imageUrl}" class="avt-image">\n                </a>\n            </span>\n        </div>\n        <ul class="toolbar vgn-toolbar">\n            {if $entry.followerId != $entry.id}\n                <li class="tlb-item">\n                <button class="vgn-follow-btn tlb-follow {if $entry.following}is-executed{/if}" data-action="{if $entry.following}unfollow{else}follow{/if}" data-follower-id="{$entry.followerId}" data-followee-id="{$entry.id}" title="{if $entry.following}{h k=\'button.unfollow.title\'}{else}{h k=\'button.follow.title\'}{/if}"\n                data-ga-label="{$entry.gaLabel}">\n                    <i class="icon icn-follow"></i>\n                </button>\n                </li>\n            {/if}\n            {if $isPrivilegedUser}\n                <li class="tlb-item">\n                    <button class="btn-privileged-user-options" title="{h k="admin.privilegedUserOptions"}" data-id="{$entry.id}" data-type="user">\n                        <i class="icon icn-key"></i>\n                    </button>\n                </li>\n            {/if}\n        </ul>\n        {if {ifseta a=$entry i=\'viewerFriendsFollowingUser\'}}\n            <div class="activity vgn-preamble">\n                <div class="act-summary">\n                    {h k=$entry.viewerFriendsFollowingUser}\n                </div>\n            </div>\n        {/if}\n    </div>\n</li>\n'}),define("text!t/discover/_tile_body.smarty",[],function(){return'{**\n * Render the body of the tile.\n *\n * @param array   $entry                 Array of content data to display, this also has a canEdit for the object itself like title or description.\n * @param string  $oldest                Time to pull in items before\n * @param boolean $canEdit               Can the current user edit collection items or annotations.\n * @param string  $agentClasses          User agent classnames.\n * @param string  $referenceId           Collection ID for use in setting BG image.\n * @param integer $currentPosition       Current position in totalSize.\n * @param integer $totalSize             Number of stories.\n * @param string  $objectId              Current object Id.\n * @param string  $objectCategory        Current object category.\n * @param string  $objectType            Current object type.\n * @param boolean $isPrivilegedUser      Is current user above a basic user e.g. admins, product, and editors.\n * @param boolean $isAdminUser           Is current user an Admin.\n * @param boolean $showSetCategoryOption Whether to allow the category to be changed.\n * @param array   $categories            List of available object categories.\n * @param string  $categoryMKey          Current object\'s category message key.\n * @param string  $typeMKey              Current object\'s type message key.\n * @param boolean $native                Determines if the content is native.\n * @param boolean $isVideo               Determines if the content contains a video.\n *}\n{assign var="canEditCollection" value=$canEdit}\n{assign var="minAspectRatio" value=0.6}\n{assign var="canEditOriginalObject" value=$entry.canEdit}\n{assign var="videoUrls" value="{ifseta a=$entry i=\'videoUrls\' d=false}"}\n<div class="tyl-body {if $videoUrls}vdp-body{/if}">\n    {if $canEditCollection}\n        <ul class="tyl-act-menu" data-content-id="{$objectId}" data-content-type="{$objectType}">\n            <li class="tyl-act-item tyl_act_arrow tyl-dropdown dropdown">\n                <span class="tyl-act-arrow dropdown-toggle">\n                    <i class="arrow-down"></i>\n                </span>\n                <ul class="tyl-act-dropdown dropdown-menu">\n                    {if $totalSize > 1}\n                        <li class="tyl-act-move-opt {if $currentPosition === 1}hide-it{/if}">\n                            <button class="tyl-act-btn tyl-act-up" type="button">{h k=\'message.tile.actions.moveUp\'}</button>\n                        </li>\n                        <li class="tyl-act-move-opt {if $currentPosition === $totalSize}hide-it{/if}">\n                            <button class="tyl-act-btn tyl-act-down" type="button">{h k=\'message.tile.actions.moveDown\'}</button>\n                        </li>\n                        <li class="tyl-act-move-opt {if $currentPosition === 1}hide-it{/if}">\n                            <button class="tyl-act-btn tyl-act-top" type="button">{h k=\'message.tile.actions.moveFirst\'}</button>\n                        </li>\n                        <li class="tyl-act-move-opt {if $currentPosition === $totalSize}hide-it{/if}">\n                            <button class="tyl-act-btn tyl-act-bottom" type="button">{h k=\'message.tile.actions.moveLast\'}</button>\n                        </li>\n                        <li class="divider"></li>\n                    {/if}\n                    {if $canEditOriginalObject}\n                        <li>\n                            <form class="simple-image-upload" method="post" enctype="multipart/form-data">\n                                <span class="button tyl-act-btn smp-img-input-cta tyl_act_upload_img">{h k=\'collection.photo.choose\'}</span>\n                                <input class="smp-img-input" type="file" name="file">\n                                {if $native}\n                                    <input class="asset-id" type="hidden" name="assetId" value="">\n                                {/if}\n                            </form>\n                        </li>\n                    {/if}\n                    {if $entry.originalImageAttrs.width >= 500 && $entry.originalImageAttrs.height >= 500}\n                        {assign var=\'setAsBgEnabled\' value=true}\n                    {else}\n                        {assign var=\'setAsBgEnabled\' value=false}\n                    {/if}\n                    <li class="tyl-act-set-bg-photo{if !$setAsBgEnabled} hide-it{/if}">\n                        <button class="tyl-act-btn tyl_act_set_cover" data-image-url="{$entry.originalImageUrl}" data-reference-id="{$referenceId}" type="button">{h k=\'message.tile.actions.setCover\'}</button>\n                    </li>\n                    <li class="tyl-act-set-bg-photo-disabled disabled{if $setAsBgEnabled} hide-it{/if}">\n                        <button disabled class="disabled">\n                            {h k=\'message.tile.actions.setCover\'}\n                            <span class="tyl-act-cover-error">{h k=\'message.tile.actions.setCover.error\'}</span>\n                        </button>\n                    </li>\n                    <li>\n                        <button class="tyl-act-btn btn-remove" type="button">{h k=\'message.tile.actions.delete\'}</button>\n                    </li>\n                </ul>\n            </li>\n            {if $isPrivilegedUser}\n                <li class="tyl-act-item dropdown btn-privileged-user-options" data-id="{$entry.id}" data-adapt-page-data="{$entry.adaptPageData}" data-type="core-object">\n                    <span class="dropdown-toggle" title="{h k="admin.privilegedUserOptions"}">\n                        <i class="icon icn-key"></i>\n                    </span>\n                </li>\n            {/if}\n        </ul>\n    {/if}\n    {assign var="annotation" value="{ifseta a=$entry i=\'annotation\'}"}\n    {assign var="longAnnotation" value="{ifseta a=$entry i=\'longAnnotation\'}"}\n\n\n    {if $entry.imageUrl && $entry.imageAspectRatio && $entry.imageSize.width}\n        {capture assign="image"}\n            <img src="{$entry.imageUrl}" />\n        {/capture}\n        {*\n            Changing the paddingBottom value to utilize current imageSize height/width rather than original.\n            This should better support new cover images and/or images from youtube. YOKO-5958 & YOKO-16986 - Dustin\n        *}\n        {capture assign="image"}\n            {* Use a div instead of a simple image so that the page won\'t shift around as the images\n               load. This is important for reverse infinite scroll. If we don\'t do this, then after\n               a reverse infinite scroll, when we attempt to scroll back to where the user was\n               before inserting items at the top, our calculation (done before any images load)\n               is incorrect after the images load (YOKO-5299).\n\n               There is an odd jsmart division rounding problem that causes paddingBottom to be set incorrectly\n               when the value is calculated here.  I moved that paddingBottom calculation back to the php side\n               and added it to the entry as an attributed.  I also used the aspect ratio because the imageAttrs\n               height seems to be calculated incorrectly. - DG (YOKO-34854).\n               {100.0/2.9} jSmart prints 50.\n               jona:\n                    case \'/\':  return parseInt(arg1, 10)/parseInt(arg2, 10);\n                    it converts to integers before dividing - that\'s baffling\n            *}\n            <div class="tyl-image-placeholder" data-url="{$entry.imageUrl}" style="padding-bottom: {$entry.paddingBottom}%; width: {$entry.imageSize.width}px"></div>\n        {/capture}\n        {*\n            To show the expand button and top crop a very tall image.\n        *}\n        {if $entry.imageAspectRatio < $minAspectRatio}\n            {assign var="narrowImage" value=true}\n        {else}\n            {assign var="narrowImage" value=false}\n        {/if}\n    {else}\n        {assign var="image" value=""}\n    {/if}\n\n    {if $canEditOriginalObject && $image === \'\'}\n        <div class="tyl-add-img">\n            <div class="tyl-add-img-body">\n                <form class="simple-image-upload" method="post" enctype="multipart/form-data">\n                    <input class="smp-img-input" type="file" name="file">\n                    {if $native}\n                        <input class="asset-id" type="hidden" name="assetId" value="">\n                    {/if}\n                    <span class="button smp-img-input-cta inp-img-browse photo">\n                        <i class="icon icn-camera"></i>\n                        {h k=\'collection.photo.choose\'}\n                    </span>\n                    <div class="tyl-add-img-reqs">{h k="collection.photo.choose.hint"}</div>\n                </form>\n            </div>\n        </div>\n    {/if}\n\n    <div class="tyl-annotation{if $videoUrls} large{elseif $entry.imageSize.label} {$entry.imageSize.label}{else} large{/if}{if $longAnnotation} tyl-annotation-long{/if}">\n        {if $annotation || $canEditCollection}\n        {if $canEditCollection}\n        <h2 class="editable edt-text edt-notabs char-show"\n            data-editable-id="{ifseta a=$entry i=\'collectionMemberId\' qh=true}"\n            data-editable-field="tyl-annotation-field"\n            data-content-id="{$entry.objectId}"\n            data-max-length="400"\n            data-placeholder="tile.placeholder.annotation"\n            >{$entry.annotation}</h2>\n            {include file="../characterCount.smarty"}\n        {else}\n        <h2>{$entry.annotation}</h2>\n        {/if}\n        {/if}\n    </div>\n\n    <div class="tyl-annotation-bg image-cta{if $videoUrls} tyl-video-bg{/if}{if $image === \'\'} tyl-no-bg{/if}">\n        {if $videoUrls}\n            <div class="tyl-image vdp-container img-size-width-E">\n                {if isset($entry.playCount) || isset($entry.socialCount)}\n                <div class="tyl-collection-size-bg vdp-hide-on-play"></div>\n                <ul class="tyl-collection-size vdp-hide-on-play">\n                    {if isset($entry.playCount)}\n                    <li>\n                        <span class="tyl-count-cta">\n                            {n n=$entry.playCount f=\'abbr\' s=true}\n                        </span>\n                        <i class="icon icn-view-s"></i>\n                    </li>\n                    {/if}\n                    {if isset($entry.socialCount)}\n                    <li>\n                        <span class="tyl-count-cta social-energy">\n                            {n n=$entry.socialCount f=\'abbr\' s=true}\n                        </span>\n                        <i class="icon icn-lightning-s"></i>\n                    </li>\n                    {/if}\n                </ul>\n                {/if}\n                {include file="../nativeVideo/_videoPlayer.smarty" entry=$entry}\n                <div class="tyl-content vdp-play vdp-hide-on-play">\n                    {** link is intentionally inside the vdp-hide-on-play div to help with YOKO-35871 - DG. *}\n                    {if !$canEditOriginalObject}\n                        {if $native}\n                            <a class="external-link" href="{$entry.canonicalUrl}">\n                        {else}\n                            <a class="external-link" href="{$entry.externalUrl}" rel="nofollow" target="_blank">\n                        {/if}\n                    {/if}\n                    <div class="tyl-title-container">\n                        {if $canEditOriginalObject}\n                        <h3 class="tyl-title editable edt-text char-show vdp-do-not-play"\n                            data-editable-id="{$entry.id}"\n                            data-editable-field="tyl-title-field"\n                            data-content-id="{$entry.id}"\n                            data-max-length="80" data-editable-value="{$entry.title}"\n                            >{$entry.title} {if $entry.debugOutput}{$entry.debugOutput}{/if}</h3>\n                            {include file="../characterCount.smarty"}\n                        {else}\n                        <h3 class="tyl-title vdp-do-not-play">{$entry.title} {if $entry.debugOutput}{$entry.debugOutput}{/if}</h3>\n                        {/if}\n                    </div>\n                    {assign var="entrySource" value="{ifseta a=$entry i=\'source\'}"}\n                    {if $entrySource}\n                        {assign var="domainWithoutWww" value=$entrySource|regex_replace:"/^www\\./":""}\n                        {if !$native}\n                        <div class="tyl-source tyl-button">\n                            <a href="{$entry.externalUrl}" rel="nofollow" target="_blank" class="vdp-do-not-play">\n                                {h k=\'shared.viewOnSite\' site=$domainWithoutWww}\n                                <i class="icon icn-linkout"></i>\n                            </a>\n                        </div>\n                        {/if}\n                    {/if}\n                    {if !$canEditOriginalObject}</a>{/if}\n                </div>\n            </div>\n        {elseif $entry.imageUrl}\n            <div class="tyl-image{if $entry.imageSize} img-size-{$entry.imageSize.label}{/if} {if $narrowImage}tyl-with-expand{/if}">\n                <a href="{$entry.externalUrl}" rel="nofollow" target="_blank" class="tyl-img-src {if $entry.imageSize}{$entry.imageSize.label}{/if}">\n                    {$image nofilter}\n                </a>\n                {if !$canEditOriginalObject}<a class="external-link" rel="nofollow" href="{$entry.externalUrl}" target="_blank">{/if}\n                <div class="tyl-content vdp-hide-on-play">\n                    <div class="tyl-title-container">\n                        {if $canEditOriginalObject}\n                        <h3 class="tyl-title editable edt-text char-show"\n                            data-editable-id="{$entry.id}"\n                            data-editable-field="tyl-title-field"\n                            data-content-id="{$entry.id}"\n                            data-max-length="80" data-editable-value="{$entry.title}"\n                            >{$entry.title} {if $entry.debugOutput}{$entry.debugOutput}{/if}</h3>\n                            {include file="../characterCount.smarty"}\n                        {else}\n                        <h3 class="tyl-title">{$entry.title} {if $entry.debugOutput}{$entry.debugOutput}{/if}</h3>\n                        {/if}\n                    </div>\n                    {assign var="entrySource" value="{ifseta a=$entry i=\'source\'}"}\n                    {if $entrySource}\n                        {assign var="domainWithoutWww" value=$entrySource|regex_replace:"/^www\\./":""}\n                        <div class="tyl-source tyl-button">\n                            {if $canEditOriginalObject}<a href="{$entry.externalUrl}" rel="nofollow" target="_blank">{/if}\n                            {h k=\'shared.viewOnSite\' site=$domainWithoutWww}\n                            <i class="icon icn-linkout"></i>\n                            {if $canEditOriginalObject}</a>{/if}\n                        </div>\n                    {/if}\n                </div>\n                {if !$canEditOriginalObject}</a>{/if}\n                {if $narrowImage}\n                <div class="tyl-expand-btn">\n                    <i class="icon icn-expand"></i>\n                </div>\n                <div class="tyl-collapse-btn">\n                    <i class="icon icn-collapse"></i>\n                </div>\n                {/if}\n            </div>\n        {else}\n            <div class="tyl-image tyl-no-image">\n                <a class="tyl-img-src hidden" href="{$entry.externalUrl}" rel="nofollow" target="_blank"></a>\n                {if !$canEditOriginalObject}<a class="external-link" rel="nofollow" href="{$entry.externalUrl}" target="_blank">{/if}\n                <div class="tyl-content vdp-hide-on-play">\n                    <div class="tyl-title-container">\n                        {if $canEditOriginalObject}\n                        <h3 class="tyl-title editable edt-text char-show"\n                            data-editable-id="{$entry.id}"\n                            data-editable-field="tyl-title-field"\n                            data-content-id="{$entry.id}"\n                            data-max-length="80" data-editable-value="{$entry.title}"\n                                >{$entry.title} {if $entry.debugOutput}{$entry.debugOutput}{/if}</h3>\n                            {include file="../characterCount.smarty"}\n                        {else}\n                        <h3 class="tyl-title">{$entry.title} {if $entry.debugOutput}{$entry.debugOutput}{/if}</h3>\n                        {/if}\n                    </div>\n                    {assign var="entrySource" value="{ifseta a=$entry i=\'source\'}"}\n                    {if $entrySource}\n                        {assign var="domainWithoutWww" value=$entrySource|regex_replace:"/^www\\./":""}\n                        <div class="tyl-source tyl-button">\n                            {if $canEditOriginalObject}<a rel="nofollow" href="{$entry.externalUrl}" target="_blank">{/if}\n                            {h k=\'shared.viewOnSite\' site=$domainWithoutWww}\n                            <i class="icon icn-linkout"></i>\n                            {if $canEditOriginalObject}</a>{/if}\n                        </div>\n                    {/if}\n                </div>\n                {if !$canEditOriginalObject}</a>{/if}\n            </div>\n        {/if}\n    </div>\n</div>\n'}),define("text!t/nativeVideo/_videoPlayer.smarty",[],function(){return'{**\n * Markup for the video player.\n *\n * @param array $entry Data for the video.\n *}\n<a href="#"\n   class="vdp-video vdp-play{if $entry.imageSize} img-size-{$entry.imageSize.label}{/if}"\n   data-video-urls="{json qh=true a=$entry.videoUrls}"\n   data-native-video=\'{$entry.contentObject.native}\'\n   style="{if $entry.contentObject.imageUrl}background-image: url(\'{image u=$entry.contentObject.imageUrl t=[\'width\' => 726, \'height\' => 408, \'crop\' => \'zc:1\']}\');{/if}">\n    {include file="../loading.smarty" loadingColor="ldg-on-dark" loadingClass="vdp-loading"}\n    <i class="vdp-play">\n        <span class="triangle"></span>\n    </i>\n    <div class="vdp-16x9-padding"></div>\n</a>\n<div class="vdp-16x9-padding video-player"></div>\n'}),define("text!t/loading.smarty",[],function(){return'{**\n * Loading indicator.\n *\n * @param string $loadingColor Class required for the color of loading indicator.\n * @param string $loadingClass Additional class required for the loading indicator.\n *}\n<span class="loading loading-indicator{if $loadingColor} {$loadingColor}{else} ldg-on-light{/if}{if $loadingClass} {$loadingClass}{/if}"></span>\n'}),define("text!t/characterCount.smarty",[],function(){return'{**\n *  Generic structure for showing the character count for an input field/editable div.\n *}\n<div class="char-limit">\n    <span class="count-val"></span>\n    <span>{h k=\'message.character.count\'}</span>\n</div>\n'}),define("text!t/newsfeed/_band_seamless.smarty",[],function(){return'{**\n * Activity block shown in a continous rectangle, known as seamless, can be a story or hub.\n *\n * @param string  $bgImage         The url for the bgImage.\n * @param array   $entry           The current band entry.\n * @param boolean $isHub           If it has collections, then it is a hub.\n * @param string  $gemPatternClass Pattern class returned from CollectionService\n * @param integer $bandImageWidth  Width for either seamless or split band from defs service\n * @param integer $bandImageHeight Height for either seamless or split band from defs service\n * @param string  $followerId      Id of potential follower.\n * @param string  $followeeId      Id of potential followee.\n * @param boolean $isCollection    Whether the content is a collection.\n * @param boolean $private         Whether the content is private.\n *}\n<div class="bnd-cover{if $gemPatternClass} {$gemPatternClass}{/if} l-hbox l-hbx-middle"\n    {if $bgImage}\n     style="background-image: url(\'{image u=$bgImage t=[\'width\' => 810, \'height\' => 250, \'crop\' => \'zc:1\']}\');"\n    {/if}>\n    <a href="{$entry.content.url}" class="bnd-gradients"></a>\n\n    <div class="bnd-center-content">\n        <a href="{$entry.content.url}" class="bnd-cc-link"></a>\n        <div class="bnd-cvr-featured-author">\n            <a class="avatar avt-small bnd-avatar" href="{$entry.content.owner.url}">\n                <img class="avt-image" src="{$entry.content.owner.imageUrl}" />\n            </a>\n            <div class="author-title"><a href="{$entry.content.owner.url}">{$entry.content.owner.title}</a></div>\n\n            {if $followeeId}\n                {include file=\'../util/follow.smarty\'\n                    followClass=\'tlb-follow \'\n                    following=\'\'\n                    followeeId={$followeeId}\n                    followerId={$followerId}\n                    gaLabel=\'Band\'}\n            {/if}\n        </div>\n        {* Edge case: Don\'t allow any whitespace before {$entry.content.title}; otherwise the title\n           will drop to the next line if it is a single long word (YOKO-5989). *}\n        <div class="bnd-cvr-title">\n            <a href="{$entry.content.url}">\n                <span>{$entry.content.title}</span>\n            </a>\n        </div>\n        {if !$private}\n        <div class="bnd-cvr-actions">\n            {include "../newsfeed/_toolbar.smarty"\n                tally=$entry.content\n                user=$entry.actor\n                class="tlb-band"\n                socialClass="tlb-social-share"\n                hideCollect=true\n                showEmbed=true\n                showSubscribe=$isCollection\n                showLove=!$isCollection\n                hideSubscribeCount=true\n                showShare=true\n                showSocialShare=true\n                private=$private\n                largeIcons=true\n                forNativeVideo=false}\n        </div>\n        {/if}\n    </div>\n    {* Social to be shown in case of only non-hub bands. *}\n    {if !$isHub}\n    <ul class="bnd-cvr-collection-size">\n        {if isset($entry.content.viewCount)}\n            {include "../newsfeed/_band_collection_count.smarty"\n                selectorClass=""\n                count=$entry.content.viewCount\n                icon="icn-view-s"}\n        {/if}\n        {if isset($entry.content.socialCount)}\n            {include "../newsfeed/_band_collection_count.smarty"\n                selectorClass="social-energy"\n                count=$entry.content.socialCount\n                icon="icn-lightning-s"}\n        {/if}\n    </ul>\n    {/if}\n</div>\n'}),define("text!t/newsfeed/_band_half_and_half.smarty",[],function(){return'{**\n * The activity line shown above the band on the home page.\n *\n * @param string  $bgImage         The url for the bgImage.\n * @param array   $entry           The current band entry.\n * @param string  $gemPatternClass Pattern class returned from CollectionService\n * @param integer $bandImageWidth  Width for either seamless or split band from defs service\n * @param integer $bandImageHeight Height for either seamless or split band from defs service\n * @param string  $followerId      Id of potential follower.\n * @param string  $followeeId      Id of potential followee.\n * @param boolean $isCollection    Whether the content is a collection.\n * @param boolean $private         Whether the content is private.\n *}\n<div class="bnd-cover{if $gemPatternClass} {$gemPatternClass}{/if} vdp-body l-hbox l-hbx-middle">\n    <div class="bnd-half-right">\n        <a href="{$entry.content.url}" class="bnd-cc-link"></a>\n        <div class="bnd-cvr-featured-author">\n            <a class="avatar avt-small bnd-avatar" href="{$entry.content.owner.url}">\n                <img class="avt-image" src="{$entry.content.owner.imageUrl}" />\n            </a>\n            <div class="author-title"><a href="{$entry.content.owner.url}">{$entry.content.owner.title}</a></div>\n            {if $followeeId}\n                {include file=\'../util/follow.smarty\'\n                followClass=\'tlb-follow \'\n                following=\'\'\n                followeeId={$followeeId}\n                followerId={$followerId}\n                gaLabel=\'Band\'}\n            {/if}\n        </div>\n        {* Edge case: Don\'t allow any whitespace before {$entry.content.title}; otherwise the title\n           will drop to the next line if it is a single long word (YOKO-5989). *}\n        <div class="bnd-cvr-title">\n            <a href="{$entry.content.url}">\n                <span>{$entry.content.title}</span>\n            </a>\n        </div>\n        {if !$private}\n        <div class="bnd-cvr-actions">\n            {include "../newsfeed/_toolbar.smarty"\n                tally=$entry.content\n                user=$entry.actor\n                class="tlb-band"\n                socialClass="tlb-social-share"\n                hideCollect=true\n                showEmbed=true\n                showSubscribe=$isCollection\n                showLove=!$isCollection\n                hideSubscribeCount=true\n                showShare=true\n                showSocialShare=true\n                private=$private\n                largeIcons=true\n                forNativeVideo=true}\n        </div>\n\n        <i class="vdp-play">\n            <span class="triangle"></span>\n        </i>\n        {/if}\n    </div>\n    <div class="bnd-half-left">\n\n        {if !$private}\n        <a href="#" class="vdp-video vdp-play" data-video-urls="{json qh=true a=$entry.content.videoUrls}" style="display: inline-block; height: 100%; width: 100%; {if $bgImage}background-image: url(\'{image u=$bgImage t=[\'width\' => 445, \'height\' => 250, \'crop\' => \'zc:1\']}\');{/if}" data-native-video=\'{$entry.content.native}\'>\n            {include file="../loading.smarty" loadingColor="ldg-on-dark" loadingClass="vdp-loading"}\n            <i class="vdp-play">\n                <span class="triangle"></span>\n            </i>\n        </a>\n        <div class="video-player" style="display: inline-block; height: 100%; width: 100%;"></div>\n        {else}\n            <a href="{$entry.content.url}" class="vdp-video" style="display: inline-block; height: 100%; width: 100%; {if $bgImage}background-image: url(\'{image u=$bgImage t=[\'width\' => 445, \'height\' => 250, \'crop\' => \'zc:1\']}\');{/if}"></a>\n        {/if}\n    </div>\n\n    <ul class="bnd-cvr-collection-size vdp-hide-on-play">\n        {if isset($entry.content.viewCount)}\n            {include "../newsfeed/_band_collection_count.smarty"\n                selectorClass=""\n                count=$entry.content.viewCount\n                icon="icn-view-s"}\n        {/if}\n        {if isset($entry.content.socialCount)}\n            {include "../newsfeed/_band_collection_count.smarty"\n                selectorClass="social-energy"\n                count=$entry.content.socialCount\n                icon="icn-lightning-s"}\n        {/if}\n    </ul>\n</div>\n'}),define("text!t/newsfeed/_band_collection_count.smarty",[],function(){return'{**\n * Template to show counts for things like views/social energy etc... Used by band templates.\n *\n * @param string $selectorClass Used in conjuction with the JS as a selector for interactions.\n * @param string $count         Count to be shown.\n * @param array  $icon          Icon used to represent the count type.\n *}\n<li class="bnd-collection-count">\n    <span class="bnd-count-cta {$selectorClass}">\n        {n n=$count f=\'abbr\' s=true}\n    </span>\n    <i class="icon {$icon}"></i>\n</li>\n'}),define("text!t/newsfeed/_band_headline.smarty",[],function(){return'{**\n * The activity line shown above the band on the home page.\n *\n * @param array $entry Entry content, could be the hub or user information.\n *}\n{if $pageType == \'home\'}\n    {assign var=\'hubHtml\' value=""}\n    {assign var=\'collectionAddedToHtml\' value=""}\n    {ifseta2 o=\'collectionAddedTo\' a=$entry.activityEvent i=\'collectionAddedTo\'}\n    {if $collectionAddedTo}\n        {capture assign="collectionAddedToHtml"}<a class="hub-title" href="{$collectionAddedTo.url}">{$collectionAddedTo.title}</a>{/capture}\n    {/if}\n    {if ($entry.activityEvent.eventMkey == \'band.curatorFeaturedOwnContentHubDate\') || ($entry.activityEvent.eventMkey == \'band.curatorFeaturedUserContentHubDate\')}\n        <div class="bnd-activity-line-featured {$collectionAddedTo.title|lower}">\n            <div class="r-skew">\n                {h k=$entry.activityEvent.eventMkey hubHtml=$collectionAddedToHtml}\n            </div>\n        </div>\n    {else}\n        {assign var="userLinkAttrs" value="class=\\"author-title\\" href=\\"{$entry.content.owner.url}\\""}\n        {assign var="userTitle" value="{$entry.content.owner.title}"}\n        {capture assign="userHtml"}<a class="author-title" href="{$entry.content.owner.url}">{$entry.content.owner.title}</a>{/capture}\n        {capture assign="dividerHtml"}<span class="bnd-activity-line-divider"> / </span>{/capture}\n        {capture assign="dateHtml"}<span class="activity-age">{d d=$entry.activityEvent.eventDate}</span>\n        <span class="activity-age-mobile">{d d=$entry.activityEvent.eventDate f=\'tooShort\'}</span>{/capture}\n        {capture assign="curatorHtml"}<a class="author-title" href="{$entry.actor.url}">{$entry.actor.title}</a>{/capture}\n        {capture assign="contentTitleHtml"}<a class="content-name" href="{$entry.content.url}">{$entry.content.title}</a>{/capture}\n\n        <div class="bnd-activity-line">\n            <a class="avatar avt-smallest bnd-activity-avatar" href="{$entry.actor.url}">\n                <img class="avt-image" src="{$entry.actor.imageUrl}" />\n            </a>\n            <div class="bnd-activity-line-text">\n                {h k=$entry.activityEvent.eventMkey userLinkAttrs=$userLinkAttrs userTitle=$userTitle userHtml=$userHtml contentTitleHtml=$contentTitleHtml dateHtml=$dateHtml curatorHtml=$curatorHtml hubHtml=$hubHtml dividerHtml=$dividerHtml collectionAddedToHtml=$collectionAddedToHtml}\n            </div>\n        </div>\n    {/if}\n{/if}\n'}),define("text!t/newsfeed/_band_members.smarty",[],function(){return'{**\n * Band items, the members of a collection.\n *\n * @param integer $itemCount      How many members should be shown for this area.\n * @param integer $lastIndex      The n-1 of $itemCount.\n * @param array   $entry          The current band entry.\n * @param array   $members        The members to display.\n * @param array   $videoUrls      List of urls available for video member objects.\n * @param string  $imageUrl       The url for the member image.\n * @param string  $memberText     Annotation or the title of a member, title is used if annotation doesn\'t exist.\n * @param boolean $addFancyQuotes If annotation is used (above) then it needs to have quotes, titles do not.\n * @param integer $bgImageWidth   Width of image.\n * @param integer $bgImageHeight  Height of image.\n *}\n<ul class="bnd-items">\n    {assign var="lastIndex" value=$itemCount-1}\n    {for $i=0 to $lastIndex}\n        {if !isset($members[$i])}\n            {break}\n        {/if}\n        {assign var="member" value=$members[$i]}\n        {assign var="videoUrls" value="{ifseta a=$member i=\'videoUrls\'}"}\n        {assign var="imageUrl" value="{ifseta a=$member i=\'imageUrl\'}"}\n        <li class="bnd-item{if $videoUrls} bnd-video{/if}{if !$imageUrl} bnd-item-title-nobg-{$i%2}{/if}"\n            data-content-id="{$member.id}"\n            data-content-title="{$member.title}">\n            <a href="{$member.url}">\n                <div class="bnd-item-image" style="{if $imageUrl}background-image: url({image u=$imageUrl t=[\'width\' => $bgImageWidth, \'height\' => $bgImageHeight, \'crop\' => \'zc:1\']});{/if}">\n                    {if $member.isRecent}\n                        <div class="new-flag">\n                            <div class="r-skew">\n                                {h k=\'band.newFlag\'}\n                            </div>\n                        </div>\n                    {/if}\n                </div>\n                {if $member.annotation}\n                    {assign var="memberText" value=$member.annotation}\n                    {assign var="addFancyQuotes" value=true}\n                {else}\n                    {assign var="memberText" value=$member.title}\n                    {assign var="addFancyQuotes" value=false}\n                {/if}\n                <div class="bnd-item-title{if $addFancyQuotes} bnd-item-title-quotes{/if}{if $member.isRecent && !$imageUrl} has-new-flag{/if}">{$memberText}</div>\n                {if $videoUrls}\n                    <i class="icon icn-video-play bnd-icn-video-play"></i>\n                {/if}\n            </a>\n        </li>\n    {/for}\n</ul>\n'}),define("text!t/util/follow.smarty",[],function(){return'{**\n * Follow/Unfollow/Following button.\n *\n * @param boolean $following   Whether the current viewer is currently\n *                             following the followee.\n * @param string  $followClass Follow button custom class.\n * @param string  $followerId  Id of potential follower.\n * @param string  $followeeId  Id of potential followee.\n * @param string  $gaLabel     Identify area of page where this button is placed for GA.\n *\n * @see views/follow.js\n *}\n<button class="button btn-action btn-follow{if isset($followClass)} {$followClass}{/if}{if $following} is-executed{/if}"\n    title="{h k=\'button.follow.title\'}"\n    data-action="{if $following}unfollow{else}follow{/if}"\n    data-follower-id="{$followerId}"\n    data-followee-id="{$followeeId}"\n    data-ga-label="{$gaLabel}">\n    <i class="icon icn-follow"></i>\n</button>\n'}),define("text!t/util/blurredImage.smarty",[],function(){return'{**\n * Responsive SVG template for a blurred image.\n *\n * @param string $classes    Pass through any classes to attach to this svg element.\n * @param string $imageUrl   Path of the image.\n * @param array  $imageAttrs Array of the elements which includes image attributes.\n *}\n<svg preserveAspectRatio="xMidYMid slice" height="100%" width="100%"\n    viewBox="0 0 {$imageAttrs.width} {$imageAttrs.height}"\n    class="{if {$classes}}{$classes}{/if}">\n    <defs>\n        <filter id="filtersPicture">\n            <feGaussianBlur stdDeviation="40" />\n        </filter>\n    </defs>\n    <image filter="url(#filtersPicture)" xlink:href="{$imageUrl}" width="{$imageAttrs.width}" height="{$imageAttrs.height}" x="0" y="0" />\n</svg>\n'}),define("text!t/collection/collect.smarty",[],function(){return'{**\n * Collect widget.\n *\n * @param array $collections Collections to display as options in the collect widget\n *}\n<div class="l-dialog l-dlg-center l-dlg-modal collect-dialog is-closed">\n    <h3 class="l-dlg-header clt_for_story">\n        <button class="l-dlg-close icon icn-close-l"></button>\n        <span class="l-dlg-title">{h k=\'collect.widget.header\'}</span>\n    </h3>\n    <h3 class="l-dlg-header clt_for_hub is-hidden">\n        <button class="l-dlg-close icon icn-close-l"></button>\n        <span class="l-dlg-title">{h k=\'collect.widget.header.hub\'}</span>\n    </h3>\n    <div class="l-dlg-body">\n        <dl class="l-form l-frm-dialog">\n            <dt class="clt_for_story"><label for="collection">{h k=\'collect.widget.selectLabel\'}</label></dt>\n            <dt class="clt_for_hub is-hidden"></dt>\n            <dd>\n                <select class="inp-full" name="stories">\n                    {include file="../aggregation/allOptions.smarty" collections=$stories channels=\'\' defaultMsgKey=\'\' newMsgKey={h k=\'collect.newCollection\'}}\n                </select>\n                <select class="inp-full" name="hubs" style="display: none;">\n                    {include file="../aggregation/allOptions.smarty" collections=$hubs channels=$channels defaultMsgKey={h k=\'collect.chooseHub\'} newMsgKey={h k=\'collect.newHub\'}}\n                </select>\n            </dd>\n            <div class="clt-name l-form l-frm-dialog l-frm-dynamic">\n                <dt><label for="name">{h k=\'collect.widget.nameLabel\'}</label></dt>\n                <dd name="clt-new" class="l-form l-frm-dialog">\n                    <input class="inp-full" type="text" name="name" placeholder="{h k=\'collect.widget.nameHint\'}" maxlength="60">\n                </dd>\n            </div>\n            <div class="toggle-buttons is-hidden">\n                <div class="toggle-option">\n                    <span>{h k=\'collection.dialog.hero\'}</span>\n                    <label>\n                     <input type="checkbox" name="isHero" class="inp-checkbox">\n                     <tt data-off="{h k=\'confirm.no\'}" data-on="{h k=\'confirm.yes\'}"></tt>\n                    </label>\n                </div>\n            </div>\n            <dd>\n                <div class="char-show annotation input inp-text inp-text-tall" contenteditable data-placeholder="collect.widget.annotation" data-max-length="400"></div>\n               {include file="../characterCount.smarty"}\n            </dd>\n            <dd class="l-frm-actions">\n                <button class="btn-primary l-frm-submit" disabled>\n                    {h k=\'shared.dialog.add\'}\n                </button>\n            </dd>\n            <div class="clt-hero-cta feature-dlg">\n            </div>\n        </dl>\n    </div>\n</div>\n'}),define("text!t/collection/makeTrusted.smarty",[],function(){return'{**\n * Prompts the user to choose whether to make this user a trusted user.\n *\n * @param string $name        The name of the user.\n * @param string $channelName The name of the channel.\n * @param string $channelId   The ID of the channel.\n * @param array  $channels    Data for the channels.\n *}\n<div class="l-form">\n    <p>{h k=\'collect.makeTrusted\' name={$name} channel={$channelName}}</p>\n    <p><label><input type="radio" name="makeTrusted" value="y" checked> {h k=\'shared.checkbox.yes\'}</label></p>\n    <p><label><input type="radio" name="makeTrusted" value="n"> {h k=\'shared.checkbox.no\'}</label></p>\n    <p><button class="btn-primary clt-trusted">{h k=\'shared.ok\'}</button></p>\n</div>\n'}),define("text!t/aggregation/allOptions.smarty",[],function(){return'{**\n * Dropdown list for selection in the \'add to\' dialog.\n *\n * @param array  $collections   Hubs or stories with which to populate the dropdown list.\n * @param array  $channels      Special hubs to populate the special-hub dropdown list.\n * @param string $newMsgKey     Message key to show New Collection of collections/Collection of objects.\n * @param string $defaultMsgKey Message key to show in first select option.\n *}\n{if isset($channels)}\n    {if $channels}\n        {include file="../aggregation/option.smarty" id="" title=$defaultMsgKey class="placeholder"}\n        <optgroup class="clt-channels">\n        {foreach $channels as $channel}\n            {include file="../aggregation/option.smarty" id=$channel.id title=$channel.title class=""}\n        {/foreach}\n        </optgroup>\n    {else}\n        {include file="../aggregation/option.smarty" id="" title=""}\n    {/if}\n{/if}\n<optgroup class="clt-collections">\n{include file="../aggregation/option.smarty" id="new" title=$newMsgKey class=""}\n{foreach $collections as $collection}\n    {include file="../aggregation/option.smarty" id=$collection.id title=$collection.title class=""}\n{/foreach}\n</optgroup>\n'}),define("text!t/aggregation/option.smarty",[],function(){return'{**\n * Options for "Add to Collection" select box.\n *\n * @param string $id    Id of the collection.\n * @param string $title Title of the collection.\n * @param string $class Class.\n *}\n<option value="{$id}" class="{$class}">{$title}</option>\n'}),define("text!t/aggregation/feature_content.smarty",[],function(){return'{**\n * Hero section in Feature dialog.\n *\n * @param array   $members Members of special/channel collections.\n * @param boolean $isCoc   Whether the collection is a hub (collection of collections).\n *}\n<div class="four l-boxes l-form">\n    <dl class="l-frm-nested">\n        {if $members|count gt 0}\n            <dt class="feature-option">\n               <div class="feature-option-page one">\n                    {h k=\'collection.dialog.page\'}\n                </div>\n                <div class="feature-option-hero">\n                    {h k=\'collection.dialog.hero\'}\n                </div>\n            </dt>\n            {foreach $members as $member}\n                {include file="../aggregation/hero_controls.smarty" member=$member}\n            {/foreach}\n        {else}\n            {h k=\'collection.dialog.noHeroControl\'}\n        {/if}\n    </dl>\n</div>\n'}),define("text!t/aggregation/hero_controls.smarty",[],function(){return'{**\n * Hero Controls in hero section.\n *\n * @param array $member Collection member.\n *}\n<dd class="feature-option">\n    <div class="feature-option-page one">{$member.title}</div>\n    <label class="feature-option-hero">\n        <input {if $member.isHero}checked{/if} type="checkbox" name="heroStates[{$member.id}]" class="inp-checkbox feature-current-state" />\n        <tt data-off="{h k=\'confirm.no\'}" data-on="{h k=\'confirm.yes\'}"></tt>\n    </label>\n    <input class="feature-prev-state" type="hidden" name="prevHeroStates[{$member.id}]" value="{if $member.isHero}on{else}off{/if}">\n</dd>\n'}),define("text!t/collection/success.smarty",[],function(){return'{**\n * Template to display status message after adding object to collection.\n *\n * @param boolean $itemExists     If core object already exists in collection.\n * @param boolean $collectionUrl  URL of the collection.\n * @param boolean $collectionName Name of the collection.\n *}\n<div class="l-dlg-success l-form" data-representative-id="{$representativeId}">\n    <p>\n        {if $itemExists}\n            {h k=\'collect.alreadyCollected\'}\n        {else}\n            {h k=\'collect.collectedSuccessfully\'\n                contentTitle={$contentTitle}\n                collectionName={$collectionName}\n                collectionLinkAttrs="href=\\"{$collectionUrl}\\" target=\\"_blank\\""}\n        {/if}\n    </p>\n</div>\n'}),define("util/loadJs",[],function(){"use strict";var e=function(e,t){var n,r,i,s;for(n in document.scripts)if(document.scripts.hasOwnProperty(n)&&document.scripts[n].src===e)return;r=document.scripts[0],i=document.createElement("script"),t&&(s=function(){var e=t;t&&(t=null,e())},i.onreadystatechange=function(){this.readyState==="complete"&&s()},i.onload=s),i.src=e,r.parentNode.insertBefore(i,r)};return e}),define("views/socialLib",["util/loadJs"],function(e){"use strict";var t={facebookIncluded:!1,twitterIncluded:!1,pinterestIncluded:!1,facebookShareInitialized:!1,includeFacebook:function(t){if(this.facebookIncluded)return;this.facebookIncluded=!0;var n=y$('meta[name="fb:app_id"]').prop("content"),r="en_US";window.fbAsyncInit=function(){FB.init({appId:n,status:!0,version:"v2.0"}),t&&t()},window.yoko.currentLanguage&&(r=window.yoko.currentLanguage.replace("-","_")),y$("body").append('<div id="fb-root"></div>'),e("//connect.facebook.net/"+r+"/all.js")},includeTwitter:function(t){if(this.twitterIncluded)return;this.twitterIncluded=!0,e("//platform.twitter.com/widgets.js",t)},includePinterest:function(t){if(this.pinterestIncluded)return;this.pinterestIncluded=!0,e("//assets.pinterest.com/js/pinit.js",t)},initFacebookShare:function(e,t,n){if(this.facebookShareInitialized)return;this.facebookShareInitialized=!0;var r=function(){y$("body").on(t,e,function(e){e.preventDefault(),FB.ui({method:"share",href:n})})};window.FB?r():this.includeFacebook(r)},parseFacebookElements:function(e){this.facebookIncluded?e===undefined?FB.XFBML.parse():FB.XFBML.parse(e):this.includeFacebook(y$.proxy(function(){this.parseFacebookElements(e)},this))},loadCommentBox:function(e){this.parseFacebookElements(e)}};return t}),define("util/replaceStateOrLocation",[],function(){"use strict";return function(e){window.history&&window.history.replaceState?window.history.replaceState({},"",e):window.location.replace(e)}}),define("util/eventTrack",["util/http","util/replaceStateOrLocation"],function(e,t){"use strict";var n={},r={};return n.logging=window.location.href.indexOf("testTracking")>-1,n.initializeLogging=function(){y$.noop()},n.log=function(e){if(!n.logging)return;window.console&&window.console.log&&window.console.log("Tracking: "+e)},r.category={add:"Add",beenThere:"Been There",bookmark:"Bookmark",collect:"Collect",shareEmbed:"Share Embed",emailShare:"Share Email",follow:"Follow",love:"Love",madeIt:"Made It",originalRecipe:"Original Recipe",subscribe:"Love",addManual:"Add - manual",addBookmarklet:"Add - bookmarklet",navigationHeader:"Navigation Header",collectionBackground:"Collection Detail Page",onboarding:"Onboarding",signUpTime:"Web Sign Up Time",signUpMethodLocation:"Web Sign Up Method & Location",objectView:"Object View",topNavigation:"Top Navigation",storyCreation:"Story Creation",chain:"Chain",trendingModule:"Trending Module",trendingVideoModule:"Trending Video Module",sessionStoreCategory:"Browser Settings",recommendedVideoModule:"Recommended Video Module"},r.socialNetwork={facebook:"Share Facebook",twitter:"Share Twitter",pinterest:"Share Pinterest"},r.socialAction={like:"Like",share:"Share",tweet:"Tweet",unlike:"Unlike"},r.onbdAction={viewed:"Viewed",cancel:"Cancel",loved:"Loved",unlove:"Unloved",followed:"Followed",unfollowed:"Unfollowed",onboarding:"Onboarding"},r.onboarding={action:{start:"Start",channel:"Channel",social:"Social",ptf:"People to Follow",finish:"Finish"},label:{view:"View",cancel:"Cancellation",love:"Love",fbOffered:"Facebook Offered",fbUnselect:"Facebook Unselect",twOffered:"Twitter Offered",twUnselect:"Twitter Unselect",follow:"Follow"}},r.userSettings={action:{region:"Region",language:"Language"}},r.video={action:{complete:"Completed",length:"Video Length",load:"Loaded",pause:"Paused",resume:"Resumed",skip:"Skipped",start:"Started",watched25:"Watched 25%",watched50:"Watched 50%",watched75:"Watched 75%",watched2s:"Watched 2s"}},r.label={"/":"Home","/collections/":"Collection Detail Page","/discover/collections/":"Discovery - Collections - Recent","/discover/collections/recent/":"Discovery - Collections - Recent","/discover/collections/following/":"Discovery - Collections - Following","/discover/everything/following/":"Discovery - Everything - Following","/discover/recipes/":"Discovery - Recipes - Recent","/discover/recipes/following/":"Discovery - Recipes - Following","/discover/recipes/recent/":"Discovery - Recipes - Recent","/discover/restaurants/":"Discovery - Restaurants - Recent","/discover/restaurants/following/":"Discovery - Restaurants - Following","/discover/restaurants/recent/":"Discovery - Restaurants - Recent",recipeAddManual:"Manual",recipeAddBookmarklet:"Bookmarklet",notificationMenu:"Notification menu",starMenu:"Star menu",newMenu:"New menu",gearMenu:"Gear menu",filterMenu:"Recent/Following menu",search:"Search expand",addBackground:"Add Background Image",helloPage:"Hello Page",channelsPage:"Channels Page",peoplePage:"People Page",socialPage:"Social Page",bookmark:"Bookmark",newItem:"New Item",existingItem:"Existing Item"},r.callback=function(e){r.ga("set","hitCallback",e)},r.parsePath=function(e){e=e.replace(/^(?:\/[\w|\-]+)+\/(collections)\/.*$/,"/$1/"),e.substr(-1)!=="/"&&(e+="/");if(this.label[e])return this.label[e]},r.extractResourceId=function(e,t){return t===!0&&(e=e.replace(/\?.+/,"")),e.replace(/^.*\/\/[^\/]+/,"")},r.extractResourceIdWithStoryParam=function(e){var t,n,r,i="",s;e=this.extractResourceId(e),n=e.split("?");if(n.length>1){r=n[1].split("&");for(t in r)r.hasOwnProperty(t)&&(s=r[t].split("="),s[0]!=="story"&&(i.length>1&&(i+="&"),s.length>1?i+=s[0]+"="+s[1]:i+=s[0]));i.length>1?(i="?"+i,e=n[0]+i):e=n[0]}return e},r.allowed=function(e){var t={cannes:[this.category.navigationHeader,this.category.collectionBackground],foodie:[]};return window.yoko&&window.yoko.appContext&&window.yoko.appContext.context&&t[window.yoko.appContext.context].indexOf(e)!==-1?!1:!0},r.getAction=function(){return window.yoko.action||window.location.href},r.track=function(e,t,n,i){var s=window.location.pathname;if(!this.allowed(e))return;t=this.getAction(t),i===undefined&&(i=this.parsePath(s),i||(i=window.location.href)),n===undefined||n===null?n=1:n=Number(n),r.ga("send","event",e,t,i,n)},r.trackUserSettings=function(e,t){this.trackRaw("User Settings Change",e,1,t)},r.trackOnboarding=function(e,t,n,r){this.trackRaw(e,t,n,r)},r.trackBookmarking=function(e,t,n,r){this.trackRaw(e,t,n,r)},r.trackVideo=function(e,t,n,r){r===undefined&&(r=1),this.trackRaw("Video",e,r,t,n)},r.trackRaw=function(e,t,n,i,s){n===undefined||n===null?n=1:n=Number(n);if(s===undefined||s===null)s=0;r.ga("send","event",e,t,i,n,{nonInteraction:s})},r.social=function(e,t,n){n||(n=window.location.href),t=this.getAction(t),r.ga("send","event",e,t,n)},r.trackBroadcast=function(e,t,n){var i;if(!e)return;i=e.split(","),y$.each(i,y$.proxy(function(e,i){var s=this.socialNetwork[i];if(!s)return;r.ga("send","event",s,t,n)},this))},r.trackFromCookie=function(){var e=document.cookie.split("; "),t={},n,r,i,s,o,u,a,f;if(!e)return;for(r in e)e.hasOwnProperty(r)&&(n=e[r].split("="),t[n[0]]=n[1]);u=t._sign_up_tracking;if(!u)return;a=unescape(u).split(",");if(a.length<3)return;i=a[0],s=a[1],o=a[2];if(!i||!s||!o)return;f=this.getAction(),f.indexOf("profile/settings")>-1&&(f="Sign Up"),f==="Video"&&(f="Single Video Page"),this.trackRaw(this.category.signUpMethodLocation,i,1,f),this.trackRaw(this.category.signUpTime,s,1,o),document.cookie="_sign_up_tracking=; expires=Thu, 01 Jan 1970 00:00:00 UTC"},r.trackFromUrl=function(){var n,i,s,o,u,a;n=window.location.search.match(/[\?\&]_ga=([^\&]+)/);if(!n)return;i=unescape(n[1]).split(","),s=i[0],o=i[1],u=this.parsePath(i[2]),s&&o&&u&&r.track(s,o,1,u),a=e.buildUrl(!0,{_ga:null}),t(a)},r.onload=function(){this.trackFromUrl(),this.trackFromCookie(),n.initializeLogging()},r.ga=function(){y$.noop()},window.yoko.eventTrack=r,r.onload(),r}),define("views/profile/socialBroadcasts",["i18n","views/socialLib","util/eventTrack"],function(e,t,n){"use strict";var r={},i,s=".social-broadcasts",o=!1;return i=function(e){var t,n=y$(e.target);if(!window.yoko||y$.isEmptyObject(window.yoko.user)){window.location="/auth/signUp?target="+window.location;return}t=y$(this).attr(n.data("provider")),typeof t=="function"&&t.call(this)},r.init=function(e,n,u,a){var f=this;if(!e)return;r.parentSelector=e,r.shareUrl=n,r.shareAttr=u,r.activitySource=a,y$(e+" "+s).find("a.share").on("click",y$.proxy(i,r)),y$(e+" "+s+' a.share[data-provider="facebook"]').length&&t.includeFacebook(function(){o&&f.facebook()})},r.facebook=function(){var e=this,t=!0,r=e.shareAttr.fbShare.appNamespace,i=e.shareAttr.fbShare.ogAction,s={},u=function(o){if(o.status==="connected"||o.status==="not_authorized"){y$(e.parentSelector).addClass("is-hidden"),FB.ui({method:"share_open_graph",action_type:r+":"+i,action_properties:JSON.stringify(s)},function(t){y$(e.parentSelector).removeClass("is-hidden"),t&&!t.error_code&&n.trackBroadcast("facebook",e.shareUrl,e.activitySource)});return}t&&(t=!1,FB.login(u))};if(!window.FB){o=!0;return}s[e.shareAttr.fbShare.type]=e.shareUrl,FB.getLoginStatus(u)},r.twitter=function(){var e,t=this,r=575,i=400,s=(y$(window).width()-r)/2,o=(y$(window).height()-i)/2,u="https://twitter.com/intent/tweet",a="status=1,width="+r+",height="+i+",top="+o+",left="+s;u+="?text="+encodeURIComponent(t.shareAttr.twShare),e=window.open(u,"twitter",a),e.focus(),n.trackBroadcast("twitter",t.shareUrl,t.activitySource)},r}),define("views/overlay",[],function(){"use strict";return Backbone.View.extend({showOverlay:function(e){var t=e.closest(".l-dlg-overlay");if(!t.length){if(!e.hasClass("l-dlg-modal"))return;e.wrap('<div class="l-dlg-overlay"/>'),t=e.closest(".l-dlg-overlay")}t.show(),this.lockBodyPosition()},hideOverlay:function(e){var t=e.closest(".l-dlg-overlay");if(!t.length)return;t.fadeOut("normal",this.unlockBodyPosition)},lockBodyPosition:function(){var e=y$("body"),t=y$(window),n=e.width();if(e.hasClass("locked"))return;e.find("> *:visible").not(".l-dlg-overlay").each(function(){var e=y$(this),t,r;if(e.css("position")!=="fixed")return;if(e.width()===n&&!e[0].style.width)e.data("oldWidth","auto"),e.width(n);else{t=e.css("left"),r=e.css("right");if(t!=="auto"||r==="auto"||parseInt(t,10)<parseInt(r,10))return;e.data("oldRight",r),e.css({left:e.position().left,right:"auto"})}}),window.yoko.device.touchEnabled&&(n="100%"),e.data("oldOverflow",e.css("overflow")),e.data("oldMaxWidth",e.css("max-width")),e.data("oldPosition",e.css("relative")),e.addClass("locked"),e.css({overflow:"hidden","max-width":n,width:"100%",position:"fixed",top:-1*t.scrollTop()})},unlockBodyPosition:function(){var e=y$("body"),t=y$(window),n=Math.abs(parseInt(e.css("top"),10));e.css({overflow:e.data("oldOverflow")||"auto","max-width":e.data("oldMaxWidth")||"none",position:e.data("oldPosition")||"static",top:"initial"}),t.scrollTop(n),e.find("> *:visible").each(function(){var e=y$(this);if(e.css("position")!=="fixed")return;e.data("oldWidth")==="auto"?e.css("width",""):e.data("oldRight")&&(e.css({left:"auto",right:e.data("oldRight")}),e.data("oldRight",null))}),e.removeClass("locked")},skipOverlayEvents:function(){y$("body").on("click touchstart touchend",".l-dlg-overlay",function(e){e.stopPropagation()})}})}),define("views/dialog",["template","views/overlay","text!t/loading.smarty"],function(e,t,n){"use strict";return t.extend({requireSignIn:!0,initialize:function(e){(!this.requireSignIn||window.yoko&&!y$.isEmptyObject(window.yoko.user))&&this.initDialog(e.dialogSelector),this.buttonSelector=e.buttonSelector,this.bindButtonClick("body")},bindButtonClick:function(e){this.buttonSelector&&y$(e).on("click",this.buttonSelector,y$.proxy(this.handleButtonClick,this))},unbindButtonClick:function(e){this.buttonSelector&&y$(e).off("click",this.buttonSelector)},handleButtonClick:function(e){var t=y$(e.currentTarget);!t.hasClass("logged_out_enabled")&&this.requireSignIn&&(!window.yoko||y$.isEmptyObject(window.yoko.user))?window.yoko.signupView===undefined?window.location=window.yoko.auth.signUp:window.yoko.signupView.showDialog(e):this.showDialog(e)},initDialog:function(e){this.$dialog=y$(e),window.hasOwnProperty("ontouchstart")?(this.$dialog.on("touchend",".l-dlg-close",y$.proxy(this.closeDialog,this)),this.$dialog.on("click",".l-dlg-close",function(e){e.preventDefault(),e.stopPropagation()})):this.$dialog.on("click",".l-dlg-close",y$.proxy(this.closeDialog,this)),y$("body").on("click",y$.proxy(function(t){if(!this.$dialog.is(":visible")||this.$dialog.hasClass("prevent-close"))return;y$(t.target).closest(e).length||this.closeDialog(t)},this)).on("keyup",y$.proxy(function(e){e.keyCode===27&&this.closeDialog(e)},this))},showBusy:function(t){var r,i=y$(e.render(n,{loadingClass:"l-dlg-loading-indicator"}));r=this.$dialog.find(".l-frm-submit"),t===!1?(this.$dialog.find(".l-dlg-disabled, .loading-indicator").remove(),r.removeClass("is-closed")):(this.$dialog.append('<div class="l-dlg-disabled"></div>'),r.addClass("is-closed"),this.$dialog.append(i))},isBusy:function(){return this.$dialog.find(".l-dlg-disabled").length>0}})}),define("views/dropdownDialog",["views/dialog","util/ifseta"],function(e,t){"use strict";return e.extend({init:function(e,t){this.$dialog=t,e.preventDefault(),e.stopPropagation()},doAction:function(e,t){this.initProperties(y$(t).closest(".content-parent"),e),this.resetDialog(),t.closest("li").addClass("is-active"),t.closest(".l-overlay").addClass("is-active"),y$(".l-dlg-modal:visible").addClass("is-closed"),this.$dialog.removeClass("is-closed"),this.showOverlay(this.$dialog),this.centerDialog(this.$dialog)},centerDialog:function(e){var t=y$(window);if(t.width()<parseInt(window.yoko.screen.maxSmall,10)){e.css("top",0);return}e.css("top",""),e.css({position:"fixed",top:Math.max(0,Math.floor(t.height()/2-e.height()/2)),left:y$(window).width()/2})},initProperties:function(e,t){this.contentId=e.data("contentId"),this.contentUrl=e.data("contentUrl"),this.contentType=e.data("contentType")||"",this.contentTitle=e.data("title"),this.contentIsHub=e.data("contentIsHub"),this.action=t+"-"+this.contentType.toLowerCase()},closeDialog:function(e,t){var n=this;if(this.$dialog.hasClass("is-locked-open"))return;if(t&&t!==this.contentId)return;window.clearTimeout(this.successTimeout),this.$dialog.fadeOut("normal",function(){var e=y$(this);e.addClass("is-closed"),e.css("display",""),e.closest(".l-dlg-splash").removeClass("l-dlg-splash"),n.resetDialog()}),this.hideOverlay(this.$dialog),e&&(e.preventDefault(),e.stopPropagation())},resetDialog:function(){y$(".l-overlay, .tlb-item.is-active").removeClass("is-active")}})});var monster={set:function(e,t,n,r,i){var s=new Date,o="",u=typeof t,a="",f="";if(r=r||"/",n&&(s.setTime(s.getTime()+24*n*60*60*1e3),o="; expires="+s.toUTCString()),"object"===u&&"undefined"!==u){if(!("JSON"in window))throw"Bummer, your browser doesn't support JSON parsing.";a=encodeURIComponent(JSON.stringify({v:t}))}else a=encodeURIComponent(t);i&&(f="; secure"),document.cookie=e+"="+a+o+"; path="+r+f},get:function(e){for(var t=e+"=",n=document.cookie.split(";"),r="",i="",s={},o=0;o<n.length;o++){for(var u=n[o];" "==u.charAt(0);)u=u.substring(1,u.length);if(0===u.indexOf(t)){if(r=decodeURIComponent(u.substring(t.length,u.length)),i=r.substring(0,1),"{"==i)try{if(s=JSON.parse(r),"v"in s)return s.v}catch(a){return r}return"undefined"==r?void 0:r}}return null},remove:function(e){this.set(e,"",-1)},increment:function(e,t){var n=this.get(e)||0;this.set(e,parseInt(n,10)+1,t)},decrement:function(e,t){var n=this.get(e)||0;this.set(e,parseInt(n,10)-1,t)}};define("deps/cookie-monster/cookie-monster.min",function(){}),define("util/actionStorage",["deps/cookie-monster/cookie-monster.min"],function(){"use strict";var e={},t={};return e.setAction=function(e,n){t.storageType=n?"cookie":"sessionStorage",window.yoko.yaction=e},e.saveAction=function(){var e=window.yoko.yaction;e&&t.set("yaction",e)},e.clearAction=function(){window.yoko.yaction=null,t.clear("yaction")},e.getAction=function(){return t.get("yaction")},t.set=function(e,n){t.clear(e),t.storageType==="sessionStorage"&&window.sessionStorage&&window.sessionStorage.setItem(e,JSON.stringify(n)),t.storageType==="cookie"&&monster.set(e,JSON.stringify(n),1/24/6)},t.get=function(e){var t;if(window.sessionStorage){t=window.sessionStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(n){}}t=monster.get(e);if(t){try{return JSON.parse(t)}catch(n){}return t}},t.clear=function(e){window.sessionStorage&&window.sessionStorage.removeItem(e),monster.remove(e)},e}),define("views/collect",["template","i18n","editable","text!t/collection/collect.smarty","text!t/collection/makeTrusted.smarty","text!t/characterCount.smarty","text!t/aggregation/allOptions.smarty","text!t/aggregation/option.smarty","text!t/aggregation/feature_content.smarty","text!t/aggregation/hero_controls.smarty","text!t/error/input.smarty","text!t/collection/success.smarty","views/socialLib","views/profile/socialBroadcasts","util/limitCharacters","util/eventTrack","util/ifseta","util/contextMsgKey","views/dropdownDialog","placeholder","util/http","util/actionStorage"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E){"use strict";var S=y.extend({onClose:null,dialogSelector:".collect-dialog",channels:[],$clickedButton:y$(),$hubOptions:"",addObjectToHub:!1,initialize:function(){var t=".action-collect",i,a;if(m(window.yoko,"useDrawer"))return;this.channels=m(window.yoko.user,"channelsForCollect",[]),y$.map(this.channels,function(e){return e.title==="Mode"&&(e.title="Mode (Mobile Only)"),e}),i=y$(".collect-dialog"),i.length===0?(i=y$(e.render(r,{stories:m(window.yoko.user,"stories",[]),hubs:m(window.yoko.user,"hubs",[]),channels:this.channels},{"../aggregation/option.smarty":u,"../aggregation/allOptions.smarty":o,"../characterCount.smarty":s})),y$("body").append(i)):i.is(":visible")&&this.initProperties(i.closest(".content-parent")),y.prototype.initialize.call(this,{dialogSelector:this.dialogSelector,buttonSelector:t}),b.init(".annotation"),this.$dialog&&(this.$dialog.on("change",'select[name="stories"], select[name="hubs"]',y$.proxy(function(e){var t=y$(e.target),n=t.find("optgroup.clt-channels").children("option[value='"+t.val()+"']");n.length>0?y$(".toggle-buttons").removeClass("is-hidden"):y$(".toggle-buttons").addClass("is-hidden"),this.$dialog.find(".clt-name").toggleClass("is-active",t.val()==="new"),this.setSubmitDisabledState()},this)).on("click",".l-frm-submit",y$.proxy(this.addToCollection,this)).on("focus","input",function(){var e=y$(this).closest(".frm-error");e.find(".error").remove(),e.removeClass("frm-error")}).on("keyup change",".inp-full",y$.proxy(this.setSubmitDisabledState,this)),y$("body").on("change",".feature-current-state",y$.proxy(function(e){this.handleHeroUpdate(e)},this))),d.attach(this.dialogSelector),n.init(),a=E.getAction(),window.yoko.user&&a&&a.action==="collect"&&(y$("#onboarding_dialog:visible").length>0?y$("body").on("onboarding-finished",y$.proxy(function(e,t){t==="newsfeed"?E.clearAction():t==="stay"&&(this.doAction(a.action,null,a.contentId),this.trigger("dialog-show"),E.clearAction())},this)):(this.doAction(a.action,null,a.contentId),this.trigger("dialog-show"),E.clearAction()))},setSubmitDisabledState:function(){var e,t,n=this.$dialog.find('.inp-full[name="name"]').val(),r;this.contentType.toLowerCase()==="collection"||this.addObjectToHub?e=this.$dialog.find('[name="hubs"]'):e=this.$dialog.find('[name="stories"]'),t=e.val(),r=t==="new",this.$dialog.find(".l-frm-submit").prop("disabled",!t||r&&y$.trim(n)==="")},addToCollection:function(n){n.preventDefault();if(this.isBusy())return;this.showBusy(!0);var r,i,s=this.$dialog.find('input[name="name"]'),a,f,c,h,p=this.$dialog.find(".annotation").text(),d=this.$dialog.find(".annotation").data("usingPlaceholder"),g,y=this.$dialog.find('input[name="isHero"]').is(":checked"),b=null;this.contentType.toLowerCase()==="collection"||this.addObjectToHub?(r=this.$dialog.find('select[name="hubs"]'),c="hub"):(r=this.$dialog.find('select[name="stories"]'),c="story"),i=r.val()==="new",a=r.find(":selected"),f=a.val()!=="new"?a.text():s.val(),h=i?"":r.val(),m(window.yoko.content,"sourceId")&&window.yoko.content.sourceId!==this.contentId&&(b=window.yoko.content.sourceId),w.post("/api/web/latest/collection/add",{content_id:this.contentId,collection_id:h,collection_name:y$.trim(s.val()),collection_type:c,annotation:d?"":p,source_id:b,is_hero:y?"on":"off"},y$.proxy(function(a){var c;this.showBusy(!1);if(a.status==="error"){if(a.msg==="collect.collectionNameEmpty"||a.msg==="collect.collectionNameExists"){s.closest(".l-form").addClass("frm-error"),c=e.render(l,{html:t.html(a.msg)}),s.siblings(".error").length>0?s.siblings(".error").replaceWith(c):s.after(c);return}if(a.msg==="collect.collectionHasCollections"||a.msg==="collect.collectionHasObjects"){r.closest(".l-form").addClass("frm-error"),c=e.render(l,{html:t.html(a.msg)}),r.siblings(".error").length>0?r.siblings(".error").replaceWith(c):r.after(c);return}a.msg==="collect.alreadyCollected"&&(this.form=this.$dialog.find(".l-dlg-body").html(),this.showSuccess(a.contentId,f,a.url,!a.activityEventFixed,!1));return}r.children().remove(),this.contentType.toLowerCase()==="collection"||this.addObjectToHub?(g=m(a,"collectionsContainingCollections",[]),r.html(e.render(o,{collections:g,channels:this.channels,newMsgKey:t.html("collect.newHub")},{"../aggregation/option.smarty":u}))):(g=m(a,"collectionsContainingObjects",[]),r.html(e.render(o,{collections:g,newMsgKey:t.html("collect.newCollection")},{"../aggregation/option.smarty":u})),i&&v.track(v.category.storyCreation,"",1,v.label.existingItem)),this.form=this.$dialog.find(".l-dlg-body").html(),this.promptTrusted(n,a.channelSlug,a.channelSlug?h:null,a.channelSlug?f:null,a.contentAuthorId,a.contentAuthorName,a.contentAuthorTrustedForChannel,a.channels,y$.proxy(function(){this.showSuccess(a.contentId,f,a.url,!1,a.representativeId,a.msg,a.share)},this)),v.track(v.category.collect,"",1,v.extractResourceId(this.contentUrl)),this.$clickedButton.addClass("is-executed")},this))},promptTrusted:function(t,n,r,s,o,u,a,f,l,c){var h=this;if(!n||a){l();return}h.$dialog.find(".l-dlg-body").html(e.render(i,{name:u,channelName:s,channelId:r,channels:f})),s.length>0&&(c=s.split("(")[1].split(")")[0]),h.$dialog.find(".clt-trusted").click(function(e){e.stopPropagation(),h.$dialog.find('input[name="makeTrusted"][value="y"]').is(":checked")&&w.post("/api/web/latest/admin/trustedUser",{userId:o,listName:"channel:"+n,trustedCountry:c}),l()})},isVerified:function(e){return e.closest(".ada-story-detail-boxes").data("contentType")==="Collection"&&!e.closest(".story-container").find(".ban-top-msg-status.verified").is(":visible")&&!confirm(t.html("admin.story.featureWithoutVerification"))?!1:!0},showSuccess:function(n,r,i,s,o,u,a){if(this.contentId!==n)return;s=s||!1,this.$dialog.find(".l-dlg-body").html(e.render(c,{representativeId:o,contentId:n,collectionName:t.safe(r),collectionUrl:i,itemExists:s,contentTitle:t.safe(this.contentTitle)})),u&&this.$dialog.find(".l-dlg-title").text(t.html(u)),p.init(this.dialogSelector,this.contentUrl,a,v.category.collect),window.location.search.match(/[?&]collect=/)&&window.setTimeout(function(){var e=String(window.location);window.location=e.replace(/[?&]collect=[^&#]+/,"")},500)},resetDialog:function(){var e;this.showBusy(!1),y.prototype.resetDialog.call(this),this.form&&(this.$dialog.find(".l-dlg-body").html(this.form),this.form=null,this.$dialog.find(".l-dlg-title").text(t.html("collect.widget.header")));if(this.contentType===undefined)return;this.contentType.toLowerCase()==="collection"||this.addObjectToHub?(e=this.$dialog.find('select[name="hubs"]'),this.$dialog.find('select[name="hubs"] option:first').text(t.html("collect.chooseHub"))):e=this.$dialog.find('select[name="stories"]'),e.val()==="new"&&e.val(""),this.$dialog.find(".l-frm-dynamic").removeClass("is-active"),this.$dialog.find(".annotation").empty(),this.$dialog.find(".clt-name .inp-full").val(""),this.setSubmitDisabledState()},initProperties:function(e,t){h.includeFacebook(),y.prototype.initProperties.call(this,e,t)},showDialog:function(e,t){this.onClose=t,this.$clickedButton=y$(e.currentTarget),y.prototype.init.call(this,e,this.$dialog),this.doAction("collect",y$(e.currentTarget))},closeDialog:function(e){y.prototype.closeDialog.call(this,e),this.onClose&&this.onClose()},doAction:function(t,n,r){var i,s,o,u,l;if(n===undefined||n===null)n=y$('.content-parent[data-content-id="'+r+'"]').find("button.tlb-collect");this.addObjectToHub=n.data("addObjectToHub"),y.prototype.doAction.call(this,t,n),b.init(".annotation"),y$(".toggle-buttons").addClass("is-hidden"),i=this.$dialog.find('select[name="hubs"]'),this.contentType.toLowerCase()==="collection"||this.addObjectToHub?(this.$dialog.find(".clt_for_hub").show(),this.$dialog.find(".clt_for_story").hide(),this.$dialog.find('select[name="stories"]').hide(),this.$dialog.find(".annotation").hide(),i.find(".clt-collections").length>0&&(this.$hubOptions=i.find(".clt-collections"),i.find(".clt-collections").remove()),this.contentIsHub||i.append(this.$hubOptions),o=this.$clickedButton.data("hero"),u=y$(e.render(a,{members:o},{"../aggregation/hero_controls.smarty":f})),this.$dialog.find(".clt-hero-cta").html(u),i.show()):(s=this.$dialog.find('select[name="stories"]'),this.$dialog.find(".clt-hero-cta").html(""),this.$dialog.find(".clt_for_hub").hide(),this.$dialog.find(".clt_for_story").show(),i.hide(),s.show(),this.$dialog.find(".annotation").show(),s.find(".clt-collections").find("option").length===1&&(l=s.find(".clt-collections").find('option[value="new"]'),l.length>0&&s.val("new").change()))},handleButtonClick:function(e){var t=y$(e.target).closest(".action-collect");this.requireSignIn&&(!window.yoko||y$.isEmptyObject(window.yoko.user))?(window.yoko.signupView===undefined?window.location=window.yoko.auth.signUp:(t.closest(".story-container, .single-video-container").length>0&&(this.initProperties(y$(e.target).closest(".content-parent"),"collect"),E.setAction({action:"collect",contentId:this.contentId,contentType:this.contentType,contentTitle:this.contentTitle,contentIsHub:this.contentIsHub})),window.yoko.signupView.showDialog(e)),this.trigger("dialog-show")):t.hasClass("ban-collect-story")?this.isVerified(t)&&(this.showDialog(e),this.trigger("dialog-show")):(this.showDialog(e),this.trigger("dialog-show"))},handleHeroUpdate:function(e){var t={},n=y$(e.currentTarget),r=n.prop("name"),i=n.closest(".feature-option").find(".feature-prev-state");t[r]=n.prop("checked")?"on":"off",t[i.prop("name")]=i.val(),w.post("/api/web/latest/privilegeduseroptions/hero",t)}});return window.yoko.collect||(window.yoko.collectView=new S),window.yoko.collectView}),define("util/toolTip",[],function(){"use strict";var e={setTitle:function(e,t){y$(e).attr("title",t)}};return e}),define("views/love",["util/eventTrack","util/http","util/toolTip","util/actionStorage","i18n"],function(e,t,n,r,i){"use strict";var s=function(){var e;y$("body").on("click",".tlb-love",y$.proxy(this.update,this)),this.bindButtonClick=function(e){y$(e).on("click",".tlb-love",y$.proxy(this.update,this))},e=r.getAction(),window.yoko.user&&e&&e.action==="love"&&(this.doAction(e.action,e.contentId,e.contentUrl,e.referenceId),r.clearAction())};return s.prototype.psuedoEvent=y$.noop,s.prototype.doAction=function(e,n,r,i,s){var o="/api/web/latest/coreobject/"+encodeURIComponent(n)+"/love",u={reference_id:i};s===undefined&&(s=y$('.content-parent[data-content-id="'+n+'"]').find(".tlb-love")),s.data("processing",!0),t[e==="love"?"post":"delete"](o,u),this.updateDom(r,s)},s.prototype.update=function(e){var t=y$(e.currentTarget),n=t.closest(".content-parent"),i,s,o,u;if(t.data("processing"))return;s=n.data("contentId"),o=n.data("contentUrl"),u=n.data("referenceId"),i=t.data("action");if(!window.yoko||y$.isEmptyObject(window.yoko.user)){window.yoko.signupView===undefined?window.location=window.yoko.auth.signUp:(r.setAction({action:i,contentId:s,contentUrl:o,referenceId:u}),window.yoko.signupView.showDialog(e));return}this.doAction(i,s,o,u,t)},s.prototype.updateDom=function(t,r){var s=r.data("action")==="love",o,u;r.toggleClass("is-executed",s),s?(r.data("action","unlove"),o=i.html("button.unlove.title")):(r.data("action","love"),o=i.html("button.love.title")),u=r.closest(".content-parent").data("canonicalUrl"),n.setTitle(r,o),r.closest(".content-parent").data("pageUrlType")==="tile"&&s&&(t=u),s&&e.track(e.category.love,t,s,e.extractResourceId(t)),r.data("processing",!1),this.psuedoEvent.call()},s.prototype.on=function(e,t){typeof t=="function"&&(this.psuedoEvent=t)},window.yoko.loveView||(window.yoko.loveView=new s),window.yoko.loveView}),define("util/visible",[],function(){"use strict";y$.fn.isVisible=function(){var e=y$(window),t={top:e.scrollTop(),left:e.scrollLeft()},n=this.offset();return t.right=t.left+e.width(),t.bottom=t.top+e.height(),n.right=n.left+this.outerWidth(),n.bottom=n.top+this.outerHeight(),!(t.right<n.left||t.left>n.right||t.bottom<n.top||t.top>n.bottom)}}),define("views/infiniteScroll",["template","text!t/loading.smarty","util/http","util/visible"],function(e,t,n){"use strict";return function(r){var i={},s={};return s.onScroll=null,s.prefetchingEnabled=!1,s.onFetch=null,s.fetchResult=null,s.callbacks={},s.$container=null,s.path=null,s.scrollThreshold=null,s.scrollElement=null,s.params=null,s.$loadingIndicator=null,s.lastId=null,s.lastTime=null,s.initialValues=null,s.reverse=!1,s.initialize=function(e){s.reverse=e.reverse,s.$container=e.container,s.path=e.path,s.prefetchingEnabled=e.prefetchingEnabled,s.scrollThreshold=e.scrollThreshold||700,s.scrollElement=e.scrollElement||null,s.params=e.params||{},s.$boundaryElement=y$('<div class="l-wfl-boundary"/>'),s.reverse?s.$container.before(s.$boundaryElement):s.$container.after(s.$boundaryElement),s.initLoadingIndicator(),s.callbacks.onFetch=e.onFetch||y$.noop,s.callbacks.onStop=e.onStop||y$.noop,s.callbacks.onEmpty=e.onEmpty||y$.noop,s.lastId=e.lastId,s.lastTime=e.lastTime,s.initialValues={lastId:s.lastId,lastTime:s.lastTime,params:y$.extend({},s.params),onFetch:null,fetchResult:null}},i.reconfigureParams=function(e){s.params=y$.extend(!0,{},s.params,e)},i.start=function(){s.stopCheckingForMoreItems(!0),s.addItems(),s.startCheckingForMoreItems()},i.restart=function(){s=y$.extend(s,s.initialValues),i.start()},i.reinit=function(e,t){s.stopCheckingForMoreItems(!0),s.lastId=e,s.lastTime=t,s.startCheckingForMoreItems()},s.startCheckingForMoreItems=function(){var e;s.onScroll=y_.throttle(function(t){var n=(new Date).getTime(),r=!1;if(t&&t.type==="scroll"&&y$("body").hasClass("locked"))return;e||(e=n);if(e!==n)return;s.reverse?r=s.getScrollTopPixels()<s.scrollThreshold:r=s.getScrollBottomPixels()<s.scrollThreshold,r&&s.addItems(),e=null},250),s.onScroll(),y$(s.scrollElement||window).on("resize scroll",s.onScroll)},s.stopCheckingForMoreItems=function(e){s.onScroll&&y$(s.scrollElement||window).off("resize scroll",s.onScroll),s.hideLoadingIndicator();if(e===!0)return;s.callbacks.onStop()},s.getScrollTopPixels=function(){var e=y$(s.scrollElement||window),t=e.scrollTop();return t},s.getScrollBottomPixels=function(){var e=y$(s.scrollElement||window),t=e.scrollTop()+e.height();return s.getScrollHeight()-t},s.getScrollHeight=function(){return s.scrollElement?y$(s.scrollElement).get(0).scrollHeight:y$(document).height()},s.addItems=function(){var e=s.lastTime;if(e===""||e===null||e===undefined){s.stopCheckingForMoreItems();return}if(y$(s.$container).is(":hidden"))return;s.showLoadingIndicator(),s.fetchItems(function(e){var t=!0,n=y$(s.scrollElement||window),r=n.scrollTop(),i=s.$container.outerHeight();if(e.status==="error")return s.stopCheckingForMoreItems(),!1;s.callbacks.onFetch(e),s.reverse&&!s.scrollElement&&n.scrollTop(r+s.$container.outerHeight()-i+s.$loadingIndicator.outerHeight());if(e.entries===undefined||e.oldest!==undefined&&e.oldest.time===null||e.entries!==undefined&&e.entries.length===0)s.hideLoadingIndicator(),t=!1;return e.oldest&&e.oldest.time!==null&&window.setTimeout(function(){s.$boundaryElement.isVisible()&&s.addItems()},1e3),s.$container.children().length===0&&s.callbacks.onEmpty(e),t})},s.fetchItems=function(e){if(!s.onFetch&&e){s.onFetch=e;if(s.fetchResult&&s.fetchResult.data){s.consumeFetchResult();return}}s.fetchResult||(s.fetchResult={data:null},s.fetchItemsProper(function(e){s.fetchResult.data=e,s.onFetch&&s.consumeFetchResult()}))},s.consumeFetchResult=function(){var e=s.onFetch,t=s.fetchResult,n;s.onFetch=s.fetchResult=null,n=e(t.data);if(typeof n!="boolean")throw"Expected prefetchAgain to be boolean but was "+n;s.prefetchingEnabled&&n&&s.fetchItems(null)},s.fetchItemsProper=function(e){y$.extend(s.params,{idMarker:s.lastId,timeMarker:s.lastTime}),n.get(s.path,s.params,function(t){t.oldest!==undefined&&(s.lastTime=t.oldest.time,s.lastId=t.oldest.id),e(t)})},s.initLoadingIndicator=function(){var n;s.$loadingIndicator||(s.reverse?(n=s.$container.parent().children(".inf-reverse-loading"),n.length>0?s.$loadingIndicator=n.eq(0):(s.$loadingIndicator=y$(e.render(t,{loadingColor:"ldg-on-dark",loadingClass:"inf-reverse-loading"})),s.$container.before(s.$loadingIndicator))):(n=s.$container.parent().children(".inf-forward-loading"),n.length>0?s.$loadingIndicator=n.eq(0):(s.$loadingIndicator=y$(e.render(t,{loadingColor:"ldg-on-dark",loadingClass:"inf-forward-loading"})),s.$container.after(s.$loadingIndicator))))},s.showLoadingIndicator=function(){s.$loadingIndicator.show()},s.hideLoadingIndicator=function(){s.$loadingIndicator.hide()},i.loadAdditionalItems=function(){s.$boundaryElement.isVisible()&&s.addItems()},s.initialize(r),i}}),function(e,t){typeof define=="function"&&define.amd?define("ev-emitter/ev-emitter",t):typeof module=="object"&&module.exports?module.exports=t():e.EvEmitter=t()}(this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(!e||!t)return;var n=this._events=this._events||{},r=n[e]=n[e]||[];return r.indexOf(t)==-1&&r.push(t),this},t.once=function(e,t){if(!e||!t)return;this.on(e,t);var n=this._onceEvents=this._onceEvents||{},r=n[e]=n[e]||[];return r[t]=!0,this},t.off=function(e,t){var n=this._events&&this._events[e];if(!n||!n.length)return;var r=n.indexOf(t);return r!=-1&&n.splice(r,1),this},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(!n||!n.length)return;var r=0,i=n[r];t=t||[];var s=this._onceEvents&&this._onceEvents[e];while(i){var o=s&&s[i];o&&(this.off(e,i),delete s[i]),i.apply(this,t),r+=o?0:1,i=n[r]}return this},e}),function(e,t){"use strict";typeof define=="function"&&define.amd?define("get-size/get-size",[],function(){return t()}):typeof module=="object"&&module.exports?module.exports=t():e.getSize=t()}(window,function(){"use strict";function t(e){var t=parseFloat(e),n=e.indexOf("%")==-1&&!isNaN(t);return n&&t}function n(){}function o(){var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var t=0;t<s;t++){var n=i[t];e[n]=0}return e}function u(e){var t=getComputedStyle(e);return t||r("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? "+"See http://bit.ly/getsizebug1"),t}function l(){if(a)return;a=!0;var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box";var n=document.body||document.documentElement;n.appendChild(e);var r=u(e);c.isBoxSizeOuter=f=t(r.width)==200,n.removeChild(e)}function c(e){l(),typeof e=="string"&&(e=document.querySelector(e));if(!e||typeof e!="object"||!e.nodeType)return;var n=u(e);if(n.display=="none")return o();var r={};r.width=e.offsetWidth,r.height=e.offsetHeight;var a=r.isBorderBox=n.boxSizing=="border-box";for(var c=0;c<s;c++){var h=i[c],p=n[h],d=parseFloat(p);r[h]=isNaN(d)?0:d}var v=r.paddingLeft+r.paddingRight,m=r.paddingTop+r.paddingBottom,g=r.marginLeft+r.marginRight,y=r.marginTop+r.marginBottom,b=r.borderLeftWidth+r.borderRightWidth,w=r.borderTopWidth+r.borderBottomWidth,E=a&&f,S=t(n.width);S!==!1&&(r.width=S+(E?0:v+b));var x=t(n.height);return x!==!1&&(r.height=x+(E?0:m+w)),r.innerWidth=r.width-(v+b),r.innerHeight=r.height-(m+w),r.outerWidth=r.width+g,r.outerHeight=r.height+y,r}var r=typeof console=="undefined"?n:function(e){console.error(e)},i=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],s=i.length,a=!1,f;return c}),function(e,t){"use strict";typeof define=="function"&&define.amd?define("matches-selector/matches-selector",t):typeof module=="object"&&module.exports?module.exports=t():e.matchesSelector=t()}(window,function(){"use strict";var t=function(){var e=Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";var t=["webkit","moz","ms","o"];for(var n=0;n<t.length;n++){var r=t[n],i=r+"MatchesSelector";if(e[i])return i}}();return function(n,r){return n[t](r)}}),function(e,t){"use strict";typeof define=="function"&&define.amd?define("fizzy-ui-utils/utils",["matches-selector/matches-selector"],function(n){return t(e,n)}):typeof module=="object"&&module.exports?module.exports=t(e,require("desandro-matches-selector")):e.fizzyUIUtils=t(e,e.matchesSelector)}(window,function(t,n){var r={};r.extend=function(e,t){for(var n in t)e[n]=t[n];return e},r.modulo=function(e,t){return(e%t+t)%t},r.makeArray=function(e){var t=[];if(Array.isArray(e))t=e;else if(e&&typeof e.length=="number")for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e);return t},r.removeFrom=function(e,t){var n=e.indexOf(t);n!=-1&&e.splice(n,1)},r.getParent=function(e,t){while(e!=document.body){e=e.parentNode;if(n(e,t))return e}},r.getQueryElement=function(e){return typeof e=="string"?document.querySelector(e):e},r.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.filterFindElements=function(e,t){e=r.makeArray(e);var i=[];return e.forEach(function(e){if(!(e instanceof HTMLElement))return;if(!t){i.push(e);return}n(e,t)&&i.push(e);var r=e.querySelectorAll(t);for(var s=0;s<r.length;s++)i.push(r[s])}),i},r.debounceMethod=function(e,t,n){var r=e.prototype[t],i=t+"Timeout";e.prototype[t]=function(){var e=this[i];e&&clearTimeout(e);var t=arguments,s=this;this[i]=setTimeout(function(){r.apply(s,t),delete s[i]},n||100)}},r.docReady=function(e){document.readyState=="complete"?e():document.addEventListener("DOMContentLoaded",e)},r.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,n){return t+"-"+n}).toLowerCase()};var i=t.console;return r.htmlInit=function(e,n){r.docReady(function(){var s=r.toDashed(n),o="data-"+s,u=document.querySelectorAll("["+o+"]"),a=document.querySelectorAll(".js-"+s),f=r.makeArray(u).concat(r.makeArray(a)),l=o+"-options",c=t.jQuery;f.forEach(function(t){var r=t.getAttribute(o)||t.getAttribute(l),s;try{s=r&&JSON.parse(r)}catch(u){i&&i.error("Error parsing "+o+" on "+t.className+": "+u);return}var a=new e(t,s);c&&c.data(t,n,a)})})},r}),function(e,t){typeof define=="function"&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],function(n,r){return t(e,n,r)}):typeof module=="object"&&module.exports?module.exports=t(e,require("ev-emitter"),require("get-size")):(e.Outlayer={},e.Outlayer.Item=t(e,e.EvEmitter,e.getSize))}(window,function(t,n,r){"use strict";function i(e){for(var t in e)return!1;return t=null,!0}function l(e,t){if(!e)return;this.element=e,this.layout=t,this.position={x:0,y:0},this._create()}function h(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}var s=document.documentElement.style,o=typeof s.transition=="string"?"transition":"WebkitTransition",u=typeof s.transform=="string"?"transform":"WebkitTransform",a={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[o],f=[u,o,o+"Duration",o+"Property"],c=l.prototype=Object.create(n.prototype);c.constructor=l,c._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},c.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.getSize=function(){this.size=r(this.element)},c.css=function(e){var t=this.element.style;for(var n in e){var r=f[n]||n;t[r]=e[n]}},c.getPosition=function(){var e=getComputedStyle(this.element),t=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),r=e[t?"left":"right"],i=e[n?"top":"bottom"],s=this.layout.size,o=r.indexOf("%")!=-1?parseFloat(r)/100*s.width:parseInt(r,10),u=i.indexOf("%")!=-1?parseFloat(i)/100*s.height:parseInt(i,10);o=isNaN(o)?0:o,u=isNaN(u)?0:u,o-=t?s.paddingLeft:s.paddingRight,u-=n?s.paddingTop:s.paddingBottom,this.position.x=o,this.position.y=u},c.layoutPosition=function(){var e=this.layout.size,t={},n=this.layout._getOption("originLeft"),r=this.layout._getOption("originTop"),i=n?"paddingLeft":"paddingRight",s=n?"left":"right",o=n?"right":"left",u=this.position.x+e[i];t[s]=this.getXValue(u),t[o]="";var a=r?"paddingTop":"paddingBottom",f=r?"top":"bottom",l=r?"bottom":"top",c=this.position.y+e[a];t[f]=this.getYValue(c),t[l]="",this.css(t),this.emitEvent("layout",[this])},c.getXValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?e/this.layout.size.width*100+"%":e+"px"},c.getYValue=function(e){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?e/this.layout.size.height*100+"%":e+"px"},c._transitionTo=function(e,t){this.getPosition();var n=this.position.x,r=this.position.y,i=parseInt(e,10),s=parseInt(t,10),o=i===this.position.x&&s===this.position.y;this.setPosition(e,t);if(o&&!this.isTransitioning){this.layoutPosition();return}var u=e-n,a=t-r,f={};f.transform=this.getTranslate(u,a),this.transition({to:f,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},c.getTranslate=function(e,t){var n=this.layout._getOption("originLeft"),r=this.layout._getOption("originTop");return e=n?e:-e,t=r?t:-t,"translate3d("+e+"px, "+t+"px, 0)"},c.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},c.moveTo=c._transitionTo,c.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},c._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},c._transition=function(e){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(e);return}var t=this._transn;for(var n in e.onTransitionEnd)t.onEnd[n]=e.onTransitionEnd[n];for(n in e.to)t.ingProperties[n]=!0,e.isCleaning&&(t.clean[n]=!0);if(e.from){this.css(e.from);var r=this.element.offsetHeight;r=null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var p="opacity,"+h(f.transform||"transform");c.enableTransition=function(){if(this.isTransitioning)return;this.css({transitionProperty:p,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(a,this,!1)},c.transition=l.prototype[o?"_transition":"_nonTransition"],c.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},c.onotransitionend=function(e){this.ontransitionend(e)};var d={"-webkit-transform":"transform"};c.ontransitionend=function(e){if(e.target!==this.element)return;var t=this._transn,n=d[e.propertyName]||e.propertyName;delete t.ingProperties[n],i(t.ingProperties)&&this.disableTransition(),n in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[n]);if(n in t.onEnd){var r=t.onEnd[n];r.call(this),delete t.onEnd[n]}this.emitEvent("transitionEnd",[this])},c.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(a,this,!1),this.isTransitioning=!1},c._removeStyles=function(e){var t={};for(var n in e)t[n]="";this.css(t)};var v={transitionProperty:"",transitionDuration:""};return c.removeTransitionStyles=function(){this.css(v)},c.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},c.remove=function(){if(!o||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return}this.once("transitionEnd",function(){this.removeElem()}),this.hide()},c.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,t={},n=this.getHideRevealTransitionEndProperty("visibleStyle");t[n]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:t})},c.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},c.getHideRevealTransitionEndProperty=function(e){var t=this.layout.options[e];if(t.opacity)return"opacity";for(var n in t)return n},c.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,t={},n=this.getHideRevealTransitionEndProperty("hiddenStyle");t[n]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},c.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},c.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},l}),function(e,t){"use strict";typeof define=="function"&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(n,r,i,s){return t(e,n,r,i,s)}):typeof module=="object"&&module.exports?module.exports=t(e,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):e.Outlayer=t(e,e.EvEmitter,e.getSize,e.fizzyUIUtils,e.Outlayer.Item)}(window,function(t,n,r,i,s){"use strict";function c(e,t){var n=i.getQueryElement(e);if(!n){o&&o.error("Bad element for "+this.constructor.namespace+": "+(n||e));return}this.element=n,u&&(this.$element=u(this.element)),this.options=i.extend({},this.constructor.defaults),this.option(t);var r=++f;this.element.outlayerGUID=r,l[r]=this,this._create();var s=this._getOption("initLayout");s&&this.layout()}function p(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t}var o=t.console,u=t.jQuery,a=function(){},f=0,l={};c.namespace="outlayer",c.Item=s,c.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var h=c.prototype;return i.extend(h,n.prototype),h.option=function(e){i.extend(this.options,e)},h._getOption=function(e){var t=this.constructor.compatOptions[e];return t&&this.options[t]!==undefined?this.options[t]:this.options[e]},c.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},h._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),i.extend(this.element.style,this.options.containerStyle);var e=this._getOption("resize");e&&this.bindResize()},h.reloadItems=function(){this.items=this._itemize(this.element.children)},h._itemize=function(e){var t=this._filterFindItemElements(e),n=this.constructor.Item,r=[];for(var i=0;i<t.length;i++){var s=t[i],o=new n(s,this);r.push(o)}return r},h._filterFindItemElements=function(e){return i.filterFindElements(e,this.options.itemSelector)},h.getItemElements=function(){return this.items.map(function(e){return e.element})},h.layout=function(){this._resetLayout(),this._manageStamps();var e=this._getOption("layoutInstant"),t=e!==undefined?e:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},h._init=h.layout,h._resetLayout=function(){this.getSize()},h.getSize=function(){this.size=r(this.element)},h._getMeasurement=function(e,t){var n=this.options[e],i;n?(typeof n=="string"?i=this.element.querySelector(n):n instanceof HTMLElement&&(i=n),this[e]=i?r(i)[t]:n):this[e]=0},h.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},h._getItemsForLayout=function(e){return e.filter(function(e){return!e.isIgnored})},h._layoutItems=function(e,t){this._emitCompleteOnItems("layout",e);if(!e||!e.length)return;var n=[];e.forEach(function(e){var r=this._getItemLayoutPosition(e);r.item=e,r.isInstant=t||e.isLayoutInstant,n.push(r)},this),this._processLayoutQueue(n)},h._getItemLayoutPosition=function(){return{x:0,y:0}},h._processLayoutQueue=function(e){e.forEach(function(e){this._positionItem(e.item,e.x,e.y,e.isInstant)},this)},h._positionItem=function(e,t,n,r){r?e.goTo(t,n):e.moveTo(t,n)},h._postLayout=function(){this.resizeContainer()},h.resizeContainer=function(){var e=this._getOption("resizeContainer");if(!e)return;var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))},h._getContainerSize=a,h._setContainerMeasure=function(e,t){if(e===undefined)return;var n=this.size;n.isBorderBox&&(e+=t?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"},h._emitCompleteOnItems=function(e,t){function r(){n.dispatchEvent(e+"Complete",null,[t])}function o(){s++,s==i&&r()}var n=this,i=t.length;if(!t||!i){r();return}var s=0;t.forEach(function(t){t.once(e,o)})},h.dispatchEvent=function(e,t,n){var r=t?[t].concat(n):n;this.emitEvent(e,r);if(u){this.$element=this.$element||u(this.element);if(t){var i=u.Event(t);i.type=e,this.$element.trigger(i,n)}else this.$element.trigger(e,n)}},h.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},h.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},h.stamp=function(e){e=this._find(e);if(!e)return;this.stamps=this.stamps.concat(e),e.forEach(this.ignore,this)},h.unstamp=function(e){e=this._find(e);if(!e)return;e.forEach(function(e){i.removeFrom(this.stamps,e),this.unignore(e)},this)},h._find=function(e){if(!e)return;return typeof e=="string"&&(e=this.element.querySelectorAll(e)),e=i.makeArray(e),e},h._manageStamps=function(){if(!this.stamps||!this.stamps.length)return;this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this)},h._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},h._manageStamp=a,h._getElementOffset=function(e){var t=e.getBoundingClientRect(),n=this._boundingRect,i=r(e),s={left:t.left-n.left-i.marginLeft,top:t.top-n.top-i.marginTop,right:n.right-t.right-i.marginRight,bottom:n.bottom-t.bottom-i.marginBottom};return s},h.handleEvent=i.handleEvent,h.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},h.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},h.onresize=function(){this.resize()},i.debounceMethod(c,"onresize",100),h.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout())return;this.layout()},h.needsResizeLayout=function(){var e=r(this.element),t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth},h.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},h.appended=function(e){var t=this.addItems(e);if(!t.length)return;this.layoutItems(t,!0),this.reveal(t)},h.prepended=function(e){var t=this._itemize(e);if(!t.length)return;var n=this.items.slice(0);this.items=t.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(n)},h.reveal=function(e){this._emitCompleteOnItems("reveal",e);if(!e||!e.length)return;e.forEach(function(e){e.reveal()})},h.hide=function(e){this._emitCompleteOnItems("hide",e);if(!e||!e.length)return;e.forEach(function(e){e.hide()})},h.revealItemElements=function(e){var t=this.getItems(e);this.reveal(t)},h.hideItemElements=function(e){var t=this.getItems(e);this.hide(t)},h.getItem=function(e){for(var t=0;t<this.items.length;t++){var n=this.items[t];if(n.element==e)return n}},h.getItems=function(e){e=i.makeArray(e);var t=[];return e.forEach(function(e){var n=this.getItem(e);n&&t.push(n)},this),t},h.remove=function(e){var t=this.getItems(e);this._emitCompleteOnItems("remove",t);if(!t||!t.length)return;t.forEach(function(e){e.remove(),i.removeFrom(this.items,e)},this)},h.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="",this.items.forEach(function(e){e.destroy()}),this.unbindResize();var t=this.element.outlayerGUID;delete l[t],delete this.element.outlayerGUID,u&&u.removeData(this.element,this.constructor.namespace)},c.data=function(e){e=i.getQueryElement(e);var t=e&&e.outlayerGUID;return t&&l[t]},c.create=function(e,t){var n=p(c);return n.defaults=i.extend({},c.defaults),i.extend(n.defaults,t),n.compatOptions=i.extend({},c.compatOptions),n.namespace=e,n.data=c.data,n.Item=p(s),i.htmlInit(n,e),u&&u.bridget&&u.bridget(e,n),n},c.Item=s,c}),function(e,t){typeof define=="function"&&define.amd?define("deps/masonry/masonry",["outlayer/outlayer","get-size/get-size"],t):typeof module=="object"&&module.exports?module.exports=t(require("outlayer"),require("get-size")):e.Masonry=t(e.Outlayer,e.getSize)}(window,function(t,n){var r=t.create("masonry");return r.compatOptions.fitWidth="isFitWidth",r.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var e=0;e<this.cols;e++)this.colYs.push(0);this.maxY=0},r.prototype.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var e=this.items[0],t=e&&e.element;this.columnWidth=t&&n(t).outerWidth||this.containerWidth}var r=this.columnWidth+=this.gutter,i=this.containerWidth+this.gutter,s=i/r,o=r-i%r,u=o&&o<1?"round":"floor";s=Math[u](s),this.cols=Math.max(s,1)},r.prototype.getContainerWidth=function(){var e=this._getOption("fitWidth"),t=e?this.element.parentNode:this.element,r=n(t);this.containerWidth=r&&r.innerWidth},r.prototype._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,n=t&&t<1?"round":"ceil",r=Math[n](e.size.outerWidth/this.columnWidth);r=Math.min(r,this.cols);var i=this._getColGroup(r),s=Math.min.apply(Math,i),o=i.indexOf(s),u={x:this.columnWidth*o,y:s},a=s+e.size.outerHeight,f=this.cols+1-i.length;for(var l=0;l<f;l++)this.colYs[o+l]=a;return u},r.prototype._getColGroup=function(e){if(e<2)return this.colYs;var t=[],n=this.cols+1-e;for(var r=0;r<n;r++){var i=this.colYs.slice(r,r+e);t[r]=Math.max.apply(Math,i)}return t},r.prototype._manageStamp=function(e){var t=n(e),r=this._getElementOffset(e),i=this._getOption("originLeft"),s=i?r.left:r.right,o=s+t.outerWidth,u=Math.floor(s/this.columnWidth);u=Math.max(0,u);var a=Math.floor(o/this.columnWidth);a-=o%this.columnWidth?0:1,a=Math.min(this.cols-1,a);var f=this._getOption("originTop"),l=(f?r.top:r.bottom)+t.outerHeight;for(var c=u;c<=a;c++)this.colYs[c]=Math.max(l,this.colYs[c])},r.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this._getOption("fitWidth")&&(e.width=this._getContainerFitWidth()),e},r.prototype._getContainerFitWidth=function(){var e=0,t=this.cols;while(--t){if(this.colYs[t]!==0)break;e++}return(this.cols-e)*this.columnWidth-this.gutter},r.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!=this.containerWidth},r}),define("views/waterfall",["views/infiniteScroll","deps/masonry/masonry"],function(e,t){"use strict";return function(){var n={},r={};return n.init=function(i){var s={},o=window.yoko.infiniteScrollThreshold||null;return r.$container=i.$container,s.type=r.$container.data("type"),s.filter=r.$container.data("filter"),s.columnWidth=null,s=y$.extend(!0,{},s,i.params),r.originalTimestamp=i.lastTime,i.useMasonry!==undefined&&(r.useMasonry=i.useMasonry),r.useMasonry&&(r.masonry=new t(r.$container.get(0),{columnWidth:s.columnWidth,itemSelector:i.masonryItemSelector,transitionDuration:0})),r.infiniteScroll=new e({container:r.$container,path:i.baseEndpoint,params:i.params,lastId:i.lastId,lastTime:i.lastTime,prefetchingEnabled:i.prefetchingEnabled,scrollThreshold:o,onFetch:function(e){var t=r.appendBoxes(i.onFetch(e));i.afterFetch&&i.afterFetch(t)},onStop:i.onStop||y$.noop,onEmpty:i.onEmpty||y$.noop}),r.infiniteScroll.start(),i.reverseBaseEndpoint&&(r.reverseInfiniteScroll=new e({reverse:!0,container:r.$container,path:i.reverseBaseEndpoint,params:i.reverseParams,lastId:i.reverseLastId,lastTime:i.reverseLastTime,prefetchingEnabled:i.reversePrefetchingEnabled,onFetch:function(e){var t=r.prependBoxes(i.onReverseFetch(e));i.afterReverseFetch&&i.afterReverseFetch(t)},onStop:i.onReverseStop||y$.noop,onEmpty:i.onReverseEmpty||y$.noop}),r.reverseInfiniteScroll.start()),r.useMasonry&&r.masonry.unbindResize(),y$(window).on("resize orientationchange",function(){y$(r.$container).is(":visible")&&n.layoutMasonry()}),n},r.masonryInitialized=!1,r.$container=null,r.infiniteScroll=null,r.reverseInfiniteScroll=null,r.originalTimestamp=null,n.getContainer=function(){return r.$container},r.useMasonry=!0,n.reconfigureParams=function(e){var t=e||{};r.infiniteScroll.reconfigureParams(t)},n.reinitReverseInfiniteScroll=function(e,t){r.reverseInfiniteScroll.reinit(e,t)},n.resetView=function(){r.useMasonry?(r.masonry.remove(r.$container.children()),n.layoutMasonry()):r.$container.children().remove(),r.infiniteScroll.restart(),r.reverseInfiniteScroll&&r.reverseInfiniteScroll.restart()},n.removeBoxes=function(e,t){e.fadeOut(300,function(){r.useMasonry?r.masonry.remove(e):e.remove(),t&&t(),n.layoutMasonry(),r.infiniteScroll.loadAdditionalItems(),r.reverseInfiniteScroll&&r.reverseInfiniteScroll.loadAdditionalItems()})},r.appendBoxes=function(e){return e?(e=y$(e).css("opacity",0),r.$container.append(e),r.useMasonry&&r.masonry.appended(e),e.css("opacity",1),n.layoutMasonry(),e):y$()},r.prependBoxes=function(e){return e?(e=y$(e).css("opacity",0),r.$container.prepend(e),r.useMasonry&&r.masonry.prepended(e),e.css("opacity",1),n.layoutMasonry(),e):y$()},n.getMasonry=function(){return r.masonry},n.layoutMasonry=function(){r.useMasonry&&y$(r.$container).is(":visible")&&(r.masonry.layout(),r.masonryInitialized=!0)},n.isMasonryInitialized=function(){return r.masonryInitialized},n}}),define("text!t/collection/subscribe_success.smarty",[],function(){return'{**\n * Template to display status message after subscribing to a collection.\n *\n * @param string $title Title of dialog.\n *}\n<div class="l-dialog l-dlg-center l-dlg-modal subscribe-dialog">\n    <h3 class="l-dlg-header">\n        <button class="l-dlg-close icon icn-close-l"></button>\n        {h k=$title}\n    </h3>\n    <div class="l-dlg-body l-form">\n        <p>{h k=\'subscribe.dialog.text\'}</p>\n    </div>\n</div>\n'}),define("views/subscribe",["template","text!t/collection/subscribe_success.smarty","util/contextMsgKey","util/eventTrack","util/http","util/toolTip","util/actionStorage","views/profile/socialBroadcasts","i18n"],function(e,t,n,r,i,s,o,u,a){"use strict";var f=function(){var e;y$("body").on("click",".btn-subscribe, .tlb-subscribe",y$.proxy(this.update,this)),e=o.getAction(),window.yoko.user&&e&&e.action==="subscribe"&&(this.doAction(e.action,e.contentId,e.state,e.referenceId),o.clearAction())};return f.prototype.doAction=function(e,t,n,s){var o="/api/web/latest/collection/"+encodeURIComponent(t)+"/love",u=e==="subscribe"?"post":"delete";this.xhr&&this.xhr.abort(),this.xhr=i[u](o,{},y$.proxy(function(i){this.xhr=null,n==="subscribe"&&i.showSuccessDlg&&this.showSuccess(i,t),e==="subscribe"&&r.track(r.category.subscribe,"",1,r.extractResourceId(i[t].url))},this)),s===undefined&&(s=y$('.tlb-subscribe[data-content-id="'+t+'"]')),this.updateDom(e,t,n,s)},f.prototype.update=function(e){var t=y$(e.currentTarget),n=t.data("action"),r=t.data("action"),i=t.data("contentId");if(!window.yoko||y$.isEmptyObject(window.yoko.user)){window.yoko.signupView===undefined?window.location=window.yoko.auth.signUp:(o.setAction({action:n,contentId:i,state:r},!0),window.yoko.signupView.showDialog(e));return}this.doAction(n,i,r,t)},f.prototype.updateDom=function(e,t,n,r){var i,o=r.find(".act_count"),u;r.hasClass("tlb-subscribe")?r=y$('.tlb-subscribe[data-content-id="'+t+'"]'):r=y$('.btn-subscribe[data-content-id="'+t+'"]'),r.toggleClass("is-executed",n==="subscribe"),n==="subscribe"?(i=a.html("button.unsubscribe.title"),n="unsubscribe"):(i=a.html("button.subscribe.title"),n="subscribe"),s.setTitle(r,i),r.data("action",n),r.attr("data-action",n),o.length&&(u=parseInt(o.text().trim(),10)||0,u+=e==="subscribe"?1:-1,o=r.find(".act_count"),o.text(u).toggle(u>0)),y$("body").trigger("channel-subscription-update")},f.prototype.showSuccess=function(n,i){var s;s=y$(e.render(t,{title:n.msgKeys.title})),y$("body").append(s),u.init(".subscribe-dialog",n[i].url,n.share,r.category.subscribe),s.on("click",".l-dlg-close",function(e){e.preventDefault(),s.fadeOut("normal",function(){s.remove()})}),y$("body").on("click",y$.proxy(function(e){y$(e.target).is(".subscribe-dialog")&&s.remove()},this)).on("keyup",y$.proxy(function(e){e.keyCode===27&&s.remove()},this)),y$(window).width()<parseInt(window.yoko.screen.maxSmall,10)?s.css("top",y$(document).scrollTop()):s.css("top","")},new f}),define("views/discover/discover",["template","editable","util/ifseta","util/limitCharacters","util/sticky","text!t/discover/vignette.smarty","text!t/discover/_vignetteToolbar.smarty","text!t/discover/_tileToolbar.smarty","text!t/discover/adapt.smarty","text!t/newsfeed/_toolbar.smarty","text!t/twoColumnNews/newsblockToolbar.smarty","text!t/twoColumnNews/newsblockFollow.smarty","text!t/collection/cover.smarty","text!t/collection/_actions_menu.smarty","text!t/discover/_video_actions_menu.smarty","text!t/collection/_cover_grid.smarty","text!t/ad.smarty","text!t/scaledImage.smarty","text!t/profile/people-vignette.smarty","text!t/discover/_tile_body.smarty","text!t/nativeVideo/_videoPlayer.smarty","text!t/loading.smarty","text!t/characterCount.smarty","text!t/newsfeed/_band_seamless.smarty","text!t/newsfeed/_band_half_and_half.smarty","text!t/newsfeed/_band_collection_count.smarty","text!t/newsfeed/_band_headline.smarty","text!t/newsfeed/_band_members.smarty","text!t/util/follow.smarty","text!t/util/blurredImage.smarty","views/collect","views/love","views/waterfall","views/subscribe"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D){"use strict";return function(){var i={},O=new _,M=y$.extend({},O);return O.init=function(e){var t=y$.extend({},e,{prefetchingEnabled:!0,onFetch:function(e){return i.onFetch(e,!1)},afterFetch:function(t){e.afterFetch&&e.afterFetch(t),i.afterFetch()}});return e.reverseBaseEndpoint&&(t=y$.extend(t,{reversePrefetchingEnabled:!0,onReverseFetch:function(e){return i.onFetch(e,!0)},afterReverseFetch:function(t){e.afterReverseFetch&&e.afterReverseFetch(t),i.afterFetch()}})),M.init(t),e.boxTemplate&&(i.boxTemplate=e.boxTemplate),i.getAdditionalProperties=e.getAdditionalProperties||function(){y$.noop()},O},i.getAdditionalProperties=null,i.boxTemplate=s,i.partials={"../newsfeed/_toolbar.smarty":f,"../ad.smarty":m,"../scaledImage.smarty":g,"./adapt.smarty":a,"../discover/_tile_body.smarty":b,"../discover/_vignetteToolbar.smarty":o,"../discover/_tileToolbar.smarty":u,"../nativeVideo/_videoPlayer.smarty":w,"../loading.smarty":E,"../characterCount.smarty":S,"../newsfeed/_band_seamless.smarty":x,"../newsfeed/_band_half_and_half.smarty":T,"../newsfeed/_band_collection_count.smarty":N,"../newsfeed/_band_headline.smarty":C,"../newsfeed/_band_members.smarty":k,"../util/follow.smarty":L,"../util/blurredImage.smarty":A,"./_video_actions_menu.smarty":d,"./newsblockToolbar.smarty":l,"./newsblockFollow.smarty":c},i.cellPartials={"../scaledImage.smarty":g,"./_cover_grid.smarty":v,"./_actions_menu.smarty":p,"../discover/adapt.smarty":a,"../discover/_vignetteToolbar.smarty":o},i.onFetch=function(t,r){var s="",o,u,a,f=y$(".banner-ad-wrapper"),l=y$(".banner-mrec"),c=l.children(),p=!1,d=window.yoko.content||{},v,m,g=y$(".object-admin-options-dialog").length>0,b=O.getContainer().children(":not(.ada-tile)").first().find(".tyl-count").data("num"),w=O.getContainer().children(":not(.ada-tile)").last().find(".tyl-count").data("num"),E,S;return f.length>0&&c.length<=1&&(l.remove(),f.parent().html(f.html())),t.isPrivilegedUser=window.yoko.user===null?!1:window.yoko.user.isPrivileged,t.entries&&(r?E=b-t.entries.length:E=w+1,n(window.yoko,"user")&&(v=window.yoko.user.status,m=window.yoko.user.enabledStatusView&&(v==="EDITOR"||v==="PRODUCT"||v==="ADMIN"),t.canEdit?window.yoko.user.id===d.authorId||m?p=!0:p=!1:p=!1),r&&t.entries.reverse(),y$.each(t.entries,function(n,r){r.contentObject&&r.contentObject.native&&r.contentObject.videoUrls&&(S=!0),a=y$.extend({},t,{canEdit:p,showObjectAdminOptions:g,collectionPublishState:t.publish,entry:r}),t.type==="Collection"||r.type==="Collection"?(o=h,u=i.cellPartials,a.collection=y$.extend({},a.entry,{isCollectable:m})):t.type==="People"||r.type==="User"?o=y:(o=i.boxTemplate,u=i.partials,y$.extend(a,{totalSize:O.getContainer().data("totalSize"),referenceId:t.id,isNativeVideo:S}),a.num=E,E+=1),y$.extend(a,i.getAdditionalProperties(r)),s+=e.render(o,a,u)})),s},i.afterFetch=function(e){t.init(),r.attach(".vignette")},O}}),define("text!t/twoColumnNews/newsblock.smarty",[],function(){return'{**\n * Homepage blocks.\n *\n * @param array   $entry            Activity data.\n * @param array   $hub              Common hub data if this is for a hub page.\n * @param string  $pageType         Type of page: home, hub, etc. Currently only home and hub.\n * @param boolean $isPrivilegedUser Is current user above a basic user e.g. admins, product, and editors.\n * @param boolean $canEdit          Can the current user edit the newsblock?\n *}\n{assign var="entryType" value="{ifseta a=$entry i=\'type\'}"}\n{if isset($entry.content.native)}\n    {assign var="native" value=$entry.content.native}\n{else}\n    {assign var="native" value=false}\n{/if}\n{if $entryType == "adapt"}\n<li class="newsblock content-parent five l-boxes">\n    {include "../ad.smarty" slot=$entry class="{$entry.name}"}\n</li>\n{else}\n{assign var="gemPatternClass" value="{ifseta a=$entry.content i=\'gemPatternClass\'}"}\n{assign var="following" value="{ifseta a=$entry i=\'following\'}"}\n{assign var="followeeId" value="{ifseta a=$entry i=\'followeeId\'}"}\n{assign var="followerId" value="{ifseta a=$entry i=\'followerId\'}"}\n{ifseta2 o="collectionAddedTo" a=$entry i=\'collectionAddedTo\'}\n{* On hub pages, $hub is set once at the root level instead of having the same hub on each entry. *}\n{if !$collectionAddedTo && isset($hub)}\n    {assign var="collectionAddedTo" value=$hub}\n{/if}\n{assign var="private" value=$entry.content.private}\n{assign var="addMoreItems" value=false} {* notice that you don\'t have enought objects in your collection to be publicly seen *}\n{assign var="isHub" value="{ifseta a=$entry.content i=\'hasCollections\'}"} {* if the content has collections, i.e. it is a hub *}\n{if isset($entry.activityEvent)}\n    {assign var="eventMkey" value="{ifseta a=$entry.activityEvent i=\'eventMkey\'}"}\n{else}\n    {assign var="eventMkey" value=null}\n{/if}\n{*\n    Background selection and type.\n    Priority should be:\n        special hub/channel image override\n        content, uploaded\n        content, autopick\n        content, pattern\n        hub, uploaded\n        hub, autopick\n        hub, pattern\n*}\n{*\n    Being used in the interim to catch any cases where entry.content.hasVideo,\n    entry.content.hasEmbed entry.content.native are not available.  This should be removed once\n    they are permanently available. Native is set at the top of this page.\n    These are required for native video band display. -DG\n*}\n{if isset($entry.content.hasVideo)}\n    {assign var="hasVideo" value=$entry.content.hasVideo}\n{else}\n    {assign var="hasVideo" value=false}\n{/if}\n{assign var="hasEmbed" value=false}\n\n{*\n    Assigning the variable isNativeVideo now because this is used in more than one place here.\n*}\n{if (($hasVideo) && ($native) && ($hasEmbed === false))}\n    {assign var="isNativeVideo" value=true}\n{else}\n    {assign var="isNativeVideo" value=false}\n{/if}\n\n{ifseta2 o=\'members\' a=$entry.content i=\'membersWithImages\' d=[]}\n{assign var="bandImageWidth" value=$entry.content.bandSizeDefs.seamlessWidth}\n{assign var="bandImageHeight" value=$entry.content.bandSizeDefs.seamlessHeight}\n\n{if $isHub} {* hub! *}\n    {assign var="itemCount" value=5}\n{else} {* created story *}\n    {assign var="itemCount" value=2}\n{/if}\n\n{** Need a count of actual members here, the content.size can sometimes be higher **}\n{assign var="memberCount" value={$members|count}}\n{assign var="showMembers" value=false}\n{assign var="isCollection" value="{$entry.content.type == \'Collection\'}"}\n{assign var="isSubscribed" value="{ifseta a=$entry.content i=\'isSubscribed\'}"}\n{assign var="isOwner" value="{ifseta a=$entry.content.owner i=\'isViewer\'}"}\n\n<li class="newsblock content-parent bnd-collection five l-boxes"\n    data-content-id="{$entry.content.id}"\n    data-content-title="{$entry.content.title}"\n    data-content-url="{$entry.content.url}"\n    {if isset($entry.content.adaptPageData)}\n        data-adapt-page-data="{$entry.content.adaptPageData}"\n    {/if}\n    {* Note: data-is-native is also used by twoColumnNews.js. *}\n    data-is-native="{$native}">\n    <div class="nb-border">\n        {if $canEdit || $isPrivilegedUser}\n            <ul class="actions-menu">\n            {if $canEdit}\n                <li>\n                    <span class="actions_arrow acn-arrow bnd-acn-menu-item nb-acn-menu-item">\n                        <i class="arrow-down"></i>\n                    </span>\n                    <ul class="acn-dropdown">\n                        <li>\n                            <button class="act-btn bnd-act-up" type="button">{h k=\'message.tile.actions.moveUp\'}</button>\n                        </li>\n                        <li>\n                            <button class="act-btn bnd-act-down" type="button">{h k=\'message.tile.actions.moveDown\'}</button>\n                        </li>\n                        <li>\n                            <button class="act-btn bnd-act-top" type="button">{h k=\'message.tile.actions.moveFirst\'}</button>\n                        </li>\n                        <li>\n                            <button class="act-btn bnd-act-bottom" type="button">{h k=\'message.tile.actions.moveLast\'}</button>\n                        </li>\n                        <li>\n                        {if $collectionAddedTo.isSpecial}\n                            <button class="act-btn bnd-act-remove" type="button">{h k=\'message.tile.actions.deleteFromChannel\'}</button>\n                        {else}\n                            <button class="act-btn bnd-act-remove" type="button">{h k=\'message.tile.actions.deleteFromHub\'}</button>\n                        {/if}\n                    </ul>\n                </li>\n            {/if}\n            {if $isPrivilegedUser}\n                {if $hasVideo}\n                    <li class="bnd-acn-menu-item nb-acn-menu-item btn-privileged-user-options" title="{h k="admin.privilegedUserOptions"}" data-id="{$entry.content.id}" data-type="core-object">\n                        <i class="icon icn-key"></i>\n                    </li>\n                {else}\n                    {assign var="collectionType" value="{ifseta a=$entry.content i=\'collectionType\'}"}\n                    {if $collectionType === \'hub\'}\n                        <li class="bnd-acn-menu-item nb-acn-menu-item btn-privileged-user-options" title="{h k="admin.privilegedUserOptions"}" data-id="{$entry.content.id}" data-type="hub">\n                            <i class="icon icn-key"></i>\n                        </li>\n                    {elseif $collectionType === \'story\'}\n                        <li class="bnd-acn-menu-item nb-acn-menu-item btn-privileged-user-options" title="{h k="admin.privilegedUserOptions"}" data-id="{$entry.content.id}" data-type="story">\n                            <i class="icon icn-key"></i>\n                        </li>\n                    {/if}\n                {/if}\n            {/if}\n            </ul>\n        {/if}\n        {if $isOwner && $entry.content.private}\n            {if $isNativeVideo}\n                {assign var="privateMessageKey" value="band.unpublished.message.video"}\n            {else if $isHub}\n                {assign var="privateMessageKey" value="band.unpublished.message.hub"}\n            {else}\n                {assign var="privateMessageKey" value="band.unpublished.message.story"}\n            {/if}\n            <div class="bnd-private-message nb-private-message">\n                <i class="icon icn-edit"></i><span>{h k=$privateMessageKey hrefAttrs="href = {$entry.content.url}"}</span>\n            </div>\n        {/if}\n        <div class="nb-author">\n            <a class="avatar avt-small nb-avatar" href="{$entry.content.owner.url}">\n                <img class="avt-image" src="{$entry.content.owner.imageUrl}" />\n            </a>\n            <div class="nb-author-title"><a class="nb-link" href="{$entry.content.owner.url}">{$entry.content.owner.title}</a></div>\n            {if $followeeId}\n                {include file=\'./newsblockFollow.smarty\'\n                    following=$following\n                    followeeId=$followeeId\n                    followerId=$followerId}\n            {/if}\n        </div>\n        {assign var="bgImage" value="{ifseta a=$entry.content i=\'imageUrl\'}"} {* content background image, this can be the manual or auto image *}\n        {ifseta2 o=\'bgImageAttrs\' a=$entry.content i=\'imageAttrs\'}\n        {if !$bgImage}\n            {assign var="bgImage" value={ifseta a=$collectionAddedTo i=\'imageUrl\'}}\n            {ifseta2 o=\'bgImageAttrs\' a=$collectionAddedTo i=\'imageAttrs\'}\n        {/if}\n        {if $bgImage}\n            {assign var="bgImageWidth" value={ifseta a=$bgImageAttrs i=\'width\' d=400}}\n            {assign var="bgImageHeight" value={ifseta a=$bgImageAttrs i=\'height\' d=400}}\n            {* typicalWidth is the width of the newsblock on desktop browsers and tablets.\n               The width will be smaller on phones, but it\'s not a big deal. *}\n            {assign var="typicalWidth" value=385.5}\n            {* Double the width for Retina displays. *}\n            {assign var="scaledImageWidth" value=(2*$typicalWidth)}\n            {assign var="scaledImageHeight" value=($scaledImageWidth*$bgImageHeight/$bgImageWidth)}\n            {assign var="scaledImageWidth" value={round n=$scaledImageWidth}}\n            {assign var="scaledImageHeight" value={round n=$scaledImageHeight}}\n            {if (!$isHub && $isNativeVideo)}\n                {assign var="videoHeight" value=($typicalWidth*$bgImageHeight/$bgImageWidth)}\n                <div class="nb-video" style="height: {$videoHeight}px;">\n                    {if !$private}\n                        <a href="#" class="vdp-video vdp-play" data-video-urls="{json qh=true a=$entry.content.videoUrls}" style="display: inline-block; height: 100%; width: 100%; {if $bgImage}background-image: url(\'{image u=$bgImage t=[\'width\' => $scaledImageWidth, \'height\' => $scaledImageHeight, \'crop\' => \'zc:1\']}\');{/if}" data-native-video=\'{$entry.content.native}\'>\n                            {include file="../loading.smarty" loadingColor="ldg-on-dark" loadingClass="vdp-loading"}\n                            <i class="vdp-play">\n                                <span class="triangle"></span>\n                            </i>\n                        </a>\n                        <div class="video-player" style="display: none; height: 100%; width: 100%;"></div>\n                    {else}\n                        <a href="{$entry.content.url}" class="vdp-video" style="display: inline-block; height: 100%; width: 100%; {if $bgImage}background-image: url(\'{image u=$bgImage t=[\'width\' => $scaledImageWidth, \'height\' => $scaledImageHeight, \'crop\' => \'zc:1\']}\');{/if}"></a>\n                    {/if}\n                </div>\n            {else}\n                {assign var="inverseAspectRatioPercentage" value=(100*$bgImageHeight/$bgImageWidth)}\n                <a href="{$entry.content.url}">\n                    <div class="nb-picture" style="padding-bottom: {$inverseAspectRatioPercentage}%; background-image: url(\'{image u=$bgImage t=[\'width\' => $scaledImageWidth, \'height\' => $scaledImageHeight, \'crop\' => \'zc:1\']}\');">\n                    </div>\n                </a>\n            {/if}\n        {/if}\n        {ifseta2 o=\'collectionAddedTo\' a=$entry.activityEvent i=\'collectionAddedTo\'}\n        {ifseta2 o=\'collectionAddedToIsChannel\' a=$collectionAddedTo i=\'isSpecial\'}\n        <div class="nb-content {if $collectionAddedToIsChannel}draw {$collectionAddedTo.title|lower}{/if}">\n            {if $collectionAddedToIsChannel}\n                <div class="nb-channel">\n                    <a class="nb-link" href="{$collectionAddedTo.url}">\n                        <p class="nb-channel-title">{$collectionAddedTo.title}</p>\n                        <div class="nb-channel-tag {$collectionAddedTo.title|lower}"></div>\n                    </a>\n                </div>\n            {/if}\n            <div class="nb-title">\n                <a class="nb-link nb-title-link" href="{$entry.content.url}">{$entry.content.title}</a>\n            </div>\n            {if !$private}\n                <div class="nb-divider">\n                    <svg width="300px" height="20px">\n                        <line x1="11" x2="500" y1="10" y2="10" stroke="#000" stroke-width="4" stroke-linecap="round" stroke-dasharray="0, 7"></line>\n                    </svg>\n                </div>\n                {include "./newsblockToolbar.smarty"\n                    content=$entry.content\n                    showSubscribe=$isCollection\n                    showLove=!$isCollection}\n                <div class="nb-footer"></div>\n            {/if}\n        </div>\n    </div>\n</li>\n{/if}\n'}),define("views/mainDialog",["views/overlay"],function(e){"use strict";return e.extend({initialFormValues:[],initialize:function(e){var t,n={autoCenter:!0,redirectIfNotSignedIn:!0,closeOnClickEsc:!0,startClosed:!0};typeof e=="object"&&(n=y$.extend(n,e)),n.redirectIfNotSignedIn&&!window.yoko&&!y$.isEmptyObject(window.yoko.user)?t=function(e){window.yoko.signupView===undefined?window.location=window.yoko.auth.signUp:window.yoko.signupView.showDialog(e)}:(t=y$.proxy(this.showDialog,this),this.initDialog(e.dialogSelector,n),this.$dialog.data("opts",n)),y$("body").on("click touchend",e.buttonSelector,t),this.initialFormValues=this.$dialog.find("form").serializeArray()},initDialog:function(e,t){this.$dialog=y$(e),t&&t.startClosed&&this.$dialog.addClass("is-closed"),window.hasOwnProperty("ontouchstart")?(this.$dialog.on("touchend",".l-dlg-close",y$.proxy(this.closeDialog,this)),this.$dialog.on("click",".l-dlg-close",function(e){e.preventDefault(),e.stopPropagation()})):this.$dialog.on("click",".l-dlg-close",y$.proxy(this.closeDialog,this)),window.hasOwnProperty("ontouchstart")&&y$(window).width()<=1024||this.$dialog.find(".l-dlg-header").css("cursor","move"),this.$dialog.on("touchstart",":input",function(e){var t=y$(e.target);t.is(":focus")||y$(e.target).trigger("focus")}),t.closeOnClickEsc?y$("body").on("click touchend",y$.proxy(function(t){if(!this.$dialog.is(":visible"))return;y$(t.target).closest(e).length||this.hasChanges()||this.closeDialog(t)},this)).on("keydown",y$.proxy(function(e){e.keyCode===27&&(this.hasChanges()||this.closeDialog(e),e.preventDefault(),e.stopPropagation())},this)):this.skipOverlayEvents(),y$(window).resize(y$.proxy(function(){this.centerDialog(this.$dialog)},this))},hasChanges:function(){var e=this.$dialog.find("form").serializeArray();return JSON.stringify(this.initialFormValues)!==JSON.stringify(e)},showDialog:function(e,t){var n=this.$dialog||t,r=this,i=y$(n);e&&(e.stopPropagation(),e.preventDefault()),r.resetDialog(),i.removeClass("is-closed"),r.showOverlay(n),r.centerDialog(n)},centerDialog:function(e){var t=y$(window);if(e.length===0||!e.data("opts").autoCenter)return;e.css("top",""),e.css({position:"relative",top:Math.max(0,Math.floor(t.height()/2-e.outerHeight()/2))})},closeDialog:function(e,t){var n=this,r=y$(this.$dialog);return!this.$dialog||!this.$dialog.is(":visible")?!1:(e&&e.stopPropagation(),this.$dialog.hasClass("is-locked-open")?!1:t&&t!==this.contentId?!1:(window.clearTimeout(this.successTimeout),this.$dialog.addClass("is-closed").css({top:"",left:""}),r.addClass("is-closed"),n.resetDialog(),this.hideOverlay(this.$dialog),!0))},resetDialog:function(){y$(".l-overlay, .tlb-item.is-active").removeClass("is-active")},showBusy:function(e){var t;t=this.$dialog.find(".l-frm-submit"),e===!1?(this.$dialog.find(".l-dlg-disabled, .ntc-loading").remove(),t.show()):(this.$dialog.append('<div class="l-dlg-disabled"></div>'),t.hide(),t.after('<div class="ntc-loading"></div>'))}})}),define("text!t/collection/publishDialog.smarty",[],function(){return'{**\n * Banner dialog.\n *\n * @param boolean $isHub The current page is for a hub or not.\n *}\n<div id="dlg_publish" class="l-dialog l-dlg-modal l-dlg-main l-dlg-center-content six is-closed">\n    <h3 class="l-dlg-header">\n        <i class="l-dlg-close icon icn-close-l"></i>\n        {if isset($isHub)}\n            {h k="publish.hub.dialog.header"}\n        {else}\n            {h k="publish.story.dialog.header"}\n        {/if}\n    </h3>\n    <div class="l-dlg-body">\n        <div class="l-row-centered">\n            <div class="l-box">\n            {if isset($isHub)}\n                {h k="publish.hub.dialog.body"}\n            {else}\n                {h k="publish.story.dialog.body"}\n            {/if}\n            </div>\n        </div>\n        <div class="l-row-centered">\n            <div class="l-box">\n                <button class="btn-primary btn-primary-l btn-blue btn-confirm-publish">{h k="button.publish"}</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/collection/publishDialog",["i18n","template","util/http","views/mainDialog","text!t/collection/publishDialog.smarty"],function(e,t,n,r,i){"use strict";var s=r.extend({$dialog:null,dilaogSelector:"#dlg_publish",buttonSelector:".ban-publish",confirmPublishSelector:".btn-confirm-publish",publishSuccessMsg:".publish-success-msg",publishCollectionUrl:"/api/web/latest/collection/publish",viewedPublishUrl:"/api/web/latest/collection/viewedPublish",$content:null,initialize:function(){var e=y$(t.render(i,{isHub:y$(this.buttonSelector).closest(".content-parent").data("contentIsHub")}));y$("body").append(e),r.prototype.initialize.call(this,{dialogSelector:this.dilaogSelector,buttonSelector:this.buttonSelector}),this.$dialog=y$(this.dilaogSelector),y$("body").on("click",this.confirmPublishSelector,y$.proxy(function(){this.publishCollection({id:this.$content.data("contentId"),title:this.$content.data("title"),isHub:y$(this.buttonSelector).closest(".content-parent").data("contentIsHub")})},this)),y$("body").on("click",".ban-top-msg-close",y$.proxy(function(e){var t=y$(e.target).closest(this.publishSuccessMsg);this.hidePublishMessage(t)},this))},hidePublishMessage:function(e){e.animate({opacity:0},200,function(){e.css("opacity",1),e.addClass("is-hidden")})},publishCollection:function(e){n.post(this.publishCollectionUrl,{collection_id:e.id},y$.proxy(function(t){this.collectionPublishingProgress(e)},this))},collectionPublishingProgress:function(t){var n=y$(this.$content),r=n.find(this.publishSuccessMsg),i="";t.isHub?i=e.html("banner.publishing.hub",{contentTitle:t.title,hrefAttrs:"href="}):i=e.html("banner.publishing.collection",{contentTitle:t.title,hrefAttrs:"href="}),n.find(this.buttonSelector).addClass("is-hidden"),r.find(".icn-tick-outline").addClass("is-hidden"),r.find(".collection-title").html(i),n.find(this.publishSuccessMsg).removeClass("is-hidden"),this.closeDialog()},showDialog:function(e){this.$content=y$(e.target).closest(".content-parent"),r.prototype.showDialog(e,this.$dialog)},markAsPublishedShown:function(e){e.hasClass("collection-published")&&(setTimeout(y$.proxy(function(){this.hidePublishMessage(e)},this),5e3),n.post(this.viewedPublishUrl,{collection_id:e.closest(".content-parent").data("contentId")}))}});return new s}),define("views/adapt",[],function(){"use strict";var e={};return e.showAll=function(){y$.noop()},e.show=function(e){y$.noop()},e}),define("util/video",["util/http","util/loadJs","util/eventTrack"],function(e,t,n){"use strict";var r={},i={};return r.debug=!1,r.selectors={videoThumbnailSelector:".vdp-video",videoSelector:".video-player"},r.defaultFormat=".mp4",r.initialized=!1,r.onVideoStarted=y$.Callbacks("unique"),r.onVideoEnded=y$.Callbacks("unique"),i.initialize=function(){if(r.initialized)return;r.initialized=!0;var e=y$("body");r.debug=window.location.href.indexOf("showVideoPlayerDebug")>-1,t("//www.youtube.com/iframe_api"),e.on("click",".vdp-play",function(e){var t=y$(this).closest(".content-parent");if(y$(e.target).hasClass("vdp-do-not-play"))return!0;e.preventDefault(),e.stopPropagation(),i.playVideo(t.find(".vdp-video"))})},i.addOnVideoEndedCallback=function(e){r.onVideoEnded.add(e)},i.addOnVideoStartedCallback=function(e){r.onVideoStarted.add(e)},i.playVideo=function(e){var t=e.data("videoUrls"),i,s,o,u,a=!1;r.onVideoStarted.fire(e),e.closest(".vdp-body").addClass("vdp-now-playing").find(".vdp-hide-on-play").hide(),e.removeClass("vdp-play"),e.data("started",!1),window.yoko.device.touchEnabled||(n.trackVideo(n.video.action.start,n.extractResourceId(e.closest(".content-parent").data("contentUrl"),!0)),e.data("state","playing"),e.data("started",!0),r.log("playVideo")),y$.each(t,function(n,f){t.mp4&&(i=r.videoUrlForProtocol(t.mp4)),f.extension==="html"?(r.log("html5 Player"),o=r.videoUrlForProtocol(f),u=f.attrs||f.attr):f.extension==="swf"&&(r.log("flash Player -note"),i=r.videoUrlForProtocol(f),i.match(/nytimes.com.*playerType=embed/)&&(o=i,u=f.attrs||f.attr));if(o)return r.log("iframe Player"),r.playIframeVideo(e,o,u),a=!0,!1;if(f.extension==="swf")return r.log("flash Player"),i=r.videoUrlForProtocol(f),s=i.match(/youtube\.com\/v\/([^\/\?]+)/),s?(r.playYoutube(e,s[1]),a=!0,!1):(r.playFlashVideo(e,i,f.attrs||f.attr),a=!0,!1)}),a||r.playHtmlVideo(e)},i.stopVideos=function(){r.log("Stop All Videos"),y$(r.selectors.videoSelector).html("").hide(),y$(r.selectors.videoThumbnailSelector).show().addClass("vdp-play")},i.loadVideoContainers=function(){window.yoko.device.touchEnabled&&y$(".vdp-play").each(function(){y$(this).click()})},i.formNativeUrl=function(e){return r.formNativePlayerUrl(e)},r.findVideoPlayer=function(e){return e.next(".video-player")},r.playFlashVideo=function(e,t,n){var i=r.findVideoPlayer(e),s=y$('<embed allowFullScreen="true">');r.log("playFlashVideo"),s.attr("type",n.type),s.attr("src",t),n.flashVars&&s.attr("FlashVars",n.flashVars),i.append(s).show(),e.hide()},r.getHtmlPlayableVideo=function(e){var t=document.createElement("video"),n=null,i=null;return r.log("getPlayableVideo"),y$.each(e,function(e,s){if(n&&i)return;if(!t.canPlayType(s.attrs?s.attrs.type:s.attr.type))return;n=r.videoUrlForProtocol(s);if(!n)return;i=s.attrs||s.attr}),[n,i]},r.playYoutube=function(e,t){var n="//www.youtube.com/embed/"+t+"?autoplay=true&fs=1&rel=0&modestbranding=1&iv_load_policy=3&showinfo=0&wmode=transparent&autohide=1&enablejsapi=1&origin="+window.location.origin,i=r.findVideoPlayer(e),s=y$("<iframe>"),o;s.attr("src",n),s.attr("frameborder",0),s.attr("marginwidth",0),s.attr("marginheight",0),s.attr("allowfullscreen",!0),i.append(s).show(),e.hide(),o=new YT.Player(s[0],{events:{onStateChange:function(t){t.data===YT.PlayerState.ENDED&&(i.html("").hide(),e.show().addClass("vdp-play"))}}}),e[0].ytplayer=o},r.playIframeVideo=function(e,t,n){var i=r.findVideoPlayer(e),s=y$("<iframe >");r.log("playIframeVideo"),s.attr("frameborder",0),s.attr("marginwidth",0),s.attr("marginheight",0),s.attr("allowfullscreen",!0),i.append(s).show(),s.attr("src",t),e.hide(),t.match(/nytimes.com.*playerType=embed/)&&i.css("paddingBottom","78%")},r.playHtmlVideo=function(e){var t=e.data("videoUrls"),n=r.findVideoPlayer(e),i=y$("<source>"),s=y$('<video class="video-js">'),o=r.getHtmlPlayableVideo(t),u=o[0],a=o[1],f={};r.log("playHtmlVideo");if(!u)return;s.prop("controls",!0),i.prop("src",u),i.prop("type",a.type),s.append(i),n.append(s).show(),e.hide(),e.data("noVast")||(f.plugins={vastClient:{adTagUrl:"https://ima3vpaid.appspot.com/?adTagUrl=https%3A%2F%2Fgoogleads.g.doubleclick.net%2Fpagead%2Fads%3Fclient%3Dca-video-pub-1463455084986126%26slotname%3D2039272167%26ad_type%3Dvideo%26description_url%3Dhttp%253A%252F%252Fwww.mode.com%26max_ad_duration%3D30000%26videoad_start_delay%3D0&type=js",vpaidFlashLoaderPath:"/assets/lib/videojs-vast-vpaid/2.0.2/VPAIDFlash.swf",adCancelTimeout:5e3}}),videojs(s[0],f).ready(function(){this.play()})},r.videoUrlForProtocol=function(e){return window.location.protocol==="https:"?e.ssl||e.url:e.url||e.ssl},r.showHideLoading=function(e,t){r.log(t+": ShowHideLoading"),t?(e.find(".vdp-play").addClass("is-loading"),e.find(".vdp-loading").show()):(e.find(".vdp-loading").hide(),e.find(".vdp-play").removeClass("is-loading"))},r.log=function(e){r.debug&&window.console&&console.log(e)},i}),define("util/inView",[],function(){"use strict";var e={},t={};return t.itemsList=[],t.lastInViewItems=[],t.checkItems=function(){var e=y$(window),n=e.scrollTop(),r=e.height()+n,i=t.getInViewItems(n,r),s=y_.difference(i,t.lastInViewItems),o=[],u,a;for(u=0;u<s.length;u+=1)a=s[u],a.callback(),a.callMoreThanOnce||o.push(a);t.itemsList=y_.difference(t.itemsList,o),t.lastInViewItems=i},t.getInViewItems=function(e,n,r){var i,s,o=[];for(i=0;i<t.itemsList.length;i+=1)s=t.itemsList[i],e<s.verticalOffset+s.height&&s.verticalOffset<n&&o.push(s);return o},e.reload=function(){var e,n;for(e=0;e<t.itemsList.length;e+=1)n=t.itemsList[e],y$.contains(document.body,n.$item)?t.itemsList.splice(e,1):(n.verticalOffset=n.$item.offset().top,n.height=n.$item.height())},e.addItem=function(e,n,r){if(e.length===0)return;var i={$item:e,callback:n,verticalOffset:e.offset().top,height:e.height(),callMoreThanOnce:r};t.itemsList.push(i),t.checkItems()},t.initialize=function(){var n=y$(window);n.on("resize orientationchange",function(){e.reload()}),y$(document).on("scroll",y_.throttle(function(){y$("body").hasClass("locked")||t.checkItems()},250))},t.initialize(),e}),define("text!t/banner/dialog.smarty",[],function(){return'{**\n * Banner dialog.\n *}\n<div id="dlg_photo_feature" class="l-dialog l-dlg-modal l-dlg-main four is-closed">\n    <h3 class="l-dlg-header">\n        <i class="l-dlg-close icon icn-close-l"></i>\n        {h k=\'banner.addBackground.title\'}\n    </h3>\n    <div class="l-dlg-body">\n    {if $channel}\n        <form>\n            <dl class="l-form l-dlg-form">\n\n                <dd class="l-frm-nested channel-img">\n                     <label>{h k=\'feature.channel\'}</label>\n                    <div class="inp-image">\n                        <div class="inp-img-preview thumbnail preview" style="display: none;" title="{h k=\'shared.clickToDelete\'}"></div>\n                        <a class="inp-img-browse button photo">{h k=\'shared.browse\'}</a>\n                        <input class="inp-img-input" type="hidden" name="channelImgUrl">\n\n                    </div>\n\n                </dd>\n\n                <dd class="l-frm-nested channel-nav-img">\n                    <label>{h k=\'feature.navigation\'}</label>\n                    <div class="inp-image">\n                        <div class="inp-img-preview thumbnail preview" style="display: none;" title="{h k=\'shared.clickToDelete\'}"></div>\n                        <a class="inp-img-browse button photo">{h k=\'shared.browse\'}</a>\n                        <input class="inp-img-input" type="hidden" name="channelNavImgUrl">\n                    </div>\n                </dd>\n\n                <dd class="l-frm-nested channel-nav-mob-img">\n                    <label>{h k=\'feature.mobileNavigation\'}</label>\n                    <div class="inp-image">\n                        <div class="inp-img-preview thumbnail preview" style="display: none;" title="{h k=\'shared.clickToDelete\'}"></div>\n                        <a class="inp-img-browse button photo">{h k=\'shared.browse\'}</a>\n                        <input class="inp-img-input" type="hidden" name="channelNavMobImgUrl">\n\n                    </div>\n                </dd>\n                <dd class="l-frm-actions">\n                    <button class="btn-primary l-frm-submit">{h k=\'shared.done\'}</button>\n                </dd>\n            </dl>\n        </form>\n    {else}\n        <div class="l-row">\n            <div class="content">{h k=\'banner.addBackground\' width={$width} height={$height}}</div>\n        </div>\n        <div class="l-row-centered">\n            <img class="sample-image" src="{u u=\'/assets/img/banner/add-background-example.png\'}" />\n        </div>\n        <form>\n            <dl class="l-form l-dlg-form">\n                <dd class="l-frm-nested bg-image">\n                    <div class="inp-image">\n                        <div class="inp-img-preview thumbnail preview" style="display: none;" title="{h k=\'shared.clickToDelete\'}"></div>\n                        <a class="inp-img-browse button photo">{h k=\'shared.browse\'}</a>\n                        <input class="inp-img-input" type="hidden" name="imageUrl">\n                    </div>\n                </dd>\n                <dd class="l-frm-actions">\n                    <button class="btn-primary l-frm-submit">{h k=\'shared.done\'}</button>\n                </dd>\n            </dl>\n        </form>\n    {/if}\n    </div>\n</div>\n'}),define("util/iframeupload",[],function(){"use strict";var e=function(e,t,n){var r={};return r.init=function(e,t,n){return r.formNode=y$(e),r.iframeName=r.uniqueIframeName(),r.success=t,r.iframeNode=r.createIframe(r.iframeName,r.handleOnload),r.oldAction=r.formNode.attr("action"),r.oldTarget=r.formNode.attr("target"),r.formNode.attr("target",r.iframeName),n&&r.formNode.attr("action",n),e.submit(),{stop:r.stop}},r.stop=function(){r.iframeNode.attr("location","about:blank"),r.cleanIframeUpload()},r.createIframe=function(e,t){var n=y$("<iframe>").attr("name",e).attr("id",e).attr("src","about:blank").on("load",t).css({width:"1px",height:"1px",top:0,left:0,visibility:"hidden"});return y$("body").append(n),n},r.uniqueIframeName=function(){var e;do e="_ifrupl"+parseInt(Math.random()*1e5,10);while(window[e]||window.frames[e]);return e},r.handleOnload=function(e){if(!r.iframeNode)return;var t=r.iframeNode.contents();if(t.attr("location")==="about:blank")return;r.cleanIframeUpload();if(r.success)return r.success(t.text())},r.cleanIframeUpload=function(){r.formNode.attr("action",r.oldAction),r.formNode.attr("target",r.oldTarget),r.formNode.find("input[type=file]").val(""),r.formNode.find(".asset-id").val(""),r.iframeNode.remove()},r.init(e,t,n)};return e}),define("text!t/util/dropArea.smarty",[],function(){return"{**\n * Drag and drop file controls.\n *}\n<div class=\"inp-img-drop\">\n    <p>{h k='shared.dropImageOr'}</p>\n    <a class=\"inp-img-browse photo button btn-primary\">{h k='shared.clickToAdd'}</a>\n</div>\n"}),define("text!t/util/drawerDropArea.smarty",[],function(){return'{**\n * Drag and drop file controls for image upload drawers.\n *}\n<div class="inp-img-drop">\n    <div class="inp-img-cta">\n        <p class="inp-img-head-txt">{h k="collection.photo.drawer.head"}</p>\n        <a class="inp-img-browse photo button btn-primary">\n            <i class="icon icn-camera"></i>\n            <span class="icn-txt">{h k=\'collection.photo.choose\'}</span>\n        </a>\n        <p class="inp-img-hint-txt">\n            {h k="collection.photo.drawer.hint"}\n        </p>\n    </div>\n</div>\n'}),define("util/validator",[],function(){"use strict";var e={validatePasswords:function(e,t){return e===t},validateNumber:function(e){var t=/^[0-9]+$/g;return e.match(t)?!0:!1},validateNonNumber:function(e){var t=/^[0-9]+$/g;return e.match(t)?!1:!0},validateAlphabets:function(e){var t=/^[a-zA-Z]+$/g;return e.match(t)?!0:!1},isEmpty:function(e){var t=/^\s{1,}$/g;return e.length===0||e===null||e.search(t)>-1?!0:!1},validateAlphaNumeric:function(e){var t=/^[a-zA-Z0-9]+$/g;return e.match(t)?!0:!1},validateDate:function(e,t,n){var r=!1,i,s,o,u;try{i=Number(t)}catch(a){i=0}try{s=Number(e)}catch(a){s=0}try{o=Number(n)}catch(a){o=0}i<10&&(i="0"+i),s<10&&(s="0"+s),u=o+"-"+i+"-"+s;try{Number(Date.parse(u))?r=!0:r=!1}catch(a){r=!1}return r},validateUSZip:function(e){var t=/^[0-9]+$/g;return e.length===5?e.match(t)?!0:!1:!1},validateUploadType:function(e,t){var n=e.split(".")[1],r;try{for(r=0;r<t.length;r+=1)if(t[r].toLowerCase()===n.toLowerCase())return!0;return!1}catch(i){return!1}}};return e}),define("util/imageupload",["i18n","util/iframeupload","template","text!t/util/dropArea.smarty","text!t/util/drawerDropArea.smarty","util/validator"],function(e,t,n,r,i,s){"use strict";var o=function(s,u){var a={};return a.repositionForm=function(){var e,t,n;a.browse.length===0&&a.destroy();if(!a.browse.is(":visible")){a.fileContainer.hide();return}a.fileContainer.show(),e=a.browse.offset(),t=a.elem.outerWidth()>0?"block":"none",n=parseInt(a.browse.css("z-index"),10),n=isNaN(n)?2:n+2,a.fileContainer.css({top:parseInt(e.top,10),left:parseInt(e.left,10),width:a.browse.outerWidth(),height:a.browse.outerHeight(),display:t,"z-index":n}),a.fileinput.css({"font-size":a.browse.outerHeight()})},a.uploadImage=function(){if(a.busy(!0))return;a.clearError(),a.elem.trigger("imageupload/start"),t(a.uploadForm[0],function(t){var n;try{n=JSON.parse(t)}catch(r){n={}}a.busy(!1),n.url?(a.input.val(n.url).change(),a.preview.css({"background-image":"url("+n.url+")",display:"inline-block"})):n.error?a.addError(n.error):a.addError(e.html("shared.tryAgainOrAnotherImage")),a.elem.trigger("imageupload/done",[n])},"/api/web/latest/image/upload.txt")},a.enableDelete=function(){var e;e=y$('<span class="button btn-delete"></span>'),a.preview.on("click",function(e){e.preventDefault(),a.deleteImage()}),a.preview.append(e)},a.deleteImage=function(){a.input.val(""),a.preview.hide(),a.elem.trigger("imageupload/delete")},a.initDragDrop=function(){var e,t;s.hasClass("inp-drawer")?t=y$(n.render(i)):t=y$(n.render(r));if(!window.FileList)return;e=a.elem.find(".inp-img-drop"),e.length>0?a.browse=e:(a.browse.replaceWith(t),a.browse=t),a.fileinput.on("drop",function(){window.setTimeout(function(){a.fileinput.change()},1)})},a.isFileInputSupported=function(){var e=document.createElement("input");return e.type="file",!e.disabled},a.init=function(e,t){var n=y$(e);if(n.length>1){n.each(function(){o(y$(this),t)});return}if(!n[0])return;if(!a.isFileInputSupported()){n.remove();return}if(n[0].imageupload)return;return n[0].imageupload=a,a.elem=n,a.input=a.elem.find(".inp-img-input"),a.browse=a.elem.find(".inp-img-browse"),a.preview=a.elem.find(".inp-img-preview"),a.uploadForm=y$('<form method="post" enctype="multipart/form-data"></form>'),a.fileContainer=y$("<div></div>").addClass("inp-img-container"),a.fileinput=y$('<input type="file" name="file" size="1">'),a.fileinput.hover(function(){a.browse.addClass("hover")},function(){a.browse.removeClass("hover")}),a.fileContainer.append(a.fileinput),a.uploadForm.append(a.fileContainer),a.fileContainer.css("z-index",a.zIndex(a.elem)),a.fileinput.on("change",a.uploadImage),a.fileinput.on("click",function(e){e.stopPropagation()}),a.initDragDrop(),a.enableDelete(),y$("body").append(a.uploadForm),a.interval=window.setInterval(a.repositionForm,1e3),t&&a.attachEvents(t),a.input.val()&&a.preview.css({"background-image":"url("+a.input.val()+")",display:"inline-block"}),{destroy:a.destroy}},a.destroy=function(){if(!a.interval)return;window.clearInterval(a.interval),a.uploadForm.remove(),a.interval=null},a.addError=function(e){a.elem.addClass("frm-error").append(y$('<span class="error">').text(e))},a.clearError=function(){a.elem.removeClass("frm-error"),a.elem.find(".error").remove()},a.busy=function(e){var t,n;t=a.browse.is(":hidden");if(e===!0){if(t)return!0;n=y$('<div class="ntc-loading"></div>'),n.css({height:a.browse.outerHeight(),width:a.browse.outerWidth()}),a.browse.after(n),a.browse.hide(),n.show()}else a.elem.find(".ntc-loading").remove(),a.browse.show();return t},a.zIndex=function(e){var t=0;return y$(e).parents().each(function(){var e=y$(this).css("z-index");e==="auto"&&(e=0),t+=e}),t},a.attachEvents=function(e){var t;for(t in e)e.hasOwnProperty(t)&&typeof e[t]=="function"&&a.elem.on(t,e[t])},a.init(s,u)};return o}),define("views/singleImageUpload",["util/imageupload"],function(e){"use strict";var t=function(t,n){var r={};return r.imageUpload=e(t,n),r.$uploadBox=y$(t),r.init=function(){var e=r.$uploadBox.find(".inp-img-input").val();return r.$uploadBox.on("imageupload/done",function(e,t){t.url?r.$uploadBox.find(".inp-img-drop").hide():t.error?r.$uploadBox.find(".inp-img-drop").show():r.$uploadBox.find(".inp-img-drop").show()}),r.$uploadBox.on("imageupload/delete",function(e){r.$uploadBox.find(".inp-img-drop").show()}),e&&r.$uploadBox.find(".inp-img-drop").hide(),{destroy:r.destroy,reset:r.reset}},r.reset=function(){r.$uploadBox.find(".preview").hide(),r.$uploadBox.find(".inp-img-drop").show(),r.$uploadBox.find(".inp-image").removeClass("frm-error"),r.$uploadBox.find('[name="imageUrl"]').val("")},r.destroy=function(){r.imageUpload.destroy()},r.init()};return t}),define("util/simpleImageUpload",["i18n","util/iframeupload"],function(e,t){"use strict";var n=function(n,r,i){var s={settings:{debug:!1,inputImageSelector:".smp-img-input",uploadForm:".simple-image-upload",eventContainer:"smp-img-events",handleUploadEndpoint:null},isBusy:!1,imageHistory:{},events:null,container:null,imagePreLoad:{image:new Image,complete:!1,loadingError:null,imageUrl:null,targetElement:null,imageAttrs:{},tileSize:{}}},o={};return s.init=function(e,t,n){return y$.extend(s.settings,t),s.container=y$(e),s.events=s.container.find("."+s.settings.eventContainer),s.log(s.container),s.container===undefined||s.container===null?(s.log("no container set for simpleImageUpload init()"),!1):s.events.length>0?o:(s.events=y$("<div></div>").addClass(s.settings.eventContainer).hide(),s.container.append(s.events),s.log(s.settings.inputImageSelector),s.container.find(s.settings.inputImageSelector).on("change",function(){var e=y$(this),t;s.log("inputImageSelector changed!"),e.val()!==""&&(s.log(e),t=e.closest(".content-parent").data("assetId"),t&&y$(".asset-id").val(t),s.uploadImage(e))}),n&&s.attachEvents(n),s.events.on("simpleimageupload/start simpleimageupload/done",function(e,t){s.log("start/done")}),s.events.on("simpleimageupload/postProcessDone",function(e,t){t.result&&t.data&&s.handlePostProcess(t.result,t.data)}),s.imagePreLoad.image.onload=function(){s.imagePreLoad.complete=!0,s.events.trigger("simpleimageupload/saved",s.imagePreLoad)},o)},s.handlePostProcess=function(t,n){if(t.status==="error"){var r=e.html(t.error.imageUrl[0],{height:t.error.imageUrl[1].height,width:t.error.imageUrl[1].width});s.imagePreLoad.loadingError=!0,s.events.trigger("simpleimageupload/error",{el:n.el,message:r})}else s.imagePreLoad.loadingError=!1,s.events.trigger("simpleimageupload/saved",s.imagePreLoad)},s.uploadImage=function(n){if(s.busy(!0))return;s.uploadForm=n.closest(".simple-image-upload"),s.events.trigger("simpleimageupload/clearError"),s.events.trigger("simpleimageupload/start",{el:s.uploadForm}),t(s.uploadForm,function(t){var r,i={};try{r=JSON.parse(t)}catch(o){r={}}i.el=s.uploadForm,r.url?(i.url=r.url,i.tileSize=r.tileSize,i.imageAttrs=r.imageAttrs,s.imagePreLoad.image.src=i.url,s.imagePreLoad.imageUrl=i.url,s.imagePreLoad.el=i.el,s.imagePreLoad.tileSize=i.tileSize,s.imagePreLoad.imageAttrs=s.paramStringToArray(r.imageAttrs),s.imagePreLoad.complete=!1,s.imagePreLoad.loadingError=null):r.error?(r.statusCode?s.events.trigger("simpleimageupload/error",{el:n,message:r.error,statusCode:r.statusCode}):s.events.trigger("simpleimageupload/error",{el:n,message:r.error}),i.error=r.error):(s.events.trigger("simpleimageupload/error",{el:n,message:e.html("shared.tryAgainOrAnotherImage")}),i.error=e.html("shared.tryAgainOrAnotherImage")),s.events.trigger("simpleimageupload/done",i),s.busy(!1)},"/api/web/latest/image/upload.txt")},s.busy=function(e){var t=s.isBusy;if(e===!0){if(t)return!0;s.events.trigger("simpleimageupload/busy")}else s.events.trigger("simpleimageupload/notBusy");return s.log("isBusy: "+e),s.isBusy=e,t},s.attachEvents=function(e){var t;for(t in e)e.hasOwnProperty(t)&&typeof e[t]=="function"&&s.events.on(t,e[t])},s.paramStringToArray=function(e){var t={},n,r,i=e.split("&");for(n=0;n<i.length;n+=1)i[n]&&(r=i[n].split("="),t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]));return t},o.destroy=function(){s.attached=!1,y$.remove(s.events)},o.reset=function(){return!0},o.undo=function(){return!0},s.log=function(e){s.settings.debug&&(console.log("debug::"),console.dir(e))},s.init(n,r,i)};return n}),define("text!t/util/alert.smarty",[],function(){return'{**\n * Alert dialog template.\n *\n * @param string $title       Title of the alert box.\n * @param string $contentHtml HTML for main content.\n * @param string $className   Custom class name for the alert dialog.\n *}\n<div class="l-dlg-alert l-dialog l-dlg-modal {$className}">\n    <h3 class="l-dlg-header">\n        <button class="l-dlg-close icon icn-close-l"></button>\n        {$title}\n    </h3>\n    <div class="l-dlg-body l-form l-frm-dialog">\n        {$contentHtml nofilter}\n        <dd class="l-frm-actions">\n            <button class="btn-primary btn-alert-dialog l-dlg-close">{h k=\'shared.ok\'}</button>\n        </dd>\n    </div>\n</div>\n'}),define("views/alert",["template","text!t/util/alert.smarty","views/dialog"],function(e,t,n){"use strict";return n.extend({initialize:function(e){this.id="dlg_alert",this.requireSignIn=!1,e?this.class=e.class:this.class="six",e&&e.centerDialog?this.alignCenter=!0:this.alignCenter=!1},set:function(e,t){var n=new RegExp("<\\/?[^>]+>","g");return this.title=e,this.contentHtml=t,this.contentText=t.replace(n,""),this},showDialog:function(){if(y$(window).width()<=480){window.alert(this.contentText);return}this.$dialog=y$(e.render(t,{title:this.title,contentHtml:this.contentHtml,className:this.class})).prop("id",this.id),y$("body").append(this.$dialog),this.initDialog(this.$dialog),this.alignCenter&&this.centerDialog(this.$dialog),this.$dialog.show()},centerDialog:function(e){var t=y$(window);if(e.length===0)return;if(t.width()<parseInt(window.yoko.screen.maxSmall,10)){e.css("top",0);return}e.css("top",""),e.css({position:"fixed",top:Math.max(0,Math.floor(t.height()/2-e.height()/2)),left:y$(window).width()/2})},closeDialog:function(){y$("#"+this.id).remove()}})}),define("views/collection/bannerDialog",["i18n","template","text!t/error/input.smarty","text!t/banner/dialog.smarty","views/singleImageUpload","views/mainDialog","util/eventTrack","util/http","util/simpleImageUpload","views/alert"],function(e,t,n,r,i,s,o,u,a,f){"use strict";var l=s.extend({buttonSelector:".add-background",initialize:function(){var e,n={width:y$(".ban-feature:eq(0)").data("dialogimg-minwidth"),height:y$(".ban-feature:eq(0)").data("dialogimg-minheight")};this.isChannel=y$(".ban-cover-cta-btn:eq(0)").data("ischannel"),e=y$(t.render(r,{width:n.width,height:n.height,channel:this.isChannel})),y$("body").append(e),this.isChannel?(this.channelImageUpload=i(e.find(".channel-img").find(".inp-image")),this.channelNavImageUpload=i(e.find(".channel-nav-img").find(".inp-image")),this.channelNavMobileImageUpload=i(e.find(".channel-nav-mob-img").find(".inp-image")),this.isLockOpenImage=!1,this.isLockOpenNavImage=!1,this.isLockOpenNavMobileImage=!1):this.imageUpload=i(e.find(".inp-image")),this.$dialog&&(this.isChannel?(this.$form=this.$dialog.find("form"),this.$dialog.on("submit","form",y$.proxy(this.handleSubmit,this)),e.find(".channel-image").on("imageupload/start",".inp-image",y$.proxy(function(){this.clearErrors(),this.isLockOpenImage=!0,this.$dialog.hasClass("is-locked-open")||this.$dialog.addClass("is-locked-open")},this)),e.find(".nav-image").on("imageupload/start",".inp-image",y$.proxy(function(){this.clearErrors(),this.isLockOpenNavImage=!0,this.$dialog.hasClass("is-locked-open")||this.$dialog.addClass("is-locked-open")},this)),e.find(".nav-mobile-image").on("imageupload/start",".inp-image",y$.proxy(function(){this.clearErrors(),this.isLockOpenNavMobileImage=!0,this.$dialog.hasClass("is-locked-open")||this.$dialog.addClass("is-locked-open")},this)),e.find(".channel-image").on("imageupload/done",".inp-image",y$.proxy(function(e,t){this.isLockOpenImage=!1,this.isLockOpenImage===!1&&this.$dialog.removeClass("is-locked-open"),t.url?this.clearErrors():t.error?y$(e.target).siblings("label").addClass("frm-error"):y$(e.target).siblings("label").addClass("frm-error")},this)),e.find(".nav-image").on("imageupload/done",".inp-image",y$.proxy(function(e,t){this.isLockOpenNavImage=!1,this.isLockOpenNavImage===!1&&this.$dialog.removeClass("is-locked-open"),t.url?this.clearErrors():t.error?y$(e.target).siblings("label").addClass("frm-error"):y$(e.target).siblings("label").addClass("frm-error")},this)),e.find(".nav-mobile-image").on("imageupload/done",".inp-image",y$.proxy(function(e,t){this.isLockOpenNavMobileImage=!1,this.isLockOpenNavMobileImage===!1&&this.$dialog.removeClass("is-locked-open"),t.url?this.clearErrors():t.error?y$(e.target).siblings("label").addClass("frm-error"):y$(e.target).siblings("label").addClass("frm-error")},this))):(this.$form=this.$dialog.find("form"),this.$dialog.on("submit","form",y$.proxy(this.handleSubmit,this)).on("imageupload/delete",".inp-image",function(e){y$(this).find(".inp-img-drop").show()}),this.$dialog.on("imageupload/start imageupload/done",".inp-image",y$.proxy(function(e,t){var n=e.type==="imageupload/start";this.$dialog.toggleClass("is-locked-open",n)},this)))),y$("body").on("click",".remove_story_cvr",function(){var e={},t=encodeURIComponent(y$(this).data("contentId"));e.backgroundImageUrl=y$(this).data("imageUrl"),u.put("/api/web/latest/collection/"+t,e,function(){window.location.reload()})}),y$("body").on("click",".btn_bgimg_admin",y$.proxy(function(e){var t=y$(e.currentTarget),n=t.next("ul");y$(".chained-section").hasClass("no-bg")||y$(".chained-section").hasClass("auto")?(y$(".remove_story_cvr, .ban-bgimg-opt-remove").addClass("disabled"),y$(".remove_story_cvr").attr("disabled",!0)):y$("body").hasClass("hub")||(y$(".remove_story_cvr, .ban-bgimg-opt-remove").removeClass("disabled"),y$(".remove_story_cvr").attr("disabled",!1)),this.attachSimpleImageUpload(t),t.hasClass("is-executed")?t.closest("li").hasClass(".inputElement")||(t.removeClass("is-executed"),n.hide(),e.stopPropagation()):(t.addClass("is-executed"),n.show(),e.stopPropagation())},this)),y$("body").on("click",function(e){var t=y$(e.target);!t.closest("ul").closest("li").hasClass("ban-bgimg-admin")&&(!t.closest("button").hasClass("is-executed")||!t.hasClass("is-executed"))&&(y$(".btn-bgimg-admin").removeClass("is-executed"),y$(".btn_bgimg_admin").closest(".content-parent").find(".ban-collection-settings-dropdown").hide())})},attachSimpleImageUpload:function(t){t.imageUpload=a(t.closest(".content-parent"),{uploadForm:t.find(".simple-image-upload")},{"simpleimageupload/start":function(e,n){var r=y$(n.el).closest(".content-parent");t.attr("disabled",!0).toggleClass("is-loading"),r.find(".ban-top-msg-close").hide(),r.find(".btn_bgimg_admin").next("ul").hide()},"simpleimageupload/done":function(e,t){var n={},r=y$(t.el).closest(".content-parent").data("contentId"),i=y$(e.currentTarget);if(!t.url)return;n.backgroundImageUrl=t.url,u.put("/api/web/latest/collection/"+encodeURIComponent(r),n,function(e){i.trigger("simpleimageupload/postProcessDone",{result:e,data:t})})},"simpleimageupload/saved":function(e,n){var r=y$(n.el).closest(".content-parent");if(n.loadingError!==!1||n.complete!==!0)return!1;t.attr("disabled",!1).toggleClass("is-loading"),r.hasClass("ban-cap-body")?window.location.reload():window.yoko.device.touchEnabled?r.closest(".chained-section").find(".bg-img").css("background-image","url("+n.imageUrl+")").removeClass("auto no-bg"):r.closest(".chained-section").css("background-image","url("+n.imageUrl+")").removeClass("auto no-bg"),t.find(".remove_story_cvr").data("imageUrl",n.imageUrl)},"simpleimageupload/error":y$.proxy(function(n,r){t.attr("disabled",!1).toggleClass("is-loading"),this.showErrorDialog(e.html("shared.invalidFile"),'<div class="message">'+r.message+"</div>")},this)})},hasChanges:function(){return Boolean(this.$dialog.find("input").not(":checkbox").val())},showLoading:function(e){var t;t=this.$dialog.find(".l-frm-submit"),e===!1?(this.$dialog.find(".l-dlg-disabled, .ntc-loading").remove(),t.show()):(this.$dialog.append('<div class="l-dlg-disabled"></div>'),t.hide(),t.after('<div class="ntc-loading"></div>'))},handleSubmit:function(e){e.preventDefault();var t={};if(this.$dialog.hasClass("is-locked-open"))return;this.clearErrors(this.$form),this.$dialog.addClass("is-locked-open"),this.isChannel?(t.channelImageUrl=this.$form.find("[name=channelImgUrl]").val(),t.channelNavImageUrl=this.$form.find("[name=channelNavImgUrl]").val(),t.channelNavMobileImageUrl=this.$form.find("[name=channelNavMobImgUrl]").val()):t.backgroundImageUrl=this.$form.find("[name=imageUrl]").val(),this.showLoading(!0),u.put("/api/web/latest/collection/"+encodeURIComponent(this.contentId),t,y$.proxy(this.handlePostResult,this)),o.track(o.category.collectionBackground,window.yoko.content.url,"",o.label.addBackground)},handlePostResult:function(e){this.$dialog.removeClass("is-locked-open");if(e.status==="error"){this.showLoading(!1),this.highlightErrors(e.error);return}window.location.reload()},clearErrors:function(){this.$form.find(".frm-error").removeClass("frm-error"),this.$form.find(".error").remove()},highlightErrors:function(r){var i=this.$form;y$.each(r,function(r,s){var o,u,a;u=i.find("[name="+r+"]"),u.closest("dd").addClass("frm-error"),a=e.html(s),o=t.render(n,{html:a}),u.attr("type")==="checkbox"?u.closest("label").after(o):u.after(o)})},showDialog:function(e,t){var n,r;n=y$(e.target).closest(this.buttonSelector),r=this.$dialog||t,e.preventDefault(),this.constructor.__super__.showDialog(e,r),this.contentId=n.data("contentId"),this.populateDialog(r,n.data("feature"),e.target),this.trigger("dialog-show")},populateDialog:function(e,t,n){var r;if(!t)return;r=y$("form",e),this.isChannel?(r.find('[name="channelImgUrl"]').val(t.channelImgUrl),r.find('[name="channelNavImgUrl"]').val(t.channelNavImgUrl),r.find('[name="channelNavMobImgUrl"]').val(t.channelNavMobImgUrl)):r.find('[name="imageUrl"]').val(t.bgUrl),t.bgUrl&&(r.find(".inp-img-preview").css({"background-image":"url("+t.bgUrl+")",display:"inline-block"}),this.$dialog.find(".inp-img-drop").hide()),t.channelImgUrl&&(r.find(".channel-img .inp-img-preview").css({"background-image":"url("+t.channelImgUrl+")",display:"inline-block"}),this.$dialog.find(".channel-img .inp-img-drop").hide()),t.channelNavImgUrl&&(r.find(".channel-nav-img .inp-img-preview").css({"background-image":"url("+t.channelNavImgUrl+")",display:"inline-block"}),this.$dialog.find(".channel-nav-img .inp-img-drop").hide()),t.channelNavMobImgUrl&&(r.find(".channel-nav-mob-img .inp-img-preview").css({"background-image":"url("+t.channelNavMobImgUrl+")",display:"inline-block"}),this.$dialog.find(".channel-nav-mob-img .inp-img-drop").hide()),this.constructor.__super__.centerDialog(e)},resetDialog:function(){this.clearErrors(this.$form),this.$form.each(function(){this.reset()}),this.constructor.__super__.resetDialog(),this.isChannel?(this.channelImageUpload&&this.channelImageUpload.reset(),this.channelNavImageUpload&&this.channelNavImageUpload.reset(),this.channelNavMobileImageUpload&&this.channelNavMobileImageUpload.reset()):(this.$dialog.find(".error").remove(),this.$dialog.find(".inp-image").removeClass("frm-error"),this.imageUpload&&this.imageUpload.reset())},showErrorDialog:function(e,t){var n;y$(".ban-image-error-dlg").remove(),n=new f({"class":"ban-image-error-dlg five prevent-close",preventAutoClose:!0}),n.set(e,t),n.showDialog()}});return new l}),define("text!t/feed/peopleToFollow.smarty",[],function(){return"{**\n * People to follow.\n *\n * @param array $user Data for the person to follow.\n *}\n<li class=\"ptf-person-to-follow image img-cover ptf_person_to_follow\"\n    {ifseta2 o='hasTopCollection' a=$user i='topCollection'}\n    {if $hasTopCollection}\n        style=\"background-image: url('{image u=$user.topCollection.imageUrl t=['width' => 312, 'height' => 133, 'crop' => 'zc:1']}');\"\n    {/if}\n    data-id=\"{$user.id}\">\n    <div class=\"ptf-person-info\">\n        <div class=\"ptf-author\">\n            <a class=\"avatar avt-medium ptf-avatar\" href=\"{$user.url}\">\n                <img class=\"avt-image\" src=\"{$user.imageUrl}\" />\n            </a>\n        </div>\n        <div class=\"ptf-name\">\n            <a href=\"{$user.url}\">{$user.truncatedTitle}</a>\n        </div>\n        {if {ifseta a=$user i='tagline'}}\n        <div class=\"ptf-story-title\">{$user.truncatedTagline}</div>\n        {/if}\n        {include file='../util/follow.smarty'\n            followClass='ptf-btn-follow ptf_btn_follow'\n            following=''\n            followeeId=''\n            followerId=''\n            gaLabel='People Cards'}\n    </div>\n</li>\n"}),define("views/follow",["util/eventTrack","util/http","util/toolTip","util/actionStorage","i18n"],function(e,t,n,r,i){"use strict";var s=function(){var e;y$("body").on("click",".tlb-follow",y$.proxy(this.update,this)),e=r.getAction(),window.yoko.user&&e&&e.action==="follow"&&(this.doAction(e.action,e.followeeId,e.gaLabel),r.clearAction())},o=function(e,t,n){var r={follower:"profile.nFollowers",following:"profile.nFollowing"},s=n.parent().find(".vgn-toolbar-"+e);s.length&&(t>0?s.html(i.text(r[e],{n:t})):s.html(""))};return s.prototype.doAction=function(n,r,i,s){var u="/api/web/latest/profile/"+encodeURIComponent(r)+"/follow",a=n==="follow"?"post":"delete",f;if(s===undefined){s=y$('.tlb-follow[data-followee-id="'+r+'"]').first();if(s.hasClass("is-executed"))return}s.data("currentRequest")&&s.data("currentRequest").abort(),f=t[a](u,{},function(t){var u=t.entries[r];s.data("currentRequest",null),o("follower",u.followerCount,s),o("following",u.followeeCount,s),n==="follow"&&e.track(e.category.follow,u.url,1,i)}),s.data("currentRequest",f),this.changeState(s.data("followeeId"))},s.prototype.update=function(e){var t=y$(e.currentTarget),n=t.data("action"),i=t.data("followeeId"),s=t.data("gaLabel");if(!window.yoko||y$.isEmptyObject(window.yoko.user)){window.yoko.signupView===undefined?window.location=window.yoko.auth.signUp:(r.setAction({action:n,followeeId:i,gaLabel:s}),window.yoko.signupView.showDialog(e));return}this.doAction(n,i,s,t)},s.prototype.changeState=function(e){var t,r=y$(".tlb-follow").filter('[data-followee-id="'+e+'"]'),s=r.data("action");r.toggleClass("is-executed",s==="follow"),s==="follow"?(t=i.html("button.unfollow.title"),s="unfollow"):(t=i.html("button.follow.title"),s="follow"),n.setTitle(r,t),r.data("action",s)},new s}),define("views/home/peopleToFollow",["template","text!t/feed/peopleToFollow.smarty","text!t/util/follow.smarty","util/eventTrack","util/actionStorage","util/http","views/follow"],function(e,t,n,r,i,s,o){"use strict";var u=Backbone.View.extend({idsToExclude:{},newUserCallbackQueues:[],el:".people_to_follow",initialize:function(){var e=i.getAction();window.yoko.user&&e&&e.action==="follow_ptf"&&(this.doAction(e.followeeId,e.channel),i.clearAction())},events:{"click .ptf_btn_follow":function(e){var t=y$(e.currentTarget),n=t.closest(".ptf_person_to_follow"),r=n.data("id"),s=t.closest(".people_to_follow"),o=s.data("channel")||"";if(!window.yoko||y$.isEmptyObject(window.yoko.user)){window.yoko.signupView===undefined?window.location=window.yoko.auth.signUp:(i.setAction({action:"follow_ptf",followeeId:r,channel:o}),window.yoko.signupView.showDialog(e));return}this.doAction(r,o,t)}},doAction:function(e,t,n){var i=this;n===undefined&&(n=y$('.ptf_person_to_follow[data-id="'+e+'"]').find(".ptf_btn_follow"));if(n.hasClass("is-executed"))return;n.addClass("is-executed"),s.post("/api/web/latest/profile/"+encodeURIComponent(e)+"/follow",{},function(){delete i.idsToExclude[e],r.track(r.category.follow,t,1,"People to Follow")}),this.updateDom(e,t,n)},updateDom:function(e,t,n){var r=this,i=n.closest(".ptf_person_to_follow"),s=n.closest(".people_to_follow"),u=(new Date).getTime();s.find(".ptf-person-to-follow").each(function(){r.idsToExclude[y$(this).data("id")]=!0}),r.suggestAnother(t,function(e){var t=(new Date).getTime()-u;t>window.yoko.ptfCardTimeout?r.replaceUser(i,e):setTimeout(function(){r.replaceUser(i,e)},window.yoko.ptfCardTimeout-t)}),o.changeState(e)},suggestAnother:function(e,t){var n=this;n.newUserCallbackQueues[e]||(n.newUserCallbackQueues[e]=[]),n.newUserCallbackQueues[e].push(t),n.newUserCallbackQueues[e].length===1&&n.suggestAnotherProper(e)},suggestAnotherProper:function(e){var t=this,n=t.newUserCallbackQueues[e][0],r={idsToExclude:Object.keys(t.idsToExclude).join(","),channel:e};s.get("/api/web/latest/newsfeed/personToFollow",r,function(r){r.status==="ok"&&(r.user&&(t.idsToExclude[r.user.id]=!0),n(r.user)),t.newUserCallbackQueues[e].shift(),t.newUserCallbackQueues[e].length&&t.suggestAnotherProper(e)})},replaceUser:function(r,i){var s=i?y$(e.render(t,{user:i},{"../util/follow.smarty":n})):y$();s.hide(),s.insertBefore(r),r.fadeOut("slow",function(){s.fadeIn("slow")})}});return new u}),define("views/home/closeFollowCta",["util/http"],function(e){"use strict";var t=Backbone.View.extend({el:".l-waterfall .band .bnd-close-button",events:{click:"closeFollowCta"},closeFollowCta:function(t){var n=y$(t.currentTarget),r=n.closest(".band");return e.post("/api/web/latest/onboarding/showFollowCta",{status:"true"},function(){r.fadeOut("slow",function(){r.remove()})}),!1}});return new t}),define("views/collection/trendingContent",["util/inView","util/eventTrack"],function(e,t){"use strict";var n={},r={};return r.initialize=function(){n.trackTrendingContent()},n.trackTrendingContent=function(){y$(".fd-trending-content").each(function(){var n=y$(this),r=y$(this).find(".fd-trending-link").attr("href").replace(/^[^\/]+\/\/[^\/]+/,"");if(n.data("trendingContent.tracking"))return;n.data("trendingContent.tracking",!0),y$(this).on("click",function(){t.trackRaw(t.category.trendingModule,"Click",1,r)}),e.addItem(y$(this),y$.proxy(function(){t.trackRaw(t.category.trendingModule,"Impression",1,r,1)},this))})},r.initialize(),n}),define("text!t/confirm.smarty",[],function(){return'{**\n * Confirm dialog box with message and yes - no button.\n *\n * @param string $hParams Catalog message key for message to be shown in dialog box.\n * @param string $markup  Markup to use for the message key.\n *}\n<div class="l-dialog l-dlg-modal six confirm">\n    <div class="l-dlg-body">\n        <div>\n            {if isset($hParams)}\n                {h k=$hParams}\n            {/if}\n            {if isset($markup)}\n                {$markup nofilter}\n            {/if}\n        </div>\n        <div class="l-row-centered">\n            <button class="btn-primary cnf-yes">{h k=\'confirm.yes\'}</button>\n            <button class="btn-secondary cnf-no">{h k=\'confirm.no\'}</button>\n        </div>\n    </div>\n</div>\n'}),define("text!t/_confirmCancel.smarty",[],function(){return'{**\n * Confirm upload cancel dialog template.\n *\n * @param string $title       Title of the alert box.\n * @param string $contentHtml HTML for main content.\n * @param string $className   Custom class name for the alert dialog.\n * @param Array  $buttons     Labels of the buttons used for yes/no buttons\n *}\n<div class="l-dlg-alert l-dialog l-dlg-modal {$className}">\n    <h3 class="l-dlg-header">\n        <button class="l-dlg-close icon icn-close-l"></button>\n        {$title}\n    </h3>\n    <div class="l-dlg-body l-form l-frm-dialog">\n        {$contentHtml nofilter}\n        <dd class="l-frm-actions">\n            <button class="btn-primary btn-alert-dialog cnf-yes">{$buttons.yes}</button>\n            <button class="btn-secondry btn-cancel-alert-dialog cnf-no">{$buttons.no}</button>\n        </dd>\n    </div>\n</div>\n'}),define("confirm",["template","text!t/confirm.smarty","text!t/_confirmCancel.smarty"],function(e,t,n){"use strict";return Backbone.View.extend({initialize:function(r){r.customDialog?this.$dialog=y$(e.render(n,{title:r.title,contentHtml:r.body,className:r.class||"six",buttons:r.buttons})):this.$dialog=y$(e.render(t,{hParams:r.hParams,markup:r.markup,className:r.class||"six",buttons:r.buttons})),"function"==typeof r.yesCallback&&this.$dialog.on("click",".cnf-yes",r.yesCallback),"function"==typeof r.noCallback&&this.$dialog.on("click",".cnf-no",r.noCallback),this.$dialog.on("click","button",y$.proxy(this.close,this))},show:function(e){e&&this.$dialog.css({top:y$(e.target).offset().top,position:"absolute"}),y$("body").append(this.$dialog),this.$dialog.show()},close:function(){this.$dialog.remove()},$element:function(){return this.$dialog}})}),define("views/collection/tileMover",["util/http"],function(e){"use strict";return function(){var t={},n={};return t.moveObjectUp=function(e,t,r,i,s,o,u){o=o||y$.noop,u=u||y$.noop,n.moveObject(e,"up",r,i,s,function(){t.before(e),o()},u)},t.moveObjectDown=function(e,t,r,i,s,o,u){o=o||y$.noop,u=u||y$.noop,n.moveObject(e,"down",r,i,s,function(){t.after(e),o()},u)},t.moveObjectToTop=function(e,t,r,i,s){i=i||y$.noop,s=s||y$.noop,n.moveObject(e,"top",t,r,null,function(){e.parent().prepend(e),i()},s)},t.moveObjectToBottom=function(e,t,r,i,s){i=i||y$.noop,s=s||y$.noop,n.moveObject(e,"bottom",t,r,null,function(){e.parent().append(e),i()},s)},n.moveObject=function(t,n,r,i,s,o,u){e.put("/api/web/latest/collection/"+r+"/object/"+i+"/position",{direction:n,otherId:s},function(e){if(!e||e.status!=="ok"){u();return}o(),t[0].scrollIntoView()})},t}()}),define("views/collection/actionsMenu",[],function(){"use strict";var e={};e.initialize=function(){y$("body").on("click",".actions_arrow",e.showActionMenu),y$("body").on("click",e.closeActionMenu)},e.showActionMenu=function(e){var t=y$(e.currentTarget).closest(".acn-arrow"),n=t.next(".acn-dropdown");n.toggle("fast",function(){y$(this).is(":visible")?(window.yoko.screen.maxNarrow>y$(window).width()&&y$("body").find(".acn-page-cover-overlay").show(),t.addClass("is-active")):(y$("body").find(".acn-page-cover-overlay").hide(),t.removeClass("is-active"))})},e.closeActionMenu=function(e){var t=y$(e.target);!t.hasClass("acn-arrow")&&!t.hasClass("arrow-down")&&!t.hasClass("acn-btn")&&(y$(".acn-move-opt button").attr("disabled",!1),y$(".acn-arrow").removeClass("is-active"),y$(".acn-dropdown").hide(),y$(".acn-page-cover-overlay").hide())},e.initialize()}),define("views/home/hubActionsMenu",["confirm","util/http","views/collection/tileMover","views/collection/actionsMenu"],function(e,t,n,r){"use strict";var i={},s={};return s.$firstBand=y$(".discover-list .bnd-collection:first"),s.initialize=function(){var e=y$(".discover-list"),t=e.data("id");e.on("click",".bnd-act-up",function(){var e=y$(this).closest(".bnd-collection"),r=e.prevAll(".bnd-collection:first"),i=e.data("contentId"),s=r.data("contentId");n.moveObjectUp(e,r,t,i,s)}),e.on("click",".bnd-act-down",function(){var e=y$(this).closest(".bnd-collection"),r=e.nextAll(".bnd-collection:first"),i=e.data("contentId"),s=r.data("contentId");n.moveObjectDown(e,r,t,i,s)}),e.on("click",".bnd-act-top",function(){var e=y$(this).closest(".bnd-collection"),r=e.data("contentId");n.moveObjectToTop(e,t,r,function(){s.isFirstBandInDom()||window.location.reload(!0)})}),e.on("click",".bnd-act-bottom",function(){var e=y$(this).closest(".bnd-collection"),r=e.data("contentId");n.moveObjectToBottom(e,t,r,function(){s.isLastBandInDom()||e.hide()})}),e.on("click",".bnd-act-remove",function(e){var n=y$(this).closest(".bnd-collection"),r=n.data("contentId");s.remove(n,t,r,e)})},s.isFirstBandInDom=function(){return s.$firstBand.closest(document.documentElement).length>0},s.isLastBandInDom=function(){return!y$(".bnd-load").is(":visible")},s.remove=function(n,r,i,s){var o=new e({hParams:["collect.confirm.delete",{collectionName:n.data("contentTitle")}],yesCallback:function(){t.delete("/api/web/latest/collection/"+encodeURIComponent(r)+"/object/"+encodeURIComponent(i),{},function(){n.fadeOut("slow",function(){n.remove()})})}});o.show(s)},s.initialize(),i}),define("text!t/widget/embed.smarty",[],function(){return'{**\n * Widget which can be embeded.\n *\n * @param array   $sizes            Array of different sizes available for the current object embed code.\n * @param boolean $contentTypeVideo Whether the current object is a video or not.\n * @param array   $customSize       Array of different properties required for the custom size.\n *}\n<div class="l-dialog l-dlg-modal l-dlg-main {if $contentTypeVideo}twelve widget-embed-video{else}six{/if} l-widget widget_embed_dialog">\n    <div class="l-wgt-main">\n        <h3 class="l-dlg-header">\n            <button class="l-dlg-close icon icn-close-l"></button>\n            {if $contentTypeVideo}{h k=\'widget.embed.video.title\'}{else}{h k=\'widget.embed.title\'}{/if}\n        </h3>\n        <div class="l-dlg-body">\n            <span class="l-dlg-instruction">{if $contentTypeVideo}{h k=\'widget.embed.video.instruction\'}{else}{h k=\'widget.embed.instruction\'}{/if}</span>\n            <form class="l-dlg-widget" method="post">\n                <dl class="l-form l-frm-dialog">\n                    <dd class="l-row">\n                    {foreach $sizes as $el}\n                        <div class="l-box two l-wgt-option">\n                            <label>\n                                {if $el.desc}\n                                    <div class="l-wgt-title">{$el.label}</div>\n                                    <div class="l-wgt-desc">{$el.desc}</div>\n                                {else}\n                                    <div class="l-wgt-title">{h k=\'widget.embed.options.title\' size=$el.label}</div>\n                                {/if}\n                                <div class="l-wgt-sample l-wgt-{$el.size}"></div>\n                                <div class="l-wgt-radio">\n                                    <input type="radio" name="size" value="{$el.size}" class="inp-radio" data-code="{$el.code}" data-count="{$el.count}" data-track="{$el.track}" data-src-url="{$customSize.srcUrl}"><u></u>\n                                </div>\n                            </label>\n                        </div>\n                    {/foreach}\n                    {if $contentTypeVideo}\n                        <div class="l-box two l-wgt-option l-wgt-option-custom">\n                            <div class="l-wgt-title">{$customSize.label}</div>\n                            <div class="l-wgt-custom-size">\n                                <input class="l-widget-custom-input width" maxlength="4"/>\n                                <span class="icon icn-close-xs"></span>\n                                <input class="l-widget-custom-input height" maxlength="4"/>\n                                <input type="radio" name="size" value="{$customSize.size}" class="inp-radio" data-code="{$customSize.code}" data-count="{$customSize.count}" data-track="{$customSize.track}" data-src-url="{$customSize.srcUrl}">\n                            </div>\n                            <div class="l-wgt-desc">{$customSize.desc}</div>\n                        </div>\n                    {/if}\n                    </dd>\n                    <dd class="l-frm-copy">\n                        <input class="widget-code widget_code" readonly="readonly" />\n                    </dd>\n                </dl>\n            </form>\n        </div>\n    </div>\n    <div class="l-wgt-success">\n        <span class="wgt-copied">\n            <i class="icon icn-tick-outline"></i>\n            {h k=\'widget.embed.copied.success\'}\n        </span>\n        <button class="l-dlg-close icon icn-close-l"></button>\n        <div class="l-row l-row-centered">\n            <div class="l-box l-wgt-scs-body">\n                <p>{h k=\'widget.embed.copied\'}</p>\n                <p>{h k=\'widget.embed.pasteIt\'}</p>\n                <button class="btn-primary wgt_copy_another">{h k=\'widget.embed.copyAnother\'}</button>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("views/widget/embedDialog",["template","i18n","text!t/widget/embed.smarty","views/dialog","util/eventTrack","util/ifseta","util/contextMsgKey","util/video","util/number"],function(e,t,n,r,i,s,o,u,a){"use strict";var f=".widget_embed_dialog",l=".widget_embed",c=16/9,h=function(e,t,n){var r=e||640,i=t||360,s=n;return'<iframe width="'+r+'" height="'+i+'" frameborder="0" src="'+s+'" allowfullscreen></iframe>'},p=function(e,n,r,i,s,o){var u="http://www8.glam.com/js/widgets/glam_coll.act",a="afid="+window.yoko.affiliateId+";",f="colid="+e.data("contentId")+";",l="authorid="+e.data("contentAuthorId")+";",c="",p="es="+s+";",d="",v=e.data("contentTitle"),m=e.data("contentUrl"),g=e.data("contentAuthorTitle"),y=e.data("contentAuthorUrl"),b,w,E,S=e.data("videoUrl");return window.yoko.user&&window.yoko.user.screenName&&(c="userid="+window.yoko.user.screenName+";"),S?(E=n.split("x"),m=S,w=h(E[0]||"",E[1]||"",m)):(b="collect.widget.code",w=t.html(b,{collectionLinkAttrs:t.safe('href="'+m+'"'),collectionName:v,authorLinkAttrs:t.safe('href="'+y+'"'),authorName:g,foodieLinkAttrs:t.safe('href="'+window.U("/")+'"')})),{count:s,size:n,label:r,code:w,srcUrl:m,track:'<script type="text/javascript" language="JavaScript" src="'+u+"?"+a+f+l+c+p+d+'"></script>',desc:i}},d=r.extend({initialize:function(){var e;r.prototype.initialize.call(this,{dialogSelector:f,buttonSelector:l}),y$("body").on("click",f+" .l-dlg-close",y$.proxy(function(e){this.closeDialog()},this)),y$("body").on("click",".wgt_copy_another",y$.proxy(function(t){e=y$(t.currentTarget).parents(".widget_embed_dialog"),this.toggleSuccess(e,!1)},this))},showDialog:function(r){var i,s,o=y$(r.currentTarget),u,a,f;this.contentId=o.data("contentId"),a=o.data("videoUrl"),a?(s=[p(o,"640x360","640x360","",1),p(o,"560x315","560x315","",2),p(o,"300x169","300x169","",3)],f=p(o,"custom",t.html("widget.embed.options.title.custom"),t.html("widget.embed.options.desc.custom"),4)):s=[p(o,"600x400","Flexible size",t.html("widget.embed.options.desc.flexible"),1),p(o,"300x600","300x600","",2),p(o,"300x250","300x250","",3)],i=y$(e.render(n,{sizes:s,contentTypeVideo:a,customSize:f})),o.hasClass("embed_widget_modal")?(y$("body").append(i),this.showOverlay(i)):(i.removeClass("l-dlg-modal l-dlg-main six"),o.closest(".toolbar").next(".toolbar-widgets").append(i),i.slideDown("fast",function(){o.attr("disabled",!0),o.closest(".tlb-item-embed").addClass("is-executed"),y$(".tlb-logo-ad").hide()})),i.on("click change",".l-wgt-radio > .inp-radio",function(e){u!==undefined&&u.removeClass("is-selected"),this.checked&&(u=y$(this).closest(".l-wgt-option"),u.addClass("is-selected"),a?(i.find(".widget_code").val(y$(this).data("code")),i.find(".widget_code").attr("title",y$(this).data("code"))):(i.find(".widget_code").val(y$(this).data("code")+y$(this).data("track")),i.find(".widget_code").attr("title",y$(this).data("code")+y$(this).data("track"))),i.find(".widget_code").focus(),i.find(".widget_code").select())}),i.on("keyup",".l-wgt-custom-size > .l-widget-custom-input",y$.proxy(function(e){this.calculateCustomEmbed(e)},this)),i.find(".l-wgt-radio > .inp-radio:first").click(),this.toggleSuccess(i,!1),i.find(".campaign_selector").on("change",function(){var e="",t=this.value,n=y$(".l-frm-dialog .l-wgt-radio > .inp-radio");n.each(function(n){e=p(o,y$(this).val(),y$(this).closest(".l-wgt-option").find(".l-wgt-label").html(),y$(this).closest(".l-wgt-option").find(".l-wgt-desc").html(),y$(this).data("count"),t),y$(this).data("code",e.code),y$(this).is(":checked")&&i.find(".widget_code").val(e.code+e.track)}),t!=="0"?this.activateCopy(i,o):this.deactivateCopy(i)}),this.activateCopy(i,o)},activateCopy:function(e,t){var n=e.find(".widget_code");n.on("copy",y$.proxy(function(n){i.track(i.category.shareEmbed,"",1,i.extractResourceId(t.data("contentUrl"))),setTimeout(y$.proxy(function(){this.toggleSuccess(e,!0)},this),100)},this)),n.on("click",y$.proxy(function(e){n.select()},this)),n.focus(),n.select()},deactivateCopy:function(e){var t=e.find(".widget_code");t.off(),t.blur()},calculateCustomEmbed:function(e){var t,n=y$(f),r=n.find(".widget_code"),i,s,o=y$(e.currentTarget).siblings(".inp-radio"),u=y$(e.currentTarget);if(!a.isNumberInput(u))return!1;y$(".l-wgt-option").removeClass("is-selected"),u.hasClass("height")?(i=parseInt(u.val(),10),s=Math.round(i*c)||"",y$(".l-widget-custom-input.width").val(s)):(s=parseInt(u.val(),10),i=Math.round(s/c)||"",y$(".l-widget-custom-input.height").val(i)),t=h(s,i,o.data("srcUrl")),r.val(t),r.attr("title",t)},closeDialog:function(e){var t=y$(f),n=y$(l);t.closest(".toolbar-widgets").length===0?(this.hideOverlay(t),t.fadeOut("100",function(){t.closest(".l-dlg-overlay").remove()})):(t.remove(),n.attr("disabled",!1),n.closest(".tlb-item-embed").removeClass("is-executed"),y$(".tlb-logo-ad").show())},toggleSuccess:function(e,t){var n=e.find(".widget_code");t===!1?(e.find(".l-wgt-main").show(),e.find(".l-wgt-success").hide(),n.focus(),n.select()):(e.find(".l-wgt-main").hide(),e.find(".l-wgt-success").show(),n.blur())}});return new d}),define("text!t/util/email.smarty",[],function(){return'{**\n * Email Recipe/Restaurant/Collection Dialog.\n *\n * @param string $objectTitle Title of object we are sharing.\n * @param string $titleKey    Key for title of dialog.\n *}\n<div id="email_page" class="l-dialog l-dlg-modal l-dlg-main six l-widget">\n    <h3 class="l-dlg-header">\n        <button class="l-dlg-close icon icn-close-l" disabled="disabled"></button>\n        <span class="l-dlg-title">{h k=$titleKey}</span>\n    </h3>\n    <div class="l-dlg-body">\n        <form method="post" action="{u u=\'/api/web/latest/share/email\'}" novalidate="true">\n            <input type="hidden" id="content_id" name="contentId" value="">\n            <dl class="l-form l-frm-dialog">\n                <dd>\n                    <input type="email" id="email_to" name="to" placeholder="{h k=\'email.placeholder.to\'}" class="inp-full email" multiple>\n                </dd>\n                <dd>\n                    <input type="text" id="your_name" name="name" placeholder="{h k=\'email.placeholder.yourName\'}" class="inp-full">\n                </dd>\n                <dd>\n                    <input type="email" id="email_from" name="from" placeholder="{h k=\'email.placeholder.yourEmail\'}" class="inp-full email">\n                </dd>\n                <dd>\n                    <textarea name="comment" placeholder="{h k=\'shared.message\'}"></textarea>\n                </dd>\n                <dd class="l-frm-actions">\n                    <button class="btn-primary l-frm-submit" disabled="disabled">{h k=\'shared.send\'}</button>\n                </dd>\n            </dl>\n        </form>\n    </div>\n</div>\n'}),define("text!t/util/emailSuccess.smarty",[],function(){return"{**\n * Message to be shown when email for Recipe/Restaurant/Collection is sent.\n *}\n<div class=\"l-dlg-success l-form\">\n    <p>{h k='email.hasBeenSent'}</p>\n</div>\n"}),define("util/email",[],function(){"use strict";var e={regex:null};return e.validate=function(t){return t.match(e.regex)},e.findAddresses=function(t){var n=[],r=t.match(e.regex);while(r)n.push(r[0]),t=t.replace(r[0],""),r=t.match(e.regex);return n},e.initialize=function(){var t,n,r,i,s;t="[a-z0-9\\!\\#\\$\\%\\&\\'\\*\\+\\-\\cg=\\?\\^\\_\\`\\{\\|\\}\\~\\.]+",n='"(?:'+t+'|[\\(\\)\\,\\:\\;\\<\\>\\@\\[\\]]+|\\\\"|\\\\\\\\|)+"',r="\\([^)]+\\)",i="(?:"+t+"|"+n+"|"+r+")+",s="(?:[a-z0-9\\-\\.]+|\\[[a-z0-9\\.\\:]+\\]+)",e.regex=new RegExp(i+"@"+s,"i")},e.initialize(),e}),define("views/emailDialog",["i18n","template","text!t/error/input.smarty","text!t/util/email.smarty","text!t/util/emailSuccess.smarty","text!t/loading.smarty","util/email","util/eventTrack","util/http","views/dialog"],function(e,t,n,r,i,s,o,u,a,f){"use strict";var l="#email_page",c=".email_page",h=f.extend({dialogType:"share",initialize:function(){f.prototype.initialize.call(this,{dialogSelector:l,buttonSelector:c}),y$("body").on("click",l+" .l-dlg-close",y$.proxy(function(e){this.closeDialog()},this))},showDialog:function(e){var n={},i,s=y$(e.currentTarget);s.data("contentType")==="Collection"?n.titleKey="email.title.collection":s.data("contentNative")?(this.dialogType="shareVideo",n.titleKey="email.title.video"):n.titleKey="email.title.item",n.objectTitle=s.data("contentTitle"),i=y$(t.render(r,n)),y$("body").append(i),this.showOverlay(i),this.initForm(e)},initForm:function(e){var n=y$(l),r=n.find("form"),s=y$(e.currentTarget);n.on("submit","form",y$.proxy(function(e){var o,f;e.preventDefault(),this.clearErrors(),o=this.findErrors();if(!y$.isEmptyObject(o)){this.highlightErrors(o);return}y$("#content_id").val(s.data("contentId")),this.showBusy(!0),f=r.serialize(),f+="&type="+this.dialogType,a.post(r.prop("action"),f,y$.proxy(function(e){this.showBusy(!1);if(e.status!=="ok"){this.highlightErrors(e.errors);return}this.$success=y$(t.render(i)),r.hide(),n.find(".l-dlg-title").remove(),n.find(".l-dlg-body").append(this.$success),u.track(u.category.emailShare,"",1,u.extractResourceId(s.data("contentUrl")))},this))},this)),n.find("button").prop("disabled",!1)},clearErrors:function(){var e=y$(l);e.find(".has-error").removeClass("has-error"),e.find(".error").remove()},findErrors:function(){var e={name:"email.error.name"},t={},n=y$(l);return y$.each(e,y$.proxy(function(e,r){var i=n.find('input[name="'+e+'"]').val();i||(t[e]=r)},this)),n.find("input.email").each(y$.proxy(function(e,n){if(!n.value||!o.findAddresses(n.value))t[n.name]="email.error.invalid"},this)),t},highlightErrors:function(r){var i=y$(l),s;s=i.find("form"),y$.each(r,function(r,i){var o=y$(s[0].elements[r]),u=t.render(n,{html:e.html(i)});o.closest("dd").addClass("has-error"),o.after(y$(u))})},showBusy:function(e){var n,r=y$(l),i=y$(t.render(s));n=r.find(".l-frm-submit"),e===!1?(r.find(".l-dlg-disabled, .ntc-loading").remove(),n.show()):(r.append('<div class="l-dlg-disabled"></div>'),n.hide(),n.after(i))},closeDialog:function(){var e=y$(l);this.hideOverlay(e),e.closest(".l-dlg-overlay").remove()}});return new h}),define("views/socialShare",["util/eventTrack","views/widget/embedDialog","views/emailDialog"],function(e){"use strict";var t=!1,n=Backbone.View.extend({initSharing:function(){if(t)return;t=!0,y$("body").on("click",".toolbar .tlb-social, .nb-tlb-social",y$.proxy(function(e){var t,n=y$(e.currentTarget);t=y$(this).attr(n.data("provider")),typeof t=="function"&&t.call(this,e)},this))},facebook:function(t){var n,r=y$(t.currentTarget),i=encodeURIComponent(r.data("contentUrl")),s=encodeURIComponent(r.data("contentTitle")),o=575,u=400,a=(y$(window).width()-o)/2,f=(y$(window).height()-u)/2,l="https://www.facebook.com/sharer/sharer.php",c="status=1,width="+o+",height="+u+",top="+f+",left="+a;l+="?u="+i,l+="&t="+s,n=window.open(l,"facebook",c),n.focus(),e.social(e.socialNetwork.facebook,e.socialAction.share,e.extractResourceId(r.data("contentUrl")))},twitter:function(t){var n,r=50,i=25,s=y$(t.currentTarget),o=s.data("contentUrl"),u=s.data("contentTitle"),a=s.data("user"),f=s.data("handle"),l=575,c=400,h=(y$(window).width()-l)/2,p=(y$(window).height()-c)/2,d="https://twitter.com/intent/tweet",v="status=1,width="+l+",height="+c+",top="+p+",left="+h;u=u.length>r?u.substr(0,r-1)+"…":u,d+="?text="+encodeURIComponent(u),a!==""&&(a=a.length>i?a.substr(0,i-1)+"…":a,d+=" by "+encodeURIComponent(a)),d+=encodeURIComponent("\r\n"),d+="&url="+encodeURIComponent(o),d+="&via="+f,n=window.open(d,"twitter",v),n.focus(),e.social(e.socialNetwork.twitter,e.socialAction.share,e.extractResourceId(o))},pinterest:function(t){var n,r=y$(t.currentTarget),i=encodeURIComponent(r.data("contentUrl")),s=encodeURIComponent(r.data("contentTitle")),o=r.data("bgUrl"),u=575,a=400,f=(y$(window).width()-u)/2,l=(y$(window).height()-a)/2,c="https://www.pinterest.com/pin/create/button/",h="status=1,width="+u+",height="+a+",top="+l+",left="+f;c+="?url="+i,c+="&media="+o,c+="&description="+s,n=window.open(c,"pinterest",h),n.focus(),e.social(e.socialNetwork.pinterest,e.socialAction.share,e.extractResourceId(r.data("contentUrl")))}});return new n}),define("views/home/newsblockToolbar",["views/socialShare"],function(e){"use strict";var t={},n={};return t.initialize=function(){e.initSharing(),y$("body").on("click",".nb-tlb-share a",t.showShareButtons),y$("body").on("click",".nb-tlb-close",t.hideShareButtons)},t.showShareButtons=function(e){e.preventDefault();var t=y$(e.currentTarget).closest(".nb-toolbar");t.find(".nb-tlb-share").hide(),t.find(".nb-tlb-share-panel").removeClass("is-hidden").addClass("is-open")},t.hideShareButtons=function(e){var t=y$(e.currentTarget).closest(".nb-toolbar");t.find(".nb-tlb-share").show(),t.find(".nb-tlb-share-panel").addClass("is-hidden").removeClass("is-open")},t.initialize(),n}),define("views/home/twoColumnNews",["views/discover/discover","text!t/twoColumnNews/newsblock.smarty","views/collection/publishDialog","views/adapt","util/video","util/inView","util/eventTrack","util/sticky","views/collection/bannerDialog","views/home/peopleToFollow","views/home/closeFollowCta","views/follow","views/collection/trendingContent","views/home/hubActionsMenu","views/home/newsblockToolbar"],function(e,t,n,r,i,s,o){"use strict";var u=Backbone.View.extend({initialize:function(){var s=y$(".l-waterfall"),o={$container:s,lastId:s.data("lastid"),lastTime:s.data("time"),params:{type:s.data("type"),filter:s.data("filter")},boxTemplate:t,useMasonry:!0,masonryItemSelector:".newsblock,.bnd-follow-cta",afterFetch:this.setUpVideoTracking},u=s.data("id"),a=s.data("url"),f=s.data("excludeMembers");r.showAll(),u&&(o.params.id=u);if(!a)throw new Error("Newsfeed url was not found.");o.baseEndpoint=a,f&&(o.params.exclude=f),this.$container=(new e).init(o),n.markAsPublishedShown(y$(".banner").find(n.publishSuccessMsg)),i.initialize(),this.setUpVideoTracking(y$(".newsblock"))},setUpVideoTracking:function(e){e.filter('[data-is-native="1"]').each(function(){var e=y$(this),t=e.data("contentUrl");s.addItem(e,function(){o.trackVideo(o.video.action.load,o.extractResourceId(t,!0),1)},!0)})}});return new u});