(function(e){function t(e,n,r){var i=e||"en",s;if(n)t.locale[i]=n;else{while(i&&!t.locale.hasOwnProperty(i))i=i.replace(/[-_]?[^-_]*$/,"");i||(i=e.replace(/[-_].*$/,""),t.loadLocale(i))}this.lc=i,this.globalName=r||"i18n"}"locale"in t||(t.locale={}),t.loadLocale=function(e){try{var n=require("path").join(__dirname,"locale",e+".js"),r=(""+require("fs").readFileSync(n)).match(/{[^]*}/);if(!r)throw"no function found in file '"+n+"'";t.locale[e]="function(n)"+r}catch(i){if(e!="en")throw i.message="Locale "+e+" could not be loaded: "+i.message,i;t.locale[e]='function(n){return n===1?"one":"other"}'}},t.prototype.functions=function(){var e=[];for(var n in t.locale)t.locale.hasOwnProperty(n)&&e.push(JSON.stringify(n)+":"+t.locale[n].toString().trim());return"{lc:{"+e.join(",")+"},\n"+'c:function(d,k){if(!d)throw new Error("MessageFormat: Data required for \'"+k+"\'.")},\n'+'n:function(d,k,o){if(isNaN(d[k]))throw new Error("MessageFormat: \'"+k+"\' isn\'t a number.");return d[k]-(o||0)},\n'+"v:function(d,k){"+this.globalName+".c(d,k);return d[k]},\n"+"p:function(d,k,o,l,p){"+this.globalName+".c(d,k);return d[k] in p?p[d[k]]:(k="+this.globalName+".lc[l](d[k]-o),k in p?p[k]:p.other)},\n"+"s:function(d,k,p){"+this.globalName+".c(d,k);return d[k] in p?p[d[k]]:p.other}}"};var n=function(){function e(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}function t(e,t,n,r,i,s){this.message=e,this.expected=t,this.found=n,this.offset=r,this.line=i,this.column=s,this.name="SyntaxError"}function n(e){function St(){return e.substring(vt,dt)}function xt(){return vt}function Tt(){return Lt(vt).line}function Nt(){return Lt(vt).column}function Ct(e){throw Ot(null,[{type:"other",description:e}],vt)}function kt(e){throw Ot(e,null,vt)}function Lt(t){function n(t,n,r){var i,s;for(i=n;i<r;i++)s=e.charAt(i),s==="\n"?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):s==="\r"||s==="\u2028"||s==="\u2029"?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}return mt!==t&&(mt>t&&(mt=0,gt={line:1,column:1,seenCR:!1}),n(gt,mt,t),mt=t),gt}function At(e){if(dt<yt)return;dt>yt&&(yt=dt,bt=[]),bt.push(e)}function Ot(n,r,i){function s(e){var t=1;e.sort(function(e,t){return e.description<t.description?-1:e.description>t.description?1:0});while(t<e.length)e[t-1]===e[t]?e.splice(t,1):t++}function o(e,t){function n(e){function t(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(e){return"\\x0"+t(e)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(e){return"\\x"+t(e)}).replace(/[\u0180-\u0FFF]/g,function(e){return"\\u0"+t(e)}).replace(/[\u1080-\uFFFF]/g,function(e){return"\\u"+t(e)})}var r=new Array(e.length),i,s,o;for(o=0;o<e.length;o++)r[o]=e[o].description;return i=e.length>1?r.slice(0,-1).join(", ")+" or "+r[e.length-1]:r[0],s=t?'"'+n(t)+'"':"end of input","Expected "+i+" but "+s+" found."}var u=Lt(i),a=i<e.length?e.charAt(i):null;return r!==null&&s(r),new t(n!==null?n:o(r,a),r,a,i,u.line,u.column)}function Mt(){var e,t;return e=dt,t=_t(),t!==r&&(vt=e,t=o(t)),e=t,e}function _t(){var e,t,n,i;e=dt,t=zt();if(t!==r){n=[],i=Dt();while(i!==r)n.push(i),i=Dt();n!==r?(vt=e,t=f(t,n),e=t):(dt=e,e=u)}else dt=e,e=u;return e}function Dt(){var t,n,i,s,o,a,f;return t=dt,e.charCodeAt(dt)===123?(n=l,dt++):(n=r,wt===0&&At(c)),n!==r?(i=Kt(),i!==r?(s=Pt(),s!==r?(o=Kt(),o!==r?(e.charCodeAt(dt)===125?(a=h,dt++):(a=r,wt===0&&At(p)),a!==r?(f=zt(),f!==r?(vt=t,n=d(s,f),t=n):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u),t}function Pt(){var t,n,i,s,o;return t=dt,n=Wt(),n!==r?(i=dt,e.charCodeAt(dt)===44?(s=m,dt++):(s=r,wt===0&&At(g)),s!==r?(o=Ht(),o!==r?(s=[s,o],i=s):(dt=i,i=u)):(dt=i,i=u),i===r&&(i=v),i!==r?(vt=t,n=y(n,i),t=n):(dt=t,t=u)):(dt=t,t=u),t}function Ht(){var t,n,i,s,o,a,f,l;return t=dt,n=Kt(),n!==r?(e.substr(dt,6)===b?(i=b,dt+=6):(i=r,wt===0&&At(w)),i!==r?(s=Kt(),s!==r?(e.charCodeAt(dt)===44?(o=m,dt++):(o=r,wt===0&&At(g)),o!==r?(a=Kt(),a!==r?(f=Bt(),f!==r?(l=Kt(),l!==r?(vt=t,n=E(i,f),t=n):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u),t===r&&(t=dt,n=Kt(),n!==r?(e.substr(dt,6)===S?(i=S,dt+=6):(i=r,wt===0&&At(x)),i!==r?(s=Kt(),s!==r?(e.charCodeAt(dt)===44?(o=m,dt++):(o=r,wt===0&&At(g)),o!==r?(a=Kt(),a!==r?(f=jt(),f!==r?(l=Kt(),l!==r?(vt=t,n=E(i,f),t=n):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)),t}function Bt(){var e,t;return e=dt,t=Ft(),t!==r&&(vt=e,t=T(t)),e=t,e}function jt(){var e,t;return e=dt,t=qt(),t!==r&&(vt=e,t=N(t)),e=t,e}function Ft(){var e,t,n,i;e=dt,t=It(),t===r&&(t=v);if(t!==r){n=[],i=Rt();while(i!==r)n.push(i),i=Rt();n!==r?(vt=e,t=C(t,n),e=t):(dt=e,e=u)}else dt=e,e=u;return e}function It(){var t,n,i,s,o,a,f,l;return t=dt,n=Kt(),n!==r?(e.substr(dt,6)===k?(i=k,dt+=6):(i=r,wt===0&&At(L)),i!==r?(s=Kt(),s!==r?(e.charCodeAt(dt)===58?(o=A,dt++):(o=r,wt===0&&At(O)),o!==r?(a=Kt(),a!==r?(f=$t(),f!==r?(l=Kt(),l!==r?(vt=t,n=M(f),t=n):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u),t}function qt(){var e,t,n;e=dt,t=[],n=Rt();while(n!==r)t.push(n),n=Rt();return t!==r&&(vt=e,t=_(t)),e=t,e}function Rt(){var t,n,i,s,o,a,f,d,v;return t=dt,n=Kt(),n!==r?(i=Ut(),i!==r?(s=Kt(),s!==r?(e.charCodeAt(dt)===123?(o=l,dt++):(o=r,wt===0&&At(c)),o!==r?(a=Kt(),a!==r?(f=_t(),f!==r?(d=Kt(),d!==r?(e.charCodeAt(dt)===125?(v=h,dt++):(v=r,wt===0&&At(p)),v!==r?(vt=t,n=D(i,f),t=n):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u),t}function Ut(){var t,n,i;return t=dt,n=Wt(),n!==r&&(vt=t,n=P(n)),t=n,t===r&&(t=dt,e.charCodeAt(dt)===61?(n=H,dt++):(n=r,wt===0&&At(B)),n!==r?(i=$t(),i!==r?(vt=t,n=M(i),t=n):(dt=t,t=u)):(dt=t,t=u)),t}function zt(){var e,t,n,i,s,o,a;e=dt,t=Kt();if(t!==r){n=[],i=dt,s=Kt(),s!==r?(o=Xt(),o!==r?(a=Kt(),a!==r?(s=[s,o,a],i=s):(dt=i,i=u)):(dt=i,i=u)):(dt=i,i=u);while(i!==r)n.push(i),i=dt,s=Kt(),s!==r?(o=Xt(),o!==r?(a=Kt(),a!==r?(s=[s,o,a],i=s):(dt=i,i=u)):(dt=i,i=u)):(dt=i,i=u);n!==r?(vt=e,t=j(t,n),e=t):(dt=e,e=u)}else dt=e,e=u;return e}function Wt(){var t,n,i,s,o;t=dt,n=Kt();if(n!==r){F.test(e.charAt(dt))?(i=e.charAt(dt),dt++):(i=r,wt===0&&At(I));if(i!==r){s=[],q.test(e.charAt(dt))?(o=e.charAt(dt),dt++):(o=r,wt===0&&At(R));while(o!==r)s.push(o),q.test(e.charAt(dt))?(o=e.charAt(dt),dt++):(o=r,wt===0&&At(R));s!==r?(o=Kt(),o!==r?(vt=t,n=U(i,s),t=n):(dt=t,t=u)):(dt=t,t=u)}else dt=t,t=u}else dt=t,t=u;return t}function Xt(){var e,t,n;e=dt,t=[],n=Vt();if(n!==r)while(n!==r)t.push(n),n=Vt();else t=u;return t!==r&&(vt=e,t=z(t)),e=t,e}function Vt(){var t,n,i,s,o,a;return t=dt,W.test(e.charAt(dt))?(n=e.charAt(dt),dt++):(n=r,wt===0&&At(X)),n!==r&&(vt=t,n=V(n)),t=n,t===r&&(t=dt,e.substr(dt,2)===$?(n=$,dt+=2):(n=r,wt===0&&At(J)),n!==r&&(vt=t,n=K()),t=n,t===r&&(t=dt,e.substr(dt,2)===Q?(n=Q,dt+=2):(n=r,wt===0&&At(G)),n!==r&&(vt=t,n=Y()),t=n,t===r&&(t=dt,e.substr(dt,2)===Z?(n=Z,dt+=2):(n=r,wt===0&&At(et)),n!==r&&(vt=t,n=tt()),t=n,t===r&&(t=dt,e.substr(dt,2)===nt?(n=nt,dt+=2):(n=r,wt===0&&At(rt)),n!==r?(i=Jt(),i!==r?(s=Jt(),s!==r?(o=Jt(),o!==r?(a=Jt(),a!==r?(vt=t,n=it(i,s,o,a),t=n):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u)):(dt=t,t=u))))),t}function $t(){var t,n,i;t=dt,n=[],st.test(e.charAt(dt))?(i=e.charAt(dt),dt++):(i=r,wt===0&&At(ot));if(i!==r)while(i!==r)n.push(i),st.test(e.charAt(dt))?(i=e.charAt(dt),dt++):(i=r,wt===0&&At(ot));else n=u;return n!==r&&(vt=t,n=ut(n)),t=n,t}function Jt(){var t;return at.test(e.charAt(dt))?(t=e.charAt(dt),dt++):(t=r,wt===0&&At(ft)),t}function Kt(){var e,t,n;wt++,e=dt,t=[],n=Qt();while(n!==r)t.push(n),n=Qt();return t!==r&&(vt=e,t=ct(t)),e=t,wt--,e===r&&(t=r,wt===0&&At(lt)),e}function Qt(){var t;return ht.test(e.charAt(dt))?(t=e.charAt(dt),dt++):(t=r,wt===0&&At(pt)),t}var n=arguments.length>1?arguments[1]:{},r={},i={start:Mt},s=Mt,o=function(e){return{type:"program",program:e}},u=r,a=[],f=function(e,t){var n=[];e&&e.val&&n.push(e);for(var r in t)t.hasOwnProperty(r)&&n.push(t[r]);return{type:"messageFormatPattern",statements:n}},l="{",c={type:"literal",value:"{",description:'"{"'},h="}",p={type:"literal",value:"}",description:'"}"'},d=function(e,t){var n=[];return e&&n.push(e),t&&t.val&&n.push(t),{type:"messageFormatPatternRight",statements:n}},v=null,m=",",g={type:"literal",value:",",description:'","'},y=function(e,t){var n={type:"messageFormatElement",argumentIndex:e};return t&&t.length?n.elementFormat=t[1]:n.output=!0,n},b="plural",w={type:"literal",value:"plural",description:'"plural"'},E=function(e,t){return{type:"elementFormat",key:e,val:t.val}},S="select",x={type:"literal",value:"select",description:'"select"'},T=function(e){return{type:"pluralStyle",val:e}},N=function(e){return{type:"selectStyle",val:e}},C=function(e,t){var n={type:"pluralFormatPattern",pluralForms:t};return e?n.offset=e:n.offset=0,n},k="offset",L={type:"literal",value:"offset",description:'"offset"'},A=":",O={type:"literal",value:":",description:'":"'},M=function(e){return e},_=function(e){return{type:"selectFormatPattern",pluralForms:e}},D=function(e,t){return{type:"pluralForms",key:e,val:t}},P=function(e){return e},H="=",B={type:"literal",value:"=",description:'"="'},j=function(e,t){var n=[];for(var r=0;r<t.length;++r)for(var i=0;i<t[r].length;++i)n.push(t[r][i]);return{type:"string",val:e+n.join("")}},F=/^[0-9a-zA-Z$_]/,I={type:"class",value:"[0-9a-zA-Z$_]",description:"[0-9a-zA-Z$_]"},q=/^[^ \t\n\r,.+={}]/,R={type:"class",value:"[^ \\t\\n\\r,.+={}]",description:"[^ \\t\\n\\r,.+={}]"},U=function(e,t){return e+(t?t.join(""):"")},z=function(e){return e.join("")},W=/^[^{}\\\0-\x1F \t\n\r]/,X={type:"class",value:"[^{}\\\\\\0-\\x1F \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F \\t\\n\\r]"},V=function(e){return e},$="\\#",J={type:"literal",value:"\\#",description:'"\\\\#"'},K=function(){return"\\#"},Q="\\{",G={type:"literal",value:"\\{",description:'"\\\\{"'},Y=function(){return"{"},Z="\\}",et={type:"literal",value:"\\}",description:'"\\\\}"'},tt=function(){return"}"},nt="\\u",rt={type:"literal",value:"\\u",description:'"\\\\u"'},it=function(e,t,n,r){return String.fromCharCode(parseInt("0x"+e+t+n+r))},st=/^[0-9]/,ot={type:"class",value:"[0-9]",description:"[0-9]"},ut=function(e){return parseInt(e.join(""),10)},at=/^[0-9a-fA-F]/,ft={type:"class",value:"[0-9a-fA-F]",description:"[0-9a-fA-F]"},lt={type:"other",description:"whitespace"},ct=function(e){return e.join("")},ht=/^[ \t\n\r]/,pt={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},dt=0,vt=0,mt=0,gt={line:1,column:1,seenCR:!1},yt=0,bt=[],wt=0,Et;if("startRule"in n){if(!(n.startRule in i))throw new Error("Can't start parsing from rule \""+n.startRule+'".');s=i[n.startRule]}Et=s();if(Et!==r&&dt===e.length)return Et;throw Et!==r&&dt<e.length&&At({type:"end",description:"end of input"}),Ot(null,bt,yt)}return e(t,Error),{SyntaxError:t,parse:n}}();t.prototype.parse=function(){return n.parse.apply(n,arguments)},t.prototype.precompile=function(e){function r(e){var t=JSON.parse(JSON.stringify(e));return t.pf_count++,t}function i(e,s){s=s||{keys:{},offset:{}};var o=[],u,a;switch(e.type){case"program":return i(e.program);case"messageFormatPattern":for(u=0;u<e.statements.length;++u)o.push(i(e.statements[u],s));return a=o.join("+")||'""',s.pf_count?a:"function(d){return "+a+"}";case"messageFormatPatternRight":for(u=0;u<e.statements.length;++u)o.push(i(e.statements[u],s));return o.join("+");case"messageFormatElement":return s.pf_count=s.pf_count||0,e.output?t.globalName+'.v(d,"'+e.argumentIndex+'")':(s.keys[s.pf_count]='"'+e.argumentIndex+'"',i(e.elementFormat,s));case"elementFormat":if(e.key==="select")return t.globalName+".s(d,"+s.keys[s.pf_count]+","+i(e.val,s)+")";if(e.key==="plural")return s.offset[s.pf_count||0]=e.val.offset||0,t.globalName+".p(d,"+s.keys[s.pf_count]+","+(s.offset[s.pf_count]||0)+',"'+t.lc+'",'+i(e.val,s)+")";return"";case"pluralFormatPattern":s.pf_count=s.pf_count||0,n=!0;for(u=0;u<e.pluralForms.length;++u)e.pluralForms[u].key==="other"&&(n=!1),o.push('"'+e.pluralForms[u].key+'":'+i(e.pluralForms[u].val,r(s)));if(n)throw new Error("No 'other' form found in pluralFormatPattern "+s.pf_count);return"{"+o.join(",")+"}";case"selectFormatPattern":s.pf_count=s.pf_count||0,s.offset[s.pf_count]=0,n=!0;for(u=0;u<e.pluralForms.length;++u)e.pluralForms[u].key==="other"&&(n=!1),o.push('"'+e.pluralForms[u].key+'":'+i(e.pluralForms[u].val,r(s)));if(n)throw new Error("No 'other' form found in selectFormatPattern "+s.pf_count);return"{"+o.join(",")+"}";case"string":a='"'+(e.val||"").replace(/\n/g,"\\n").replace(/"/g,'\\"')+'"';if(s.pf_count){var f=s.offset[s.pf_count-1];a=a.replace(/(^|[^\\])#/g,'$1"+'+t.globalName+".n(d,"+s.keys[s.pf_count-1]+(f?","+f:"")+')+"'),a=a.replace(/^""\+/,"").replace(/\+""$/,"")}return a;default:throw new Error("Bad AST type: "+e.type)}}var t=this,n=!1;return i(e)},t.prototype.compile=function(e){return(new Function("this['"+this.globalName+"']="+this.functions()+";"+"return "+this.precompile(this.parse(e))))()},t.prototype.precompileObject=function(e){var t=[];for(var n in e)t.push(JSON.stringify(n)+":"+this.precompile(this.parse(e[n])));return"{\n"+t.join(",\n")+"}"},typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=t),exports.MessageFormat=t):typeof define=="function"&&define.amd?define("MessageFormat",[],function(){return t}):e.MessageFormat=t})(this),define("text",["module"],function(e){"use strict";var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.14",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i[0]==="﻿"&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!catalogs/admin.json",[],function(){return'{\n    "admin.allExistingInvites": "All Existing Invites",\n    "admin.api.title": "Api Reference",\n    "admin.auditLog.action": "Action",\n    "admin.auditLog.allActions": "All Actions",\n    "admin.auditLog.apply": "Apply",\n    "admin.auditLog.category": "Category",\n    "admin.auditLog.collection": "Story",\n    "admin.auditLog.collectionPlaceholder": "Enter a URL, slug or content id",\n    "admin.auditLog.content": "Content",\n    "admin.auditLog.contentDeleted": "Content was deleted.",\n    "admin.auditLog.contentId": "ContentId",\n    "admin.auditLog.contentType": "Content Type",\n    "admin.auditLog.createdHub": "Created hub",\n    "admin.auditLog.date": "Date",\n    "admin.auditLog.deletedHub": "Deleted hub",\n    "admin.auditLog.deletedStory": "Deleted story",\n    "admin.auditLog.deleteItem": "Delete Item",\n    "admin.auditLog.featured": "Featured",\n    "admin.auditLog.featuredOn": "Featured on",\n    "admin.auditLog.filters": "Filters",\n    "admin.auditLog.hero": "Hero",\n    "admin.auditLog.heroedOn": "Heroed on",\n    "admin.auditLog.impersonatedBy": "Impersonated By",\n    "admin.auditLog.item": "Item",\n    "admin.auditLog.itemAddedToStory": "Item added to story",\n    "admin.auditLog.itemRemovedFromStory": "Item removed from story",\n    "admin.auditLog.language": "Language",\n    "admin.auditLog.method": "Method",\n    "admin.auditLog.ownerChanged": "Owner changed",\n    "admin.auditLog.publishedHub": "Published hub",\n    "admin.auditLog.publishedStory": "Published story",\n    "admin.auditLog.title": "Audit Log",\n    "admin.auditLog.trustedUser": " Trusted User",\n    "admin.auditLog.unfeatured": "Unfeatured",\n    "admin.auditLog.unhero": "Unhero",\n    "admin.auditLog.untrustedUser": "Untrusted User",\n    "admin.auditLog.unverified": "Unverified",\n    "admin.auditLog.updatedBackgroundPhoto": "Updated background photo",\n    "admin.auditLog.updatedCategory": "Updated category",\n    "admin.auditLog.updatedItemPhoto": "Updated item photo",\n    "admin.auditLog.updatedLanguage": "Updated language",\n    "admin.auditLog.user": "User",\n    "admin.auditLog.userDeleted": "(user deleted)",\n    "admin.auditLog.verified": "Verified",\n    "admin.banner.notification.verified": "Verified",\n    "admin.cannotFindUser": "Cannot find this user.",\n    "admin.cannotIdentifyTheseObjects": "Cannot identify these objects:",\n    "admin.cannotIdentifyTheseRecipes": "Cannot identify these recipes or collections or core objects:",\n    "admin.changedOwnershipOfX": "Changed ownership of {COUNT} collections/core objects.",\n    "admin.changeOwnership": "Change Ownership",\n    "admin.collect.invalidCollectionType": "Collection type must be either \'story\' or \'hub\'.",\n    "admin.collect.unexpectedCollectionType": "The collection does not have the expected collectionType.",\n    "admin.collectionNameExists": "The user already has collections with the same name as the following. Please rename or delete them first.",\n    "admin.config.ads.storyTile.first.description": "Where to show the first ad on a story page. If this is 4, then an ad will appear after the 4th item.",\n    "admin.config.ads.storyTile.second.description": "Where to show the second ad on a story page. If this is 10, then an ad will appear after the 10th item.",\n    "admin.config.assetCacheBuster": "Value to append to JS/CSS urls to bust their caches after deployments (to fix mixed-mode issues).",\n    "admin.config.caviarJSURL": "Caviar JS URL.",\n    "admin.config.caviarVersion": "Caviar verion.",\n    "admin.config.chaining.promoted.delay": "Delays the showing of the first chained video/story by this many seconds to give the promoted video/story a chance to load.",\n    "admin.config.hydraApiJsUrl": "This will allow us to test and ultimately change the version we use for our internal Infra tools without having to do a hotfix or wait for a release.",\n    "admin.config.hydraQueryTimeout": "Timeout for hydra db queries. Only use for DEV servers. Keep zero for production.",\n    "admin.config.infiniteScroll.threshold": "Threshold of the number of pixels left below or above (reverse infinite scroll) to fire off a new content request.",\n    "admin.config.maxAgeInDays": "Max number of days since the story/video was featured or verified. If it exceeds this maximum, it won\'t appear in chained stories/videos.",\n    "admin.config.nativeVideos.chaining.probability.description": "Probability of seeing a native video as the next item in the story/video chain.",\n    "admin.config.nativeVideos.relatedVideos.count": "Max number of videos to show in related videos.",\n    "admin.config.nativeVideos.relatedVideos.min": "Min number of videos to show in related videos.",\n    "admin.config.ptfCardTimeout.description": "X milliseconds after which the executed people-to-follow disappears itself.",\n    "admin.config.quackFireVersion":"Quack fire version.",\n    "admin.config.socialCount.keys": "Keys to sum over to generate the social count for a collection.",\n    "admin.config.socialCount.threshold": "Threshold below which the social count will not be displayed for a story.",\n    "admin.config.title": "Config",\n    "admin.config.unpublishedCollection.interval": "Users will recieve notifications after this much of interval in minutes for unpublished collections.",\n    "admin.config.unpublishedCollection.threshold": "Users will be notified if they have unpublished collections that have not been updated in this many minutes.",\n    "admin.config.viewCount.threshold": "Threshold below which the view count will not be displayed for a story.",\n    "admin.confirm.placeholder": "Enter new owner\'s user ID",\n    "admin.confirm.transferId": " to: {INPUT}<br><br>",\n    "admin.confirm.userHas": "- Delete {COLLECTIONS} stories<br> - Abandon {FOLLOWERS} followers<br> - Reassign {COLLECTION_MEMBERS} items",\n    "admin.confirmBan": "Are you sure you want to ban this user? This will:<br>- Prevent this user from logging in<br>- Flag this user as problematic",\n    "admin.confirmDeactive": "Are you sure you want to deactivate this user? This will:",\n    "admin.confirmDelete": "Are you sure you want to delete this user? This will:<br>- Delete all login credentials and social media connections",\n    "admin.coreobject.confirm.delete": "The object has been collected into below stories. <br>Are you sure you want to delete this object?",\n    "admin.coreobject.invalid.object.description": "These objects are not core objects",\n    "admin.coreobject.invalid.object.title": "Cannot identify these objects",\n    "admin.createInvites": "Create Invites",\n    "admin.delete": "Delete",\n    "admin.deletedX": "Started background deletion of {COUNT} objects.",\n    "admin.deleteObjects": "Delete Core Objects",\n    "admin.dynamicCollection.frequency.msg": "Frequency number of how often the stories appear",\n    "admin.dynamicCollection.startSlot.msg": "Start slot number where the first story will appear",\n    "admin.dynamicCollections": "Dynamic Stories",\n    "admin.embed.description": "Paste embed code here",\n    "admin.embed.output": "Embed Output",\n    "admin.embed.submit.button": "Submit",\n    "admin.embed.title": "Embed",\n    "admin.error": "Error",\n    "admin.error.ban": "Encountered an error while banning user.",\n    "admin.error.deactivate": "Encountered an error while deactivating user.",\n    "admin.error.delete": "Encountered an error while deleting user.",\n    "admin.error.request": "An error was encountered while making this request.",\n    "admin.export.dsvFileAll": "Foodie_Users_all_users.dsv",\n    "admin.export.dsvFileEnd": "Foodie_Users_{END_DATE}.dsv",\n    "admin.export.dsvFileStart": "Foodie_Users_{START_DATE}_today.dsv",\n    "admin.export.dsvFileStartEnd": "Foodie_Users_{START_DATE}_{END_DATE}.dsv",\n    "admin.export.dsvFileTitle": "Name{DELIMITER}Email{DELIMITER}Slug{DELIMITER}Registration Date\\n",\n    "admin.exportUsers": "Export Users",\n    "admin.featureFlag.config.disabled": "Disabled by config",\n    "admin.featureFlag.config.enabled": "Enabled by config",\n    "admin.featureFlag.description": "Description",\n    "admin.featureFlag.details": "Use these temporary controls to enable features that in currently in development. These feature flags will be removed after new featured is available to all users. For feature controls dedicated to troubleshooting issues, see <a {HREF_ATTRS}>Troubleshooting Feature Controls</a>.<br>Select the user status that has access to the specified feature. Features that have been explicitly enabled or disabled by config file cannot be managed here.",\n    "admin.featureFlag.feature": "Feature",\n    "admin.featureFlag.label.adsOnFirstTwoStories": "Display ads on the first two stories, not just the first one: masthead/banner, feed x 2 (if cannesStoryFeedAds is enabled)",\n    "admin.featureFlag.label.ajaxNewsfeed": "Use AJAX to load newsfeed pages.",\n    "admin.featureFlag.label.akamaiCachingHack": "Prefix some API URLs with /c/ because Akamai isn\'t caching the non-/c/ URLs for some reason. See MODE-37197.",\n    "admin.featureFlag.label.browserExtension": "Allow download of browser extension.",\n    "admin.featureFlag.label.cannesAds": "Display ads on Glam",\n    "admin.featureFlag.label.cannesStoryFeedAds": "Display ads in the story feed.",\n    "admin.featureFlag.label.deferJs": "Enable defer for render-blocking scripts",\n    "admin.featureFlag.label.disableHydraMetricsQueries": "Prevent queries to hydra_metrics_trending_by_source. This will cause social-energy and page-view counts to disappear.",\n    "admin.featureFlag.label.disableIsCollectedQueries": "Prevent queries in isCollected(). This will cause the + button to not be bold if you collected an object.",\n    "admin.featureFlag.label.disableLogin": "<strong>Do not turn on flag until you have approval from RAJ.</strong> This flag will log out logged in user and new/exisiting users will not able to login. They will get friendly message about it.",\n    "admin.featureFlag.label.doNotStoreHydraFeedResultsInYokoCache": "Always hit Hydra - don\'t cache its results. If you want caching, use /c at the start of Hydra feed urls for Akamai caching.",\n    "admin.featureFlag.label.enableGAObjectViewEvent": "Enables GA object view event.",\n    "admin.featureFlag.label.enableHttpsForBlobs": "Enables https for caviar urls.",\n    "admin.featureFlag.label.fixActivityEventPrivacy": "Heeds ActivityEvent privacy when choosing which story to link an object to. Do not turn this on until MODE-36824 is run.",\n    "admin.featureFlag.label.getAdaptVariableRulesFromListeria": "Get the rules for adapt variables from Hydra Listeria.",\n    "admin.featureFlag.label.hydraFeedForCategoryPage": "A new category page without action labels, and based on a Hydra feed that returns stories and videos only.",\n    "admin.featureFlag.label.hydraFeedForChaining": "Whether to use a Hydra feed instead of Bacon to determine which chained story/video to show next.",\n    "admin.featureFlag.label.i18nUILanguage": "Whether to show I18N language-related UI elements. Don\'t turn this on before turning on i18nDatabase.",\n    "admin.featureFlag.label.insightsTab": "Show Insights tab on the users profile page.",\n    "admin.featureFlag.label.nativeVideoFeed": "Whether to show native video events in feeds.",\n    "admin.featureFlag.label.profileVideosTab": "Display user\'s videos on profile page",\n    "admin.featureFlag.label.promoted": "Show promoted videos and stories among the chained stories and videos.",\n    "admin.featureFlag.label.removeGoogleTagManager": "Remove Google Tag Manager.",\n    "admin.featureFlag.label.setCollectionCategory": "Whether admins/product/editors can change the category of a story or hub. Before turning this on, make sure that Yoko is notifying Hydra about story/hub category changes.",\n    "admin.featureFlag.label.setCollectionLanguage": "Whether admins/product/editors can change the language of a story or hub. Before turning this on, make sure that Yoko is notifying Hydra about story/hub language changes.",\n    "admin.featureFlag.label.setGaLocation": "Whether to allow the Google Analytics location (current URL) to be set explicitly. This would just be done on the channel pages for now. It would force /GLAM to be /glam for Google Analytics.",\n    "admin.featureFlag.label.setObjectCategory": "Whether admins/product/editors can change the category of an object. Before turning this on, make sure that Yoko is notifying Hydra about object category changes.",\n    "admin.featureFlag.label.setObjectLanguage": "Whether admins/product/editors can change the language of an object. Before turning this on, make sure that Yoko is notifying Hydra about object language changes.",\n    "admin.featureFlag.label.showBaseline": "Show only baseline content. If enabled no external calls would be made.",\n    "admin.featureFlag.label.socialShareStoryBottom": "Display the lower social share buttons",\n    "admin.featureFlag.label.storyCommentingBottom": "Enabled commenting on the BOTTOM of story pages.",\n    "admin.featureFlag.label.trusteBanner": "javascript provided by Truste which is a 3rd party company that we work with to ensure we\'re in compliance with various cookie and data protection laws around the world. The script will create a banner at the top of Glam.com that appears if you come from certain countries (mostly in the EU) that will allow users to set their cookie preferences.",\n    "admin.featureFlag.label.trusteBannerTest": "Requests the test Truste JS instead of the production JS (uses the country=gb param). You must also have the above Truste Banner turned on for this to work.",\n    "admin.featureFlag.label.useDrawer": "Use drawer instead of dialog box.",\n    "admin.featureFlag.label.v1NewsfeedSpecificEvents": "Use new event data in v1 newsfeed end points but with the current format and eventType values.",\n    "admin.featureFlag.label.videoPlayViaCaviar": "Enable video play via Caviar JS(To get most suitable video).",\n    "admin.featureFlag.label.videoShareUrl": "Enable video share url.",\n    "admin.featureFlag.label.videoUpload": "Enable video upload.(Do not turn it on before checking with Brian)",\n    "admin.featureFlag.label.yoko35275Check": "Include js on signed out pages to refresh the page if the user is actually signed in.",\n    "admin.featureFlag.label.yoko35547PlayCount": "Include hydra metrics and play count on core objects in story details and category pages.",\n    "admin.featureFlag.rule.allUsers": "Enabled For All Users",\n    "admin.featureFlag.rule.byRole": "Enabled For Roles",\n    "admin.featureFlag.rule.defaultDisabled": "Use default (Disabled)",\n    "admin.featureFlag.rule.defaultEnabled": "Use default (Enabled)",\n    "admin.featureFlag.rule.title": "Config Rule",\n    "admin.featureFlag.title": "Temporary Feature Controls",\n    "admin.featureFlag.troubleshooting.details": "Use these controls to enable features for troubleshooting or for specific purposes. These feature flags will always remain available. For feature controls dedicated to new feature rollout, see Title: <a {HREF_ATTRS}>Temporary Feature Controls</a>.<br>Select the user status that has access to the specified feature. Features that have been explicitly enabled or disabled by config file cannot be managed here.",\n    "admin.featureFlag.troubleshooting.title": "Troubleshooting Feature Controls",\n    "admin.group.success.add": "Successfully added {NAME} to the “{GROUP}” group.",\n    "admin.group.success.remove": "Successfully removed {NAME} from the “{GROUP}” group.",\n    "admin.hydraApiJsUrl.version": "Hydra end point details with version (You can edit version)",\n    "admin.hydraApiJsUrl.wait": "Specify a period of seconds to wait after page load before running content extraction.",\n    "admin.hydracontentextractor.description": "Under this tag, user able to paste any url to get response from Hydra.js",\n    "admin.hydracontentextractor.minifiedjs": "Use Minified JS",\n    "admin.hydracontentextractor.no": "No",\n    "admin.hydracontentextractor.title": "Hydra Content Extractor",\n    "admin.hydracontentextractor.yes": "Yes",\n    "admin.hydraFeeds.description": "This page is for managing all Hydra feeds. In the urls, you can use the following tokens:",\n    "admin.hydraFeeds.description.affiliateIdForHydra": "&lt;affiliateIdForHydra&gt; inserts the XN_YOKO_AFFILIATE_ID_FOR_HYDRA config-file value.",\n    "admin.hydraFeeds.description.category": "&lt;category&gt; for the category key, e.g., health",\n    "admin.hydraFeeds.description.channel": "&lt;channel&gt; for the current channel, set in <a href=\'/admin/regions\'>/admin/regions</a>, e.g., glam",\n    "admin.hydraFeeds.description.channelRegionLanguage": "&lt;channelRegionLanguage&gt; for the channel\'s region\'s language, set in <a href=\'/admin/regions\'>/admin/regions</a>, e.g., en",\n    "admin.hydraFeeds.description.contentTypes": "&lt;contentTypes&gt; will have value(s) from [Collection, User , CoreObjects\' types].",\n    "admin.hydraFeeds.description.dateRange": "&lt;dateRange&gt; date range metrics should be pulls from, e.g., 7Day, 30Day, Total.",\n    "admin.hydraFeeds.description.from": "&lt;from&gt; Index to fetch the resultset at. Used for pagination.",\n    "admin.hydraFeeds.description.hydraRegion": "&lt;viewer.hydraRegion&gt; Hydra Region for the user\'s region, set in <a href=\'/admin/regions\'>/admin/regions</a>, e.g., US",\n    "admin.hydraFeeds.description.hydraSource": "&lt;hydraSource&gt; inserts the XN_YOKO_HYDRA_SOURCE config-file value.",\n    "admin.hydraFeeds.description.language": "&lt;viewer.language&gt; for the user\'s language, e.g., en-US",\n    "admin.hydraFeeds.description.lowercaseHydraRegion": "&lt;viewer.lowercaseHydraRegion&gt; Same as &lt;viewer.hydraRegion&gt; but lowercase.",\n    "admin.hydraFeeds.description.objectId": "&lt;objectId&gt; Object Id.",\n    "admin.hydraFeeds.description.querySuggestions": "&lt;querySuggestions&gt; Suggested query terms based on \'&lt;userQuery&gt;\'.",\n    "admin.hydraFeeds.description.region": "&lt;viewer.region&gt; for the user\'s region, e.g., US",\n    "admin.hydraFeeds.description.regionHydraLanguage": "&lt;viewer.regionHydraLanguage&gt; for the user\'s region\'s Hydra Language, set in <a href=\'/admin/regions\'>/admin/regions</a>, e.g., en",\n    "admin.hydraFeeds.description.signedIn": "&lt;signedIn&gt; inserts 1 for signed-in users and 0 for signed-out users",\n    "admin.hydraFeeds.description.signedInTernary": "&lt;signedIn?\'foo\':\'bar\'&gt; inserts foo if signed in, bar if signed out",\n    "admin.hydraFeeds.description.size": "&lt;size&gt; No. of resultset to be fetched. Used for pagination",\n    "admin.hydraFeeds.description.userId": "&lt;userId&gt; Yoko id of the user.",\n    "admin.hydraFeeds.description.userQuery": "&lt;userQuery&gt; Search query entered by a user.",\n    "admin.hydraFeeds.description.viewerIp": "&lt;viewer.ip&gt; IP address of the viewer. If you are paginating an ElasticSearch query with from/size, it is good to set <a href=\\"https://www.elastic.co/guide/en/elasticsearch/reference/2.0/search-request-preference.html\\" target=\\"_blank\\">__preference=&lt;viewer.ip&gt;</a> to ensure that the search results are from the same ElasticSearch shards and are thus more stable.",\n    "admin.hydraFeeds.feedDescriptions.category.stories": "Stories in a category, for the iOS api.",\n    "admin.hydraFeeds.feedDescriptions.category.videos": "Videos in a category, for the iOS api.",\n    "admin.hydraFeeds.feedDescriptions.category.videosAndStories": "Videos and stories for the category pages.",\n    "admin.hydraFeeds.feedDescriptions.chaining": "Story and video chaining.",\n    "admin.hydraFeeds.feedDescriptions.insights.mode.stories.social": "Insights: Glam Stories Social",\n    "admin.hydraFeeds.feedDescriptions.insights.mode.stories.views": "Insights: Glam Stories Views",\n    "admin.hydraFeeds.feedDescriptions.insights.mode.videos.social": "Insights: Glam Videos Social",\n    "admin.hydraFeeds.feedDescriptions.insights.mode.videos.views": "Insights: Glam Videos Views",\n    "admin.hydraFeeds.feedDescriptions.insights.object.trending.daily": "Get daily metrics for a single object by id.",\n    "admin.hydraFeeds.feedDescriptions.insights.stories.engagement": "Insights: StoriesEngagement",\n    "admin.hydraFeeds.feedDescriptions.insights.stories.social": "Insights: Social",\n    "admin.hydraFeeds.feedDescriptions.insights.stories.views": "Insights: Views",\n    "admin.hydraFeeds.feedDescriptions.insights.videos.engagement": "Insights: Videos Engagement",\n    "admin.hydraFeeds.feedDescriptions.insights.videos.social": "Insights: Videos Social",\n    "admin.hydraFeeds.feedDescriptions.insights.videos.views": "Insights: Videos Views",\n    "admin.hydraFeeds.feedDescriptions.modeVideos": "Feed for the Glam Videos page.",\n    "admin.hydraFeeds.feedDescriptions.recommendedVideo": "It recommends videos based on search-text and category.",\n    "admin.hydraFeeds.feedDescriptions.search.keyword": "It is for site-wide search and searches for stories, core-objects and users.",\n    "admin.hydraFeeds.feedDescriptions.search.keyword.video": "Search for native and non-native videos.",\n    "admin.hydraFeeds.feedDescriptions.search.spellSuggester": "It suggests similar looking terms based on user-query text.",\n    "admin.hydraFeeds.feedDescriptions.trending.category": "First version of trending content on a category page. Includes stories, hubs and videos.",\n    "admin.hydraFeeds.feedDescriptions.trending.category.video": "First version of trending content on the Glam Video category page. Includes only videos.",\n    "admin.hydraFeeds.feedDescriptions.trending.channel": "First version of trending content on a channel page. Includes stories and hubs. Used by old mobile apps.",\n    "admin.hydraFeeds.feedDescriptions.trending.channel.2": "Second version of trending content on a channel page. Includes stories, hubs and videos.",\n    "admin.hydraFeeds.feedDescriptions.trending.explore.stories": "Trending stories on the mobile app explore screen.",\n    "admin.hydraFeeds.feedDescriptions.trending.explore.topics": "The popular topics on the site.",\n    "admin.hydraFeeds.feedDescriptions.trending.explore.videos": "Trending native videos on the mobile app explore screen.",\n    "admin.hydraFeeds.feedDescriptions.trending.explore.videos_and_stories": "Trending stories and native videos on the mobile app explore screen.",\n    "admin.hydraFeeds.feedDescriptions.trending.home": "First version of trending content on the homepage. Includes stories and hubs. Used by old mobile apps.",\n    "admin.hydraFeeds.feedDescriptions.trending.home.2": "Second version of trending content on the homepage. Includes stories, hubs and videos.",\n    "admin.hydraFeeds.feedDescriptions.trending.video": "First version of trending content on a single-video page. Includes only videos",\n    "admin.hydraFeeds.preview.button": "Load",\n    "admin.hydraFeeds.preview.description": "Here you can check the results of any feed.",\n    "admin.hydraFeeds.preview.instruction": "Choose a Hydra feed or enter a feed URL:",\n    "admin.hydraFeeds.preview.title": "Preview",\n    "admin.hydraFeeds.results.id": "ID",\n    "admin.hydraFeeds.results.image": "Image",\n    "admin.hydraFeeds.results.title": "Title",\n    "admin.hydraFeeds.title": "Hydra Feeds",\n    "admin.hydraFeeds.viewerIpError": "The following feeds both contain &lt;viewer.ip&gt; and begin with /c: <strong>{BAD_FEEDS}</strong>. Having &lt;viewer.ip&gt; will defeat the Akamai caching of /c. Please use one or the other.",\n    "admin.inviteAdmin": "Invite Admin",\n    "admin.languages": "Languages",\n    "admin.languages.description": "This page allows you to change the visibility of languages.",\n    "admin.manageAdmins.error.sameUser": "Sorry, you cannot change your own admin privileges.",\n    "admin.manageAdmins.success.assign": "Successfully assigned admin privileges.",\n    "admin.manageAdmins.success.revoke": "Successfully revoked admin privileges.",\n    "admin.mobileApp.releaseNotes": "Release Notes",\n    "admin.mobileApp.sizeInMB": "{SIZE_IN_MB} MB",\n    "admin.mobileApp.title": "Staged Mobile App",\n    "admin.mobileApp.version": "Version {SHORT_VERSION} ({VERSION})",\n    "admin.newInvites": "New Invites",\n    "admin.newOwner": "New Owner ID/slug/profile URL:",\n    "admin.noAddressesFound": "Please enter one or more valid email addresses",\n    "admin.notCoreObjects": "These objects are not core objects:",\n    "admin.objectIdEtc": "Object IDs/slugs/URLs:",\n    "admin.pageNotice.debuggingOn": "Debugging on. Click to turn off.",\n    "admin.paginationLinks.first": "« FIRST",\n    "admin.paginationLinks.label": "PAGES:",\n    "admin.paginationLinks.last": "LAST »",\n    "admin.paginationLinks.next": "NEXT ›",\n    "admin.paginationLinks.previous": "‹ PREVIOUS",\n    "admin.panel": "Admin Panel",\n    "admin.placeholder.dateEnd": "Provide date(YYYY-MM-DD)",\n    "admin.placeholder.dateStart": "Provide date(YYYY-MM-DD)",\n    "admin.privilegedUserOptions": "Privileged User Options",\n    "admin.privilegedUserOptions.ads": "Ads",\n    "admin.privilegedUserOptions.auth": "Auth:",\n    "admin.privilegedUserOptions.authorName": "Author Name:",\n    "admin.privilegedUserOptions.ban": "Ban",\n    "admin.privilegedUserOptions.ban.description": "Prevent this user from logging in.",\n    "admin.privilegedUserOptions.branded": "Branded:",\n    "admin.privilegedUserOptions.branding": "Branding",\n    "admin.privilegedUserOptions.cancellabel":"Cancel",\n    "admin.privilegedUserOptions.category": "Category:",\n    "admin.privilegedUserOptions.channelManagers": "Channel Managers:",\n    "admin.privilegedUserOptions.channels": "Channel(s):",\n    "admin.privilegedUserOptions.confirmUnfeature": "Are you sure that you want to remove this from {COLLECTION_NAME}?",\n    "admin.privilegedUserOptions.country": "Country:",\n    "admin.privilegedUserOptions.createdDate": "Created Date:",\n    "admin.privilegedUserOptions.currentlyFeaturedOn": "Currently Featured On",\n    "admin.privilegedUserOptions.deactivate": "Deactivate",\n    "admin.privilegedUserOptions.deactivate.description": "Suspend this user\'s account",\n    "admin.privilegedUserOptions.debug": "Debug",\n    "admin.privilegedUserOptions.debugPanel.description": "Flags for testing and debugging. These options affect the current user only (you).",\n    "admin.privilegedUserOptions.debugPanel.testAdPlaceholders": "Display the name of the ad slot just below where the ad slot should appear.",\n    "admin.privilegedUserOptions.debugPanel.testHydraMetricsTimingOut": "Simulate Hydra metrics queries taking forever (up to hydraQueryTimeout seconds). If hydraQueryTimeout is 0, then this will take forever.",\n    "admin.privilegedUserOptions.debugPanel.testListeriaDown": "Simulate Listeria being down when retrieving the Adapt data rules. Was used to test MODE-36748.",\n    "admin.privilegedUserOptions.debugPanel.testListeriaStaging": "Use Listeria staging, not Listeria production, for the rules for mapping data to Adapt values. Useful for trying out new rules on production data.",\n    "admin.privilegedUserOptions.debugPanel.testNewFields": "Displays additional fields for core objects, stories, etc.",\n    "admin.privilegedUserOptions.delete": "delete",\n    "admin.privilegedUserOptions.delete.description": "Remove this user\'s account.",\n    "admin.privilegedUserOptions.feature": "Feature",\n    "admin.privilegedUserOptions.featureThisItem": "Feature this item",\n    "admin.privilegedUserOptions.featureWithoutVerification": "This item has not been verified—are you sure you want to feature it?",\n    "admin.privilegedUserOptions.general": "General",\n    "admin.privilegedUserOptions.getImagesAndVideos": "Get Images & Videos",\n    "admin.privilegedUserOptions.hero": "(Hero)",\n    "admin.privilegedUserOptions.hubs": "Hub(s):",\n    "admin.privilegedUserOptions.hydraFeeds": "Hydra Feeds",\n    "admin.privilegedUserOptions.id": "Id:",\n    "admin.privilegedUserOptions.impersonate": "Impersonate",\n    "admin.privilegedUserOptions.impersonate.description": "Pretend to be this user.",\n    "admin.privilegedUserOptions.info": "Info",\n    "admin.privilegedUserOptions.invalidUrl": "That Source Link is not a valid URL.",\n    "admin.privilegedUserOptions.joinDate": "Join Date:",\n    "admin.privilegedUserOptions.jsonView": "JSON View",\n    "admin.privilegedUserOptions.language": "Language:",\n    "admin.privilegedUserOptions.logoEnabled": "Show Logo",\n    "admin.privilegedUserOptions.logoImageUrl": "Logo Image",\n    "admin.privilegedUserOptions.logoSubtitle": "Sponsored Text",\n    "admin.privilegedUserOptions.logoTitle": "Logo Text",\n    "admin.privilegedUserOptions.logoUrl": "Logo Link",\n    "admin.privilegedUserOptions.mediaType": "Media Type:",\n    "admin.privilegedUserOptions.metrics": "Metrics",\n    "admin.privilegedUserOptions.name": "Name:",\n    "admin.privilegedUserOptions.native": "Native:",\n    "admin.privilegedUserOptions.no": "No",\n    "admin.privilegedUserOptions.noMetrics": "No metrics are available for this item.",\n    "admin.privilegedUserOptions.none": "None",\n    "admin.privilegedUserOptions.notApplicable": "N/A",\n    "admin.privilegedUserOptions.options": "Options",\n    "admin.privilegedUserOptions.outlineView": "Outline View",\n    "admin.privilegedUserOptions.ownerInformation": "Owner Information",\n    "admin.privilegedUserOptions.private": "Private:",\n    "admin.privilegedUserOptions.publishedDate": "Published Date:",\n    "admin.privilegedUserOptions.rating": "Rating:",\n    "admin.privilegedUserOptions.reassignlabel":"Reassign",\n    "admin.privilegedUserOptions.role": "Role:",\n    "admin.privilegedUserOptions.save": "Save",\n    "admin.privilegedUserOptions.source": "Source",\n    "admin.privilegedUserOptions.sourceLink": "Source Link:",\n    "admin.privilegedUserOptions.stories": "Stories:",\n    "admin.privilegedUserOptions.timeline": "Timeline",\n    "admin.privilegedUserOptions.trusted": "Trusted:",\n    "admin.privilegedUserOptions.trustedWithDescription": "Trusted. Clearing this will clear all checkboxes",\n    "admin.privilegedUserOptions.type": "Type:",\n    "admin.privilegedUserOptions.unfeature": "Unfeature",\n    "admin.privilegedUserOptions.url": "URL:",\n    "admin.privilegedUserOptions.urlLocked": "URL Locked:",\n    "admin.privilegedUserOptions.urlTaken": "Sorry, that URL has been taken by another item.\\n\\nWould you like to see the other item? Press OK to open the other item in a new window.",\n    "admin.privilegedUserOptions.verified": "Verified:",\n    "admin.privilegedUserOptions.verifiedDate": "Verified Date:",\n    "admin.privilegedUserOptions.videoJson": "Video JSON",\n    "admin.privilegedUserOptions.yes": "Yes",\n    "admin.recipeIdEtc": "Collection/CoreObject IDs/slugs/URLs",\n    "admin.regions": "Regions",\n    "admin.regions.cannotDeleteUsChannel": "Sorry, you cannot delete a standard US channel.",\n    "admin.regions.cannotDeleteUsRegion": "Sorry, you cannot delete the US region.",\n    "admin.regions.channels": "{REGION} Channels",\n    "admin.regions.channels.backToRegions": "← Back to Regions",\n    "admin.regions.channels.channelForDefaults.blissUS": "Bliss US",\n    "admin.regions.channels.channelForDefaults.brashUS": "Brash US",\n    "admin.regions.channels.channelForDefaults.buzzUS": "Buzz US",\n    "admin.regions.channels.channelForDefaults.foodieUS": "Foodie US",\n    "admin.regions.channels.channelForDefaults.glamUS": "Glam US",\n    "admin.regions.channels.channelForDefaults.tendUS": "Tend US",\n    "admin.regions.channels.channelForDefaults.videoUS": "Video US",\n    "admin.regions.channels.delete": "Delete the {CHANNEL} {REGION} channel",\n    "admin.regions.channels.description": "This page allows you to add/remove channels and edit them.",\n    "admin.regions.channels.displayName": "Display Name",\n    "admin.regions.channels.displayName.description": "The channel name, e.g., Glam",\n    "admin.regions.channels.displayName.missing": "Please specify a display name, e.g., Brash.",\n    "admin.regions.channels.fillInBlanks": "Fill in the blanks from:",\n    "admin.regions.channels.hydraChannel": "Hydra Channel",\n    "admin.regions.channels.hydraChannel.description": "&lt;channel&gt; to pass to <a {LINK_ATTRS}>Hydra Feeds</a>.",\n    "admin.regions.channels.images": "Images",\n    "admin.regions.channels.logoImage": "Logo (SVG)",\n    "admin.regions.channels.logoImagePng": "Logo (PNG)",\n    "admin.regions.channels.mch": "Adapt MCH Value",\n    "admin.regions.channels.mch.description": "Channel code that will be sent to Adapt.",\n    "admin.regions.channels.moveDown": "▼ Move down",\n    "admin.regions.channels.moveUp": "▲ Move up",\n    "admin.regions.channels.navImage": "Nav Image",\n    "admin.regions.channels.newChannel": "New Channel",\n    "admin.regions.channels.onboardingImage": "Onboarding Image",\n    "admin.regions.channels.pageImage": "Page Image",\n    "admin.regions.channels.responsiveLogoWidth": "Responsive Logo Width",\n    "admin.regions.channels.responsiveLogoWidth.description": "Logo width on phones and tablets.",\n    "admin.regions.channels.slug": "Slug",\n    "admin.regions.channels.slug.description": "The URL path, e.g., glam",\n    "admin.regions.channels.slug.invalidCharacters": "The slug contains invalid characters.",\n    "admin.regions.channels.slug.missing": "Please specify a slug, e.g., brash.",\n    "admin.regions.channels.slug.taken": "Sorry, that slug is already in use by another channel in this region.",\n    "admin.regions.channels.visibility": "Visibility",\n    "admin.regions.channels.visibility.description": "Who can see this channel?",\n    "admin.regions.countryCodes": "Country Codes",\n    "admin.regions.countryCodes.description": "<a {LINK_ATTRS}>ISO 3166-1</a> country codes, separated by commas. Used to set the user\'s initial region.",\n    "admin.regions.delete": "Delete the {REGION} region",\n    "admin.regions.delete.cancelled": "Cancelled deletion.",\n    "admin.regions.delete.instruction": "Enter “{PASSPHRASE}” to confirm deletion.",\n    "admin.regions.description": "This page allows you to add/remove regions and edit them.",\n    "admin.regions.editChannels": "Edit channels",\n    "admin.regions.flagImage": "Flag Image",\n    "admin.regions.hydraRegion": "Hydra Region",\n    "admin.regions.hydraRegion.description": "&lt;region&gt; to pass to <a {LINK_ATTRS}>Hydra Feeds</a>.",\n    "admin.regions.hydraRegionLanguage": "Hydra Language",\n    "admin.regions.hydraRegionLanguage.description": "regionLanguage to pass to <a {LINK_ATTRS}>Hydra Feeds</a>.",\n    "admin.regions.links.desktopAboutLinks": "Desktop About Links",\n    "admin.regions.links.invalidLink": "Invalid link: \'{LINK}\'",\n    "admin.regions.links.mobileAboutLinks": "Mobile About Links",\n    "admin.regions.newRegion": "New Region",\n    "admin.regions.regionAlreadyExists": "Sorry, that region already exists.",\n    "admin.regions.regionCode": "Region Code",\n    "admin.regions.regionCode.description": "A 2-letter ISO-3166-1 country code, or a custom 3-letter code. 2-letter codes get automatic IP detection for new users.",\n    "admin.regions.regionContainsInvalidCharacters": "Sorry, the region contains some invalid characters.",\n    "admin.regions.regionExceeds3Characters": "Sorry, the region should be 2-3 characters in length.",\n    "admin.regions.regionMissing": "Please specify a 2-3-character region code.",\n    "admin.regions.testRegion": "Test Region",\n    "admin.regions.testRegion.description": "Check this if you think this region is for testing purpose like ZZ region",\n    "admin.regions.viewChannels": "View channels",\n    "admin.regions.visibility": "Visibility",\n    "admin.regions.visibility.admins": "Admins",\n    "admin.regions.visibility.adops": "Ad Ops",\n    "admin.regions.visibility.description": "Who can see this region?",\n    "admin.regions.visibility.editors": "Editors",\n    "admin.regions.visibility.everyone": "Everyone",\n    "admin.regions.visibility.none": "None",\n    "admin.regions.visibility.product": "Product",\n    "admin.runtimeProperties.description": "These are the config-file properties being used by Yoko. They are taken from config files in Yoko and Gepo.",\n    "admin.runtimeProperties.title": "Runtime Properties",\n    "admin.scheduledTasks.channelSelect": "Select channel",\n    "admin.scheduledTasks.correctSchedule": "Please provide correct schedule date.",\n    "admin.scheduledTasks.defaultDatetime": "YYYY-MM-DD HH:MM:SS AM/PM",\n    "admin.scheduledTasks.delete": "Delete",\n    "admin.scheduledTasks.description": "This page allows you to add/edit/delete scheduled tasks. You can schedule various jobs like publishing of a story or adding it to story.",\n    "admin.scheduledTasks.input": "Input the number at the end of the URL when you scroll to the top of the story/hub page.",\n    "admin.scheduledTasks.inputDate": "Input the date time in your timezone.",\n    "admin.scheduledTasks.invalidTaskType": "Please select correct task type.",\n    "admin.scheduledTasks.listAuthor": "Task Author",\n    "admin.scheduledTasks.listCreatedDate": "Task Created Date",\n    "admin.scheduledTasks.listScheduledDate": "Task Scheduled Date",\n    "admin.scheduledTasks.listTitle": "Task Title",\n    "admin.scheduledTasks.newTask": "New Task",\n    "admin.scheduledTasks.noTasks": "No tasks",\n    "admin.scheduledTasks.pendingTasks": "Pending tasks",\n    "admin.scheduledTasks.provideChannelId": "Please select a channel.",\n    "admin.scheduledTasks.provideStoryOrHubId": "Please provide Story or Hub id.",\n    "admin.scheduledTasks.scheduleInFuture": "Scheduled time should be in the future.",\n    "admin.scheduledTasks.scheduleOn" : "Schedule task on",\n    "admin.scheduledTasks.selectedChannel": "Select channel",\n    "admin.scheduledTasks.storyOrHubAlreadyAddedForFeatureOrHero": "Story or Hub is already added for feature or hero.",\n    "admin.scheduledTasks.storyOrHubAlreadyAddedForHero": "Story or Hub is already added for hero.",\n    "admin.scheduledTasks.storyOrHubAlreadyAddedForPublishOrHeroOrFeature": "Story or Hub is already added for publish or hero or feature.",\n    "admin.scheduledTasks.storyOrHubAlreadyFeatured": "Story or Hub is already featured.",\n    "admin.scheduledTasks.storyOrHubAlreadyHeroed": "Story or Hub is already hero.",\n    "admin.scheduledTasks.storyOrHubAlreadyPublished": "Story or Hub is already published.",\n    "admin.scheduledTasks.storyOrHubToAdd": "ID of Story or Hub to add",\n    "admin.scheduledTasks.storyOrHubToPublish": "ID of Story or Hub to publish",\n    "admin.scheduledTasks.taskFeature": "Feature",\n    "admin.scheduledTasks.taskHero": "Hero",\n    "admin.scheduledTasks.taskPublish": "Publish",\n    "admin.scheduledTasks.taskSelect": "Select",\n    "admin.scheduledTasks.taskType": "Task type",\n    "admin.scheduledTasks.title": "Scheduled Tasks",\n    "admin.scheduledTasks.titleForFeature": "Feature {TYPE} {COLLECTION} on {CHANNEL}",\n    "admin.scheduledTasks.titleForHero": "Hero {TYPE} {COLLECTION} on {CHANNEL}",\n    "admin.scheduledTasks.titleForPublish": "Publish {TYPE} {COLLECTION} ",\n    "admin.selectDate": "Select date range:",\n    "admin.selectFrom": "From",\n    "admin.selectTo": "To",\n    "admin.story.featureWithoutVerification": "This story has not been verified, are you sure you want to feature it?",\n    "admin.tab.nav.label": "Admin",\n    "admin.table.lengthMenu": "Show _MENU_",\n    "admin.table.paginate.next": "❯",\n    "admin.table.paginate.previous": "❮",\n    "admin.table.zeroRecords": "No records to display.",\n    "admin.tile.body.placeholder": "Enter additional content.",\n    "admin.toCreateNewInvites": "To create new invites, enter email addresses for users to be invited.",\n    "admin.troubleshooting": "Troubleshooting",\n    "admin.troubleshooting.title": "Troubleshooting",\n    "admin.user.status.admin": "Admin",\n    "admin.user.status.adops": "Ad Ops",\n    "admin.user.status.editor": "Editor",\n    "admin.user.status.member": "Member",\n    "admin.user.status.product": "Product",\n    "admin.userManagement": "User Management",\n    "admin.userManagement.assignmentsAccountManager": "Assignments Account Manager",\n    "admin.userManagement.assignmentsAdmin": "Assignments Admin",\n    "admin.userManagement.assignmentsCreator": "Assignments Creator",\n    "admin.userManagement.assignmentsDas": "Assignments DAS",\n    "admin.userManagement.assignmentsDcc": "Assignments DCC",\n    "admin.userManagement.assignmentsEditor": "Assignments Editor",\n    "admin.userManagement.assignmentsPm": "Assignments PM",\n    "admin.userManagement.assignmentsQa": "Assignments QA",\n    "admin.userManagement.assignmentsSalesperson": "Assignments Salesperson",\n    "admin.userManagement.auth": "AUTH",\n    "admin.userManagement.channelManagers": "CHANNEL MANAGERS",\n    "admin.userManagement.countryLang": "COUNTRY / LANGUAGE",\n    "admin.userManagement.email": "EMAIL",\n    "admin.userManagement.groups": "GROUPS",\n    "admin.userManagement.id": "ID",\n    "admin.userManagement.influencer": "Influencer",\n    "admin.userManagement.joined": "JOINED",\n    "admin.userManagement.name": "NAME",\n    "admin.userManagement.roles": "ROLE",\n    "admin.userManagement.submenu.activeUsers": "ACTIVE",\n    "admin.userManagement.submenu.bannedUsers": "BANNED",\n    "admin.userManagement.submenu.deactivatedUsers": "DEACTIVATED",\n    "admin.userManagement.trusted": "TRUSTED",\n    "admin.userManagement.trusted.confirm.main": "Are you sure you want to remove this user from the Main Trusted list? It will remove them from the category page and from the trusted lists for all regions and channels.",\n    "admin.userManagement.trusted.confirm.region": "Are you sure you want to remove this user from the {REGION} Region Trusted list? It will remove them from trusted lists for all {REGION} channels.",\n    "admin.userManagement.trustedChannels": "TRUSTED CHANNELS",\n    "admin.userManagement.verification.notVerified": "Not Verified",\n    "admin.userManagement.verification.undeliverable": "Undeliverable",\n    "admin.userManagement.verification.verified": "Verified",\n    "admin.wrongDateRange": "Date range provided is wrong.",\n    "admin.youJustInvited": "You just created the following invites:",\n    "band.unpublished.message.hub": "This hub is in Draft status. When you’re ready, <a {HREF_ATTRS}><strong>publish</strong></a> it.",\n    "collect.chooseHub": "Choose a hub",\n    "collect.newHub": "+ New Hub",\n    "collect.widget.header.hub": "Add to Hub",\n    "collection.dialog.noHeroControl": "Hero controls are enabled when this belongs to any hub.",\n    "date.YMDHMS": "{YEAR}-{MONTH_PAD}-{DAY_PAD} {HR24}:{MIN}:{SECOND}",\n    "message.tile.actions.deleteFromChannel": "Remove item from channel",\n    "message.tile.actions.deleteFromHub": "Remove item from hub",\n    "nav.settings.disableAdminView": "Disable Admin",\n    "nav.settings.disableAdopsView": "Disable Adops",\n    "nav.settings.disableEditorView": "Disable Editor",\n    "nav.settings.disableProductView": "Disable Product",\n    "nav.settings.enableAdminView": "Enable Admin",\n    "nav.settings.enableAdopsView": "Enable Adops",\n    "nav.settings.enableEditorView": "Enable Editor",\n    "nav.settings.enableProductView": "Enable Product",\n    "nav.settings.stopDebugging": "Stop Debugging",\n    "nav.settings.stopImpersonating": "Stop Impersonating",\n    "user.tempMember.googleAnalyticsIdNotCorrect": "Warning: The Google Analytics ID is not correct for this environment.",\n    "user.tempMember.noTrackingPixelAffiliateId": "Warning: No affiliate ID is specified for the tracking pixel.",\n    "user.tempMember.viewAsMember": "VIEWING AS {USER_ROLE}. CLICK TO VIEW AS MEMBER.",\n    "": ""\n}\n'}),define("html",[],function(){"use strict";var e={};return e.escape=function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")},e.unescape=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes.length===0?"":t.childNodes[0].nodeValue},e}),define("i18n",["MessageFormat","text!catalogs/admin.json","html","require"],function(e,t,n,r){"use strict";var i={},s,o,u,a,f,l,c="#SAFE#";return a=y$.parseJSON(t),u=y$.extend({},window.yokoCatalog,a),i.html=function(e,t){var r={},i,s;typeof e=="object"&&(t=y$.extend(e[1],t),e=e[0]);for(i in t)t.hasOwnProperty(i)&&(s=t[i]===null?"":t[i].toString(),s.indexOf(c)===0?r[i]=s.substr(c.length):r[i]=n.escape(t[i]));return f(e,r)},i.text=function(e,t){var r=new RegExp(/<\/?[^>]+>/g),s=i.html(e,t);return n.unescape(s.replace(r,""))},i.safe=function(e){return c+e},f=function(t,n,r){var i=l(n||{}),s=r||"en_US",u=s.substr(0,2),a=new e(u),f=o(t,s),c=a.compile(f);return c(i)},l=function(e){var t={},n;for(n in e)e.hasOwnProperty(n)&&(t[s(n)]=e[n]);return t},o=function(e,t){return u[e]||s(e)},s=function(e){return e.replace(/([A-Z])/g,function(e){return"_"+e.toUpperCase()}).toUpperCase()},jSmart.prototype.registerPlugin("function","h",function(e,t){var n={},r,s,o;if(!e.k)throw{name:"KeyNotSuppliedException",message:"Key not supplied for i18n phrase."};e.k instanceof Array?(s=e.k[0],o=y$.extend(e.k[1],e)):(s=e.k,o=e);for(r in o)if(o.hasOwnProperty(r)&&r.indexOf("_")!==0&&r!=="k"){n[r]=o[r];if(r.substr(-4)==="Html"||r.substr(-5)==="Attrs")n[r]=i.safe(n[r])}return i.html(s,n)}),jSmart.prototype.registerPlugin("function","t",function(e,t){var n={},r,s,o;if(!e.k)throw{name:"KeyNotSuppliedException",message:"Key not supplied for i18n phrase."};e.k instanceof Array?(s=e.k[0],o=e.k[1],o=y$.extend(e.k[1],e)):(s=e.k,o=e);for(r in o)o.hasOwnProperty(r)&&r.indexOf("_")!==0&&r!=="k"&&(n[r]=o[r]);return i.text(s,n)}),i}),define("util/datetime",["i18n"],function(e){"use strict";var t={};return Date.prototype.getDOY=function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil((this-e)/864e5)},Date.prototype.getMondayWeek=function(){var e=new Date(this.getFullYear(),0,1),t=e.getDay()||7;return Math.ceil(((this-e)/864e5+t)/7)-1},Date.prototype.getSundayWeek=function(){var e=new Date(this.getFullYear(),0,1);return Math.ceil(((this-e)/864e5+e.getDay()+1)/7)-1},t.parseTime=function(e){var t,n,r,i,s,o,u;return t=e.replace(/\D+$/,"").split(/\D+/).reverse(),n={days:0,hours:0,minutes:0},r=["minutes","hours","days"],i={minutes:{max:60,next:"hours"},hours:{max:24,next:"days"}},s=0,o=t.length,y$.each(t,function(e,t){n[r[s]]=parseInt(t,10),s+=1}),y$.each(i,function(e,t){o=n[e];if(!o||o<t.max)return;u=parseInt(o/t.max,10),o-=u*t.max,n[e]=o,n[t.next]=(n[t.next]||0)+u}),n},t.partsToTime=function(e){var t,n,r,i;return t={minutes:!0,hours:!0,days:!1},n=[],y$.each(t,function(s,o){o=t[s],r=parseInt(e[s]||0,10),isNaN(r)&&(r=0);if(r>0||o)i=o&&r<10?"0"+r:String(r),n.unshift(i)}),i=n.join(":"),i==="00:00"?"":i},t.timeDuration=function(t,n){var r,i,s,o,u,a;r=["seconds","minutes","hours","days"],n||(t+=":00"),i=t.split(":"),s={};for(a in r)r.hasOwnProperty(a)&&(o=r[a],u=parseInt(i.pop(),10),s[o]=isNaN(u)?0:u);return e.html("time.duration",s)},t.duration=function(n){var r=t.prepareDurationArgs(n);return y$.trim(e.html("time.duration",r))},t.durationAbbr=function(n){var r=t.prepareDurationArgs(n);return y$.trim(e.html("time.durationAbbr",r))},t.prepareDurationArgs=function(e){var t,n,r,i,s;e=parseInt(e,10),t={days:86400,hours:3600,minutes:60,seconds:1},n={};for(r in t)t.hasOwnProperty(r)&&(i=t[r],e>=i?(s=parseInt(e/i,10),n[r]=s,e-=s*i):n[r]=0);return n},t.relative=function(n,r){var i=t.parseDate(n),s=new Date,o=parseInt(s.getTime()/1e3,10),u=o-i;return r||(r={seconds:"date.secondsAgo",minutes:"date.minutesAgo",hours:"date.hoursAgo",days:"date.daysAgo",weeks:"date.weeksAgo",months:"date.monthDayFormat",years:"date.monthDayYearFormat"}),u<60?e.html(r.seconds,{seconds:u}):u<3600?e.html(r.minutes,{minutes:parseInt(u/60,10)}):u<86400?e.html(r.hours,{hours:parseInt(u/3600,10)}):u<604800?e.html(r.days,{days:parseInt(u/86400,10)}):u<2419200?e.html(r.weeks,{weeks:parseInt(u/604800,10)}):s.getFullYear()===(new Date(i*1e3)).getFullYear()?t.format(r.months,i):t.format(r.years,i)},t.relativeShort=function(e){var n={seconds:"date.sAgo",minutes:"date.mAgo",hours:"date.hAgo",days:"date.dAgo",weeks:"date.wAgo",months:"date.monDayFormat",years:"date.monDayYearFormat"};return t.relative(e,n)},t.relativeTooShort=function(e){var n={seconds:"date.s",minutes:"date.m",hours:"date.h",days:"date.d",weeks:"date.w",months:"date.monDayFormat",years:"date.monDayYearFormat"};return t.relative(e,n)},t.format=function(n,r){var i=t.parseDate(r),s=new Date(i*1e3),o=s.getTimezoneOffset(),u=new Date(s.getTime()+o*60*1e3),a=t.prepareDateParams(u);return e.html(n,a)},t.parseDate=function(e){var t,n,r,i;if(e===undefined||e===null)return i=(new Date).getTime(),parseInt(i/1e3,10);t=String(e).match(/(\d\d\d\d)-(\d\d)-(\d\d)(?:[T ](\d\d:\d\d:\d\d)(\.\d+)?)*(?:\s*(Z|UTC|GMT|[\+\-]\d+))*/);if(t)return n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r=n[parseInt(t[2]-1,10)]+" "+t[3]+" "+t[1]+" "+(t[4]||"00:00:00")+" "+(t[6]==="Z"||t[6]==="UTC"||t[6]==="GMT"?"+0000":t[6]),parseInt(Date.parse(r)/1e3,10);i=(new Date).setTime(e*1e3);if(isNaN(i))throw{name:"InvalidDateException",message:"Invalid date: "+e};return parseInt(i/1e3,10)},t.prepareDateParams=function(e){var t={dow:e.getDay(),doy:e.getDOY(),day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear(),hour:e.getHours(),minute:("0"+e.getMinutes()).slice(-2),second:("0"+e.getSeconds()).slice(-2),swoy:e.getSundayWeek(),mwoy:e.getMondayWeek()};return{dowNameShort:t.dow,dowName:t.dow,monthName:t.month,monthNameShort:t.month,day:t.day,year:t.year,hr12:!t.hour||t.hour===12?12:t.hour%12,hr24:t.hour,dayOfYear:t.doy,min:t.minute,month:t.month,ampm:t.hour<12?"am":"pm",second:t.second,sundayWoy:t.swoy,mondayWoy:t.mwoy,iso8601Dow:t.dow||7,sunday0Dow:t.dow}},t.parseTimeToMinutes=function(e){var n,r,i,s;return s=0,i={minutes:1,hours:60,days:1440},n=t.parseTime(e),y$.each(i,function(e,t){r=n[e],r!==undefined&&(s+=t*parseInt(r,10))}),s},window.D=function(e,n){var r;return n==="short"?r=t.relativeShort(e):n==="tooShort"?r=t.relativeTooShort(e):n?r=t.format(n,e):r=t.relative(e),r},jSmart.prototype.registerPlugin("function","d",function(e,t){var n=e.d,r;return n.date&&(r=n.timezone,r||(r="+0000"),e.d=n.date+r),window.D(e.d,e.f)}),t}),define("util/number",["i18n"],function(e){"use strict";var t={};return t.format=function(t,n){var r,i="",s,o,u=[],a=String(t),f=a.match(/\.(\d+)$/),l=e.text("number.sep.thousand"),c=e.text("number.sep.decimal");n===!0&&(f?n=f[1].length:n=0),r=a.replace(/\.\d+$/,"").split("").reverse();while(r.length>0)u.unshift(r.splice(0,3).reverse().join(""));return a=u.join(l),n>0&&(f&&(o=Math.pow(10,n),i=String(Math.round(("1"+f[0])*o)).substr(1)),i.length<n&&(s=[],s.length=n-i.length+1,i+=s.join("0")),a=a+c+i),a},t.abbr=function(t,n){var r={0:"number.abbr.one",3:"number.abbr.thousand",6:"number.abbr.million",9:"number.abbr.billion",12:"number.abbr.trillion"},i={0:{mag:0,dec:0},1:{mag:0,dec:0},2:{mag:0,dec:0},3:{mag:3,dec:1},4:{mag:3,dec:1},5:{mag:3,dec:0},6:{mag:6,dec:1},7:{mag:6,dec:1},8:{mag:6,dec:0},9:{mag:9,dec:1},10:{mag:9,dec:1},11:{mag:9,dec:0},12:{mag:12,dec:1},13:{mag:12,dec:1},14:{mag:12,dec:0}},s=String(t),o=s.length-1,u=i[o],a=u.mag,f=e.text("number.sep.decimal");return u===undefined?null:(s/=Math.pow(10,a),s=Number(s.toString().match(/^\d+(?:\.\d{0,1})?/)),u.dec!==0&&(s=s.toString().replace(/\.[1-9]*0+$/,"")),s=s.toString().replace(/\./,f),n?e.html(r[a],{number:s,numberAttrs:e.safe('class="number"'),unitAttrs:e.safe('class="unit"')}):e.text(r[a],{number:s}))},t.isNumberInput=function(e){var t,n=e.val();return!n.match(/^[0-9]+$/)&&n!==""?(setTimeout(function(){e.val(n.replace(/[^0-9]/g,""))},1),t=!1):t=!0,t},window.N=function(e,n,r){return n==="abbr"?t.abbr(e,r):t.format(e,n)},jSmart.prototype.registerPlugin("function","n",function(e,t){return window.N(e.n,e.f,e.s)}),t}),define("util/http",[],function(){"use strict";var e={},t=window.location.href;return e.delete=function(e,t,n,r){return t=t||{},n=n||function(){y$.noop()},r=r||function(e){var t=JSON.parse(e.responseText);n(t)},y$.ajax({url:e,type:"DELETE",data:t,success:n,error:r})},e.put=function(e,t,n,r){return t=t||{},n=n||function(){y$.noop()},r=r||function(e){var t=JSON.parse(e.responseText);n(t)},y$.ajax({url:e,type:"PUT",data:t,success:n,error:r})},e.post=function(e,t,n,r){return t=t||{},n=n||function(){y$.noop()},r=r||function(e){var t=JSON.parse(e.responseText);n(t)},y$.ajax({url:e,type:"POST",data:t,success:n,error:r})},e.get=function(e,t,n,r){return t=t||{},n=n||function(){y$.noop()},r=r||function(e){var t=JSON.parse(e.responseText);n(t)},y$.ajax({url:e,type:"GET",data:t,success:n,error:r})},e.buildUrl=function(n,r,i,s){var o,u,a;return i=i||"abs",typeof n!="string"&&(n=t),o=e.parseUrl(n),a=e.parseUrl(t),u=e.parseStr(o.query,!0),r?typeof r=="string"&&(r=e.parseStr(r)):r={},o.host||(o.scheme=a.scheme,o.host=a.host,a.port&&(o.port=a.port)),y$.each(r,function(e,t){t===null?delete u[e]:u[e]=encodeURIComponent(t)}),o.query=e.buildQuery(u,!0),i==="ssl"?o.scheme="https":i==="!ssl"&&(o.scheme="http"),i!=="rel"?(o.user&&(o.auth=o.user+(o.pass?":"+o.pass:"")),n=(o.scheme||a.scheme)+"://"+(o.auth?o.auth+"@":"")+o.host+(o.port?":"+o.port:"")):n="",s!==undefined&&(o.fragment=s),n+(o.path||"/")+(o.query?"?"+o.query:"")+(o.fragment?"#"+o.fragment:"")},e.parseUrl=function(t){var n={},r,i,s;return t.indexOf("#")!==-1&&(r=e.psplit(t,"#",2),n.fragment=r[1],t=r[0]),t.indexOf("?")!==-1&&(r=e.psplit(t,"?",2),n.query=r[1],t=r[0]),t.indexOf("//")===0?(s=t.indexOf("/",2),n.host=t.substring(2,s),n.path=t.substr(s)):t.indexOf("/")===0?n.path=t:t.indexOf("://")!==-1&&(r=e.psplit(t,"://",2),n.scheme=r[0],r=e.psplit(r[1],"/",2),n.path="/"+(r[1]||""),r[0].indexOf("@")!==-1&&(r=e.psplit(r[0],"@",2),i=e.psplit(r[0],":",2),n.user=i[0],n.pass=i[1],r[0]=r[1]),r[0].indexOf(":")!==-1?(r=e.psplit(r[0],":",2),n.host=r[0],n.port=r[1]):n.host=r[0]),n},e.simplifyPath=function(e){var t,n,r=[],i;e=e.replace(/^\/+/,""),t=e.split("/"),n=t.length;for(i=0;i<n;i+=1)t[i]===".."?r.pop():t[i]&&t[i]!=="."&&r.push(t[i]);return"/"+r.join("/")},e.psplit=function(e,t,n){var r=e.split(t),i=[];return n!==undefined&&n<r.length?(i=r.splice(0,n-1),i[n-1]=r.join(t)):i=r,i},e.parseStr=function(t,n){var r,i={};return t?(r=t.split(/\&/),y$.each(r,function(t,r){var s=e.psplit(r,"=",2);n?i[decodeURIComponent(s[0])]=s[1]:i[decodeURIComponent(s[0])]=decodeURIComponent(s[1].replace(/\+/g,"%20"))}),i):i},e.buildQuery=function(e,t){var n=[];return y$.each(e,function(e,r){t?n.push(encodeURIComponent(e)+"="+r):n.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}),n.join("&")},e.setCurrentUrl=function(e){if(window.location.protocol!=="file:")throw{name:"UnitTestUseOnly",message:"Setting current URL is only allowed from unit tests."};t=e},jSmart.prototype.registerPlugin("function","u",function(t,n){return e.buildUrl(t.u,t.a,t.o)}),window.U=e.buildUrl,e}),define("util/ifseta",["html"],function(e){"use strict";var t=function(t,n,r,i){return t&&t[n]!==undefined?i?e.escape(t[n]):t[n]:r===undefined?null:r};return jSmart.prototype.registerPlugin("function","ifseta",function(e,n){return t(e.a,e.i,e.d,e.qh)}),t}),define("util/ifseta2",["util/ifseta"],function(e){"use strict";jSmart.prototype.registerPlugin("function","ifseta2",function(t,n){return n[t.o]=e(t.a,t.i,e(t,"d")),""})}),define("util/json",["html"],function(e){"use strict";return jSmart.prototype.registerPlugin("function","json",function(t,n){var r=JSON.stringify(t.a);return t.qh&&(r=e.escape(r)),r}),JSON}),define("util/aspect",[],function(){"use strict";var e=function(e){return e!==undefined?100/e:100};return jSmart.prototype.registerPlugin("function","aspect",function(t,n){return e(t.a)}),e}),define("util/contextMsgKey",[],function(){"use strict";var e=function(e,t){return window.yoko&&window.yoko.appContext&&window.yoko.appContext.context&&window.yoko.appContext.context==="cannes"?e:t};return jSmart.prototype.registerPlugin("function","contextMsgKey",function(t,n){return e(t.cannes,t.foodie)}),e}),define("util/shy",[],function(){"use strict";var e=function(e,t){var n;return e!==undefined&&t!==undefined?(n=new RegExp("(\\w{"+t+",100})","gi"),e.replace(n,function(e,t,n,r){return t.replace(/(\w{3})(\w{2})/g,"$1&shy;$2")})):e!==undefined?e.replace(/(\w{3})(\w{2})/g,"$1&shy;$2"):e||null};return jSmart.prototype.registerPlugin("function","shy",function(t,n){return e(t.s,t.n)}),e}),define("util/image",[],function(){"use strict";var e=function(e,t){var n,r,i=[];if(!e)return!1;if(e.search("cdn.mode.com")===-1)return e;for(n in t)t.hasOwnProperty(n)&&(r={},r[n]=t[n],i.push(r));return i.length<1?e:BlobManager.transform(e,i)};return jSmart.prototype.registerPlugin("function","image",function(t,n){return e(t.u,t.t)}),e}),define("util/round",[],function(){"use strict";jSmart.prototype.registerPlugin("function","round",function(e,t){return Math.round(e.n)})}),define("template",["i18n","util/datetime","util/number","util/http","util/ifseta","util/ifseta2","util/json","util/aspect","util/contextMsgKey","util/shy","util/image","util/round"],function(){"use strict";jSmart.prototype.addDefaultModifier(["escape"]);var e,t={};return window.yoko.templates=window.yoko.templates||{},window.yoko.partials=window.yoko.partials||{},t.renderAs=function(e,n,r,i){y$(e).html(t.render(n,r,i))},t.render=function(n,r,i){var s,o=jSmart;return t.addPartials(i),s=e(n),window.yoko.templates[s]||(window.yoko.templates[s]=new o(n)),window.yoko.templates[s].fetch(r)},t.addPartials=function(e){if(e===undefined)return;y$.each(e,function(e,t){window.yoko.partials[e]=t})},e=function(e){var t,n,r=0;if(e.length===0)return r;for(t=0;t<e.length;t+=1)n=e.charCodeAt(t),r=(r<<5)-r+n,r&=r;return r},jSmart.prototype.getTemplate=function(e){return window.yoko.partials[e]||null},t}),define("text!t/util/changePassword.smarty",[],function(){return'{**\n * Reset password modal.\n *\n *}\n<div class="l-dlg-overlay">\n    <div id="ems_change_password" class="l-dialog l-dlg-modal l-dlg-main six ems-change-password is-open">\n        <div class="ems-change-psw-errors">\n            {h k=\'signin.email.resetPsw.errorMsg\'}\n        </div>\n        <div class="l-dlg-header">\n            <div class="ems-header-default">\n                <i class="l-dlg-close icon icn-close-l"></i>\n                {h k=\'signin.email.resetPsw.title\'}\n            </div>\n            <div class="ems-header-success">\n                <i class="icon icn-tick-outline"></i>\n                {h k=\'shared.changed\'}\n            </div>\n        </div>\n        <div class="l-dlg-body ems-change-psw-form">\n            <div class="ems-field">\n                <input type="password" name="password" placeholder="{h k=\'profile.password.newPassword\'}" value="" />\n            </div>\n            <div class="ems-field">\n                <input type="password" name="confirmPassword" placeholder="{h k=\'profile.password.newPassword.confirm\'}" value="" />\n            </div>\n            <div class="ems-change-psw-btns">\n                <button type="button" name="cancel">{h k=\'signin.email.resetPsw.cancelBtn\'}</button>\n                <button type="button" name="submit">{h k=\'signin.email.resetPsw.submitBtn\'}</button>\n            </div>\n        </div>\n        <div class="l-dlg-body ems-change-psw-success">\n            <a class="ems-myfeed-btn" href="/">\n                {h k="about.goToMyFeed.button"}\n                <i class="icon icn-see-all-arrow"></i>\n            </a>\n        </div>\n        <input type="hidden" name="t" value="" />\n        <input type="hidden" name="c" value="" />\n    </div>\n</div>\n'}),define("text!t/util/deepLink.smarty",[],function(){return'{**\n * Deep link modal for iOS app redirect.\n *\n *}\n<div id="dplk_ios_redirect" class="dplk-ios-redirect">\n    <ul>\n        <li class="logo">\n            <img src="{u u=\'/assets/img/mode/apple-touch-icon.png\'}" alt="" />\n        </li>\n        <li class="dplk-copy">\n            {h k=\'mobile.ios.redirect\'}\n        </li>\n        <li class="dplk-app-btn">\n            <button type="button" class="dplk_goto_app">\n                {h k=\'mobile.ios.redirect.btn\'}\n            </button>\n        </li>\n    </ul>\n</div>\n'}),define("util/replaceStateOrLocation",[],function(){"use strict";return function(e){window.history&&window.history.replaceState?window.history.replaceState({},"",e):window.location.replace(e)}}),define("util/eventTrack",["util/http","util/replaceStateOrLocation"],function(e,t){"use strict";var n={},r={};return n.logging=window.location.href.indexOf("testTracking")>-1,n.initializeLogging=function(){y$.noop()},n.log=function(e){if(!n.logging)return;window.console&&window.console.log&&window.console.log("Tracking: "+e)},r.category={add:"Add",beenThere:"Been There",bookmark:"Bookmark",collect:"Collect",shareEmbed:"Share Embed",emailShare:"Share Email",follow:"Follow",love:"Love",madeIt:"Made It",originalRecipe:"Original Recipe",subscribe:"Love",addManual:"Add - manual",addBookmarklet:"Add - bookmarklet",navigationHeader:"Navigation Header",collectionBackground:"Collection Detail Page",onboarding:"Onboarding",signUpTime:"Web Sign Up Time",signUpMethodLocation:"Web Sign Up Method & Location",objectView:"Object View",topNavigation:"Top Navigation",storyCreation:"Story Creation",chain:"Chain",trendingModule:"Trending Module",trendingVideoModule:"Trending Video Module",sessionStoreCategory:"Browser Settings",recommendedVideoModule:"Recommended Video Module"},r.socialNetwork={facebook:"Share Facebook",twitter:"Share Twitter",pinterest:"Share Pinterest"},r.socialAction={like:"Like",share:"Share",tweet:"Tweet",unlike:"Unlike"},r.onbdAction={viewed:"Viewed",cancel:"Cancel",loved:"Loved",unlove:"Unloved",followed:"Followed",unfollowed:"Unfollowed",onboarding:"Onboarding"},r.onboarding={action:{start:"Start",channel:"Channel",social:"Social",ptf:"People to Follow",finish:"Finish"},label:{view:"View",cancel:"Cancellation",love:"Love",fbOffered:"Facebook Offered",fbUnselect:"Facebook Unselect",twOffered:"Twitter Offered",twUnselect:"Twitter Unselect",follow:"Follow"}},r.userSettings={action:{region:"Region",language:"Language"}},r.video={action:{complete:"Completed",length:"Video Length",load:"Loaded",pause:"Paused",resume:"Resumed",skip:"Skipped",start:"Started",watched25:"Watched 25%",watched50:"Watched 50%",watched75:"Watched 75%",watched2s:"Watched 2s"}},r.label={"/":"Home","/collections/":"Collection Detail Page","/discover/collections/":"Discovery - Collections - Recent","/discover/collections/recent/":"Discovery - Collections - Recent","/discover/collections/following/":"Discovery - Collections - Following","/discover/everything/following/":"Discovery - Everything - Following","/discover/recipes/":"Discovery - Recipes - Recent","/discover/recipes/following/":"Discovery - Recipes - Following","/discover/recipes/recent/":"Discovery - Recipes - Recent","/discover/restaurants/":"Discovery - Restaurants - Recent","/discover/restaurants/following/":"Discovery - Restaurants - Following","/discover/restaurants/recent/":"Discovery - Restaurants - Recent",recipeAddManual:"Manual",recipeAddBookmarklet:"Bookmarklet",notificationMenu:"Notification menu",starMenu:"Star menu",newMenu:"New menu",gearMenu:"Gear menu",filterMenu:"Recent/Following menu",search:"Search expand",addBackground:"Add Background Image",helloPage:"Hello Page",channelsPage:"Channels Page",peoplePage:"People Page",socialPage:"Social Page",bookmark:"Bookmark",newItem:"New Item",existingItem:"Existing Item"},r.callback=function(e){r.ga("set","hitCallback",e)},r.parsePath=function(e){e=e.replace(/^(?:\/[\w|\-]+)+\/(collections)\/.*$/,"/$1/"),e.substr(-1)!=="/"&&(e+="/");if(this.label[e])return this.label[e]},r.extractResourceId=function(e,t){return t===!0&&(e=e.replace(/\?.+/,"")),e.replace(/^.*\/\/[^\/]+/,"")},r.extractResourceIdWithStoryParam=function(e){var t,n,r,i="",s;e=this.extractResourceId(e),n=e.split("?");if(n.length>1){r=n[1].split("&");for(t in r)r.hasOwnProperty(t)&&(s=r[t].split("="),s[0]!=="story"&&(i.length>1&&(i+="&"),s.length>1?i+=s[0]+"="+s[1]:i+=s[0]));i.length>1?(i="?"+i,e=n[0]+i):e=n[0]}return e},r.allowed=function(e){var t={cannes:[this.category.navigationHeader,this.category.collectionBackground],foodie:[]};return window.yoko&&window.yoko.appContext&&window.yoko.appContext.context&&t[window.yoko.appContext.context].indexOf(e)!==-1?!1:!0},r.getAction=function(){return window.yoko.action||window.location.href},r.track=function(e,t,n,i){var s=window.location.pathname;if(!this.allowed(e))return;t=this.getAction(t),i===undefined&&(i=this.parsePath(s),i||(i=window.location.href)),n===undefined||n===null?n=1:n=Number(n),r.ga("send","event",e,t,i,n)},r.trackUserSettings=function(e,t){this.trackRaw("User Settings Change",e,1,t)},r.trackOnboarding=function(e,t,n,r){this.trackRaw(e,t,n,r)},r.trackBookmarking=function(e,t,n,r){this.trackRaw(e,t,n,r)},r.trackVideo=function(e,t,n,r){r===undefined&&(r=1),this.trackRaw("Video",e,r,t,n)},r.trackRaw=function(e,t,n,i,s){n===undefined||n===null?n=1:n=Number(n);if(s===undefined||s===null)s=0;r.ga("send","event",e,t,i,n,{nonInteraction:s})},r.social=function(e,t,n){n||(n=window.location.href),t=this.getAction(t),r.ga("send","event",e,t,n)},r.trackBroadcast=function(e,t,n){var i;if(!e)return;i=e.split(","),y$.each(i,y$.proxy(function(e,i){var s=this.socialNetwork[i];if(!s)return;r.ga("send","event",s,t,n)},this))},r.trackFromCookie=function(){var e=document.cookie.split("; "),t={},n,r,i,s,o,u,a,f;if(!e)return;for(r in e)e.hasOwnProperty(r)&&(n=e[r].split("="),t[n[0]]=n[1]);u=t._sign_up_tracking;if(!u)return;a=unescape(u).split(",");if(a.length<3)return;i=a[0],s=a[1],o=a[2];if(!i||!s||!o)return;f=this.getAction(),f.indexOf("profile/settings")>-1&&(f="Sign Up"),f==="Video"&&(f="Single Video Page"),this.trackRaw(this.category.signUpMethodLocation,i,1,f),this.trackRaw(this.category.signUpTime,s,1,o),document.cookie="_sign_up_tracking=; expires=Thu, 01 Jan 1970 00:00:00 UTC"},r.trackFromUrl=function(){var n,i,s,o,u,a;n=window.location.search.match(/[\?\&]_ga=([^\&]+)/);if(!n)return;i=unescape(n[1]).split(","),s=i[0],o=i[1],u=this.parsePath(i[2]),s&&o&&u&&r.track(s,o,1,u),a=e.buildUrl(!0,{_ga:null}),t(a)},r.onload=function(){this.trackFromUrl(),this.trackFromCookie(),n.initializeLogging()},r.ga=function(){y$.noop()},window.yoko.eventTrack=r,r.onload(),r}),define("util/stringUtils",[],function(){"use strict";var e={isEmpty:function(e){var t=/^\s{1,}$/g,n=!1;return e.length===0||e===null||e.search(t)>-1?n=!0:n=!1,n}};return e}),define("text!t/nav/signUp.smarty",[],function(){return'{**\n * Signup module.\n *\n * @param array   $socialAuth   Authentication links and related data for social providers.\n * @param array   $urls         URL\'s for terms of service and privacy policy.\n * @param boolean $disableLogin If we want to disable login.\n *\n * To be shown when user is not logged in. Contains introduction text and sign up/sign in buttons.\n *}\n<div class="l-dialog l-dlg-modal l-dlg-center l-dlg-vertical-center l-dlg-signup email-flow">\n    <div class="email-signin-invalid">\n        <span>{h k=\'signin.email.loginError\'}</span>\n    </div>\n    <a class="close-link" href="#">\n        <i class="l-dlg-close icon icn-close-l"></i>\n    </a>\n    <div class="l-dlg-body">\n        <div class="connect seven">\n            <h1>{h k=\'shared.curatedShareCollect\'}</h1>\n            {include "../util/socialConnect.smarty" authStructure=$socialAuth disableLogin=$disableLogin}\n            {include "../util/emailSignup.smarty" disableLogin=$disableLogin}\n            {include "../util/emailSignin.smarty" disableLogin=$disableLogin}\n            {include "../util/forgotPassword.smarty" disableLogin=$disableLogin}\n        </div>\n    </div>\n</div>\n'}),define("text!t/util/socialConnect.smarty",[],function(){return'{**\n * Social connect module. Adds connect/login links for the current URL.\n *\n * @param array   $authStructure Authentication links and config data for social providers.\n * @param boolean $disableLogin  If we want to disable login.\n * @param String  $className     Module specific class name if required.\n *}\n<ul class="social-connect {if isset($className)}{$className}{/if}">\n    {foreach $authStructure as $provider => $config}\n    <li>\n       <a class="btn-social btn-soc-{$provider} {if $disableLogin}disable-login{/if}" href="{$config.authUrl}"{if $config.winTarget} target="{$config.winTarget}"{/if}\n       {if $config.onclick && !$disableLogin} onclick="{$config.onclick}"{/if}>{h k=$config.text}</a>\n    </li>\n    {/foreach}\n</ul>\n'}),define("text!t/util/emailSignup.smarty",[],function(){return'{**\n * Email sign up - used in both home page & modal.\n *\n * @param boolean $disableLogin If we want to disable login.\n *}\n<div class="signup-with-email">\n    {h k=\'signup.email\' linkAttrs=\'href="#" class="show_email_signup"\'}\n    |\n    {h k=\'signup.shared.login\' linkAttrs=\'href="#" class="launch-email-signin"\'}\n</div>\n\n<div class="email-signup email_signup_form">\n    <div class="ems-box">\n        <div class="ems-field ems-fld-long">\n            <input type="text" name="fullName" value="" placeholder="{h k=\'signup.email.form.name\'}" />\n            <i class="icon ems-input-success"></i>\n            <i class="icon ems-input-error ems_input_error"></i>\n            <div class="ems-input-failed-msg"></div>\n        </div>\n        <div class="ems-field ems-fld-long">\n            <input type="email" name="emailAddress" value="" placeholder="{h k=\'signup.email.form.email\'}" />\n            <i class="icon ems-input-success"></i>\n            <i class="icon ems-input-error ems_input_error"></i>\n            <div class="ems-input-failed-msg"></div>\n        </div>\n        <div class="ems-field ems-fld-long">\n            <input type="password" name="password" value="" placeholder="{h k=\'signup.email.form.psw\'}" />\n            <i class="icon ems-input-success"></i>\n            <i class="icon ems-input-error ems_input_error"></i>\n            <div class="ems-input-failed-msg"></div>\n        </div>\n        <div class="ems-field ems-fld-medium ems-dob-opt">\n            <input type="text" name="birthYear" value="" maxlength="4" placeholder="{h k=\'signup.email.form.dob\'}" />\n            <i class="icon ems-input-success"></i>\n            <i class="icon ems-input-error ems_input_error"></i>\n            <div class="ems-input-failed-msg"></div>\n        </div>\n        <div class="ems-field ems-fld-short ems_sex_opt" data-sex-val="m">\n            <div class="ems-radio-label">\n                {h k=\'signup.email.form.sexM\'}\n            </div>\n        </div>\n        <div class="ems-field ems-fld-short ems_sex_opt" data-sex-val="f">\n            <div class="ems-radio-label">\n                {h k=\'signup.email.form.sexF\'}\n            </div>\n        </div>\n        <input type="hidden" name="sex" value="" />\n        <button name="submit" class="submit {if $disableLogin}disable-login{/if}">{h k=\'signup.email.form.btn\'}</button>\n    </div>\n    <div class="ems-has-account">\n        {h k=\'signup.email.haveAccount\' linkAttrs=\'href="#" class="show_email_signin"\'}\n    </div>\n</div>\n'}),define("text!t/util/emailSignin.smarty",[],function(){return'{**\n * Email sign up - used in both home page & modal.\n *\n * @param array   $footerUrls   Links for privacy policy.\n * @param boolean $disableLogin If we want to disable login.\n *}\n<form class="email-signin-form">\n    <div class="email-signin email_signin_form">\n        <div class="ems-box">\n            <div class="ems-field ems-fld-long">\n                <input type="email" name="emailAddress" value="" placeholder="{h k=\'signup.email.form.email\'}" />\n            </div>\n            <div class="ems-field ems-fld-long">\n                <input type="password" name="password" value="" placeholder="{h k=\'signup.email.form.psw\'}" />\n            </div>\n            <button name="submit" class="submit {if $disableLogin}disable-login{/if}">{h k=\'signin.email.form.btn\'}</button>\n        </div>\n        <div class="ems-forgot-psw">\n            {h k=\'signin.email.forgotPsw\' linkAttrs=\'href="#" class="ems-forgot-psw ems_forgot_psw"\'}\n        </div>\n    </div>\n    <div class="l-dlg-privacy">\n        {h k=\'shared.bySigningUp.privacy.info\'}\n        <span></span>\n        {h k=\'shared.byCreating\' termsLinkAttrs="href=\'{$footerUrls.tos}\' target=\'_blank\'" privacyLinkAttrs="href=\'{$footerUrls.privacy}\' target=\'_blank\'"}\n    </div>\n    <div class="email-signin email_signin_form">\n        <div class="ems-has-account">\n            {h k=\'signin.email.dontHaveAccount\' linkAttrs=\'href="#" class="show_email_signup"\'}\n        </div>\n    </div>\n</form>\n'}),define("text!t/util/forgotPassword.smarty",[],function(){return'{**\n * Forgot Password - used in both home page & modal.\n *\n * @param boolean $disableLogin If we want to disable login.\n *}\n<div class="email-forgot-psw email_forgot_psw">\n    <div class="ems-box">\n        <div class="ems-field ems-fld-long">\n            <input type="email" name="email" value="" placeholder="{h k=\'signin.email.forgotPsw.field.placeholder\'}" />\n            <i class="icon ems-input-success"></i>\n            <i class="icon ems-input-error ems_input_error"></i>\n            <div class="ems-input-failed-msg"></div>\n        </div>\n        <button name="submit" class="submit {if $disableLogin}disable-login{/if}">{h k=\'signin.email.forgotPsw.btn\'}</button>\n    </div>\n    <div class="ems-forgot-psw">\n        {h k=\'signin.email.forgotPsw.backLogin\' linkAttrs=\'href="#" class="show_email_signin"\'}\n    </div>\n</div>\n<div class="email-psw-reset-sent email_psw_reset_sent">\n    <h2>{h k=\'signin.email.forgotPsw.subTitle\'}</h2>\n    <div class="ems-box">\n        <button name="submit" class="submit show_email_signin">{h k=\'signin.email.form.btn\'}</button>\n    </div>\n    <div class="ems-forgot-psw">\n        {h k=\'signin.email.forgotPsw.didntGet\' linkAttrs=\'href="#" class="ems_forgot_psw"\'}\n    </div>\n</div>\n'}),define("text!t/auth/newSignIn.smarty",[],function(){return'{**\n * Sign in form.\n *\n * @param boolean $showForm   Whether to show the native sign in form.\n * @param string  $signUpUrl  Sign up URL.\n * @param string  $actionUrl  URL to post to.\n * @param array   $form       Form inputs (derived from post and cookie data).\n * @param array   $errors     Errors from a previous submit.\n * @param array   $socialAuth Array of social sign in provider data.\n * @param boolean $openPopup  Open popup on non-mobile devices.\n *}\n<div class="ath-bg">\n    <div class="controls">\n        <div class="l-dialog l-dlg-modal l-dlg-center l-dlg-vertical-center l-dlg-signup l-dlg-bookmarklet-sign prevent-close auth-signin signup-img">\n            <div class="email-signin-invalid">\n                <span>{h k=\'signin.email.loginError\'}</span>\n            </div>\n            <div class="l-dlg-body">\n                <div class="connect seven">\n                    <i class="icon icn-mode-logo"></i>\n                    <h1>{h k=\'shared.curatedShareCollect\'}</h1>\n                    {include "../util/socialConnect.smarty" authStructure=$socialAuth}\n                    {include "../util/emailSignup.smarty"}\n                    {include "../util/emailSignin.smarty"}\n                    {include "../util/forgotPassword.smarty"}\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n'}),define("util/ifdefor",[],function(){"use strict";function e(e,t){return e!==undefined?e:t!==undefined?t:null}return e});var monster={set:function(e,t,n,r,i){var s=new Date,o="",u=typeof t,a="",f="";if(r=r||"/",n&&(s.setTime(s.getTime()+24*n*60*60*1e3),o="; expires="+s.toUTCString()),"object"===u&&"undefined"!==u){if(!("JSON"in window))throw"Bummer, your browser doesn't support JSON parsing.";a=encodeURIComponent(JSON.stringify({v:t}))}else a=encodeURIComponent(t);i&&(f="; secure"),document.cookie=e+"="+a+o+"; path="+r+f},get:function(e){for(var t=e+"=",n=document.cookie.split(";"),r="",i="",s={},o=0;o<n.length;o++){for(var u=n[o];" "==u.charAt(0);)u=u.substring(1,u.length);if(0===u.indexOf(t)){if(r=decodeURIComponent(u.substring(t.length,u.length)),i=r.substring(0,1),"{"==i)try{if(s=JSON.parse(r),"v"in s)return s.v}catch(a){return r}return"undefined"==r?void 0:r}}return null},remove:function(e){this.set(e,"",-1)},increment:function(e,t){var n=this.get(e)||0;this.set(e,parseInt(n,10)+1,t)},decrement:function(e,t){var n=this.get(e)||0;this.set(e,parseInt(n,10)-1,t)}};define("deps/cookie-monster/cookie-monster.min",function(){}),define("util/actionStorage",["deps/cookie-monster/cookie-monster.min"],function(){"use strict";var e={},t={};return e.setAction=function(e,n){t.storageType=n?"cookie":"sessionStorage",window.yoko.yaction=e},e.saveAction=function(){var e=window.yoko.yaction;e&&t.set("yaction",e)},e.clearAction=function(){window.yoko.yaction=null,t.clear("yaction")},e.getAction=function(){return t.get("yaction")},t.set=function(e,n){t.clear(e),t.storageType==="sessionStorage"&&window.sessionStorage&&window.sessionStorage.setItem(e,JSON.stringify(n)),t.storageType==="cookie"&&monster.set(e,JSON.stringify(n),1/24/6)},t.get=function(e){var t;if(window.sessionStorage){t=window.sessionStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(n){}}t=monster.get(e);if(t){try{return JSON.parse(t)}catch(n){}return t}},t.clear=function(e){window.sessionStorage&&window.sessionStorage.removeItem(e),monster.remove(e)},e}),define("views/overlay",[],function(){"use strict";return Backbone.View.extend({showOverlay:function(e){var t=e.closest(".l-dlg-overlay");if(!t.length){if(!e.hasClass("l-dlg-modal"))return;e.wrap('<div class="l-dlg-overlay"/>'),t=e.closest(".l-dlg-overlay")}t.show(),this.lockBodyPosition()},hideOverlay:function(e){var t=e.closest(".l-dlg-overlay");if(!t.length)return;t.fadeOut("normal",this.unlockBodyPosition)},lockBodyPosition:function(){var e=y$("body"),t=y$(window),n=e.width();if(e.hasClass("locked"))return;e.find("> *:visible").not(".l-dlg-overlay").each(function(){var e=y$(this),t,r;if(e.css("position")!=="fixed")return;if(e.width()===n&&!e[0].style.width)e.data("oldWidth","auto"),e.width(n);else{t=e.css("left"),r=e.css("right");if(t!=="auto"||r==="auto"||parseInt(t,10)<parseInt(r,10))return;e.data("oldRight",r),e.css({left:e.position().left,right:"auto"})}}),window.yoko.device.touchEnabled&&(n="100%"),e.data("oldOverflow",e.css("overflow")),e.data("oldMaxWidth",e.css("max-width")),e.data("oldPosition",e.css("relative")),e.addClass("locked"),e.css({overflow:"hidden","max-width":n,width:"100%",position:"fixed",top:-1*t.scrollTop()})},unlockBodyPosition:function(){var e=y$("body"),t=y$(window),n=Math.abs(parseInt(e.css("top"),10));e.css({overflow:e.data("oldOverflow")||"auto","max-width":e.data("oldMaxWidth")||"none",position:e.data("oldPosition")||"static",top:"initial"}),t.scrollTop(n),e.find("> *:visible").each(function(){var e=y$(this);if(e.css("position")!=="fixed")return;e.data("oldWidth")==="auto"?e.css("width",""):e.data("oldRight")&&(e.css({left:"auto",right:e.data("oldRight")}),e.data("oldRight",null))}),e.removeClass("locked")},skipOverlayEvents:function(){y$("body").on("click touchstart touchend",".l-dlg-overlay",function(e){e.stopPropagation()})}})}),define("text!t/loading.smarty",[],function(){return'{**\n * Loading indicator.\n *\n * @param string $loadingColor Class required for the color of loading indicator.\n * @param string $loadingClass Additional class required for the loading indicator.\n *}\n<span class="loading loading-indicator{if $loadingColor} {$loadingColor}{else} ldg-on-light{/if}{if $loadingClass} {$loadingClass}{/if}"></span>\n'}),define("views/dialog",["template","views/overlay","text!t/loading.smarty"],function(e,t,n){"use strict";return t.extend({requireSignIn:!0,initialize:function(e){(!this.requireSignIn||window.yoko&&!y$.isEmptyObject(window.yoko.user))&&this.initDialog(e.dialogSelector),this.buttonSelector=e.buttonSelector,this.bindButtonClick("body")},bindButtonClick:function(e){this.buttonSelector&&y$(e).on("click",this.buttonSelector,y$.proxy(this.handleButtonClick,this))},unbindButtonClick:function(e){this.buttonSelector&&y$(e).off("click",this.buttonSelector)},handleButtonClick:function(e){var t=y$(e.currentTarget);!t.hasClass("logged_out_enabled")&&this.requireSignIn&&(!window.yoko||y$.isEmptyObject(window.yoko.user))?window.yoko.signupView===undefined?window.location=window.yoko.auth.signUp:window.yoko.signupView.showDialog(e):this.showDialog(e)},initDialog:function(e){this.$dialog=y$(e),window.hasOwnProperty("ontouchstart")?(this.$dialog.on("touchend",".l-dlg-close",y$.proxy(this.closeDialog,this)),this.$dialog.on("click",".l-dlg-close",function(e){e.preventDefault(),e.stopPropagation()})):this.$dialog.on("click",".l-dlg-close",y$.proxy(this.closeDialog,this)),y$("body").on("click",y$.proxy(function(t){if(!this.$dialog.is(":visible")||this.$dialog.hasClass("prevent-close"))return;y$(t.target).closest(e).length||this.closeDialog(t)},this)).on("keyup",y$.proxy(function(e){e.keyCode===27&&this.closeDialog(e)},this))},showBusy:function(t){var r,i=y$(e.render(n,{loadingClass:"l-dlg-loading-indicator"}));r=this.$dialog.find(".l-frm-submit"),t===!1?(this.$dialog.find(".l-dlg-disabled, .loading-indicator").remove(),r.removeClass("is-closed")):(this.$dialog.append('<div class="l-dlg-disabled"></div>'),r.addClass("is-closed"),this.$dialog.append(i))},isBusy:function(){return this.$dialog.find(".l-dlg-disabled").length>0}})}),define("views/navigation/signup",["template","text!t/nav/signUp.smarty","text!t/util/socialConnect.smarty","text!t/util/emailSignup.smarty","text!t/util/emailSignin.smarty","text!t/util/forgotPassword.smarty","text!t/auth/newSignIn.smarty","util/ifdefor","util/actionStorage","util/http","views/dialog","i18n"],function(e,t,n,r,i,s,o,u,a,f,l,c){"use strict";var h=".l-dlg-signup",p=".nav-auth",d;return d=l.extend({parentSelector:".signup-img",defaultModalView:"signup",initialize:function(){var e=this;this.requireSignIn=!1,l.prototype.initialize.call(this,{dialogSelector:h,buttonSelector:p}),y$("body").on("click",h+" .l-dlg-close",function(t){return e.closeDialog(),!1}),y$("body").on("click",".launch-email-signin",y$.proxy(function(t){return this.defaultModalView="login",e.showDialog(t),!1},this)),y$("body").on("click",".show_email_signin",y$.proxy(function(t){return e.showForm("email_signin_form"),!1},this)),y$("body").on("click",".show_email_signup",y$.proxy(function(t){return e.showForm("email_signup_form"),!1},this)),y$("body").on("click",".ems_forgot_psw",y$.proxy(function(t){return e.showForm("email_forgot_psw"),!1},this)),y$("body").on("touchstart mouseover",".ems_input_error",y$.proxy(function(t){e.showErrorMsg(y$(t.currentTarget))},this)),y$("body").on("mouseout",".ems_input_error",y$.proxy(function(t){e.hideErrorMsg(y$(t.currentTarget))},this)),y$("body").on("click",".email_signup_form .ems_sex_opt",y$.proxy(function(t){e.chooseSex(y$(t.currentTarget))},this)),y$("body").on("click",".email_signup_form button[name=submit]",y$.proxy(function(t){e.validateForm(y$(t.currentTarget),"signup")},this)),y$("body").on("click",".email_forgot_psw button[name=submit]",y$.proxy(function(t){e.validateForm(y$(t.currentTarget),"forgotpsw")},this)),y$("body").on("click",".btn-social",y$.proxy(function(e){a.saveAction()},this)),y$("body").on("focus",".email_signup_form input",y$.proxy(function(t){e.inputFocusActions(y$(t.currentTarget))},this)),y$("body").on("blur",".email_signup_form input",y$.proxy(function(t){e.inputBlurActions(y$(t.currentTarget))},this)),y$("body").on("submit","form.email-signin-form",y$.proxy(function(t){t.preventDefault(),t.stopPropagation(),e.validateLogInForm()},this))},inputFocusActions:function(e){var t=e.parent(".ems-field");t.find(".ems-input-failed-msg").hide(),e.attr("placeholder",""),e.attr("autocomplete","off")},inputBlurActions:function(e){var t=e.attr("name"),n=e.val(),r;t==="fullName"&&(e.attr("placeholder",c.text("signup.email.form.name")),r={fullName:n}),t==="emailAddress"&&(e.attr("placeholder",c.text("signup.email.form.email")),r={emailAddress:n}),t==="password"&&(e.attr("placeholder",c.text("signup.email.form.psw")),r={password:n}),t==="birthYear"&&(e.attr("placeholder",c.text("signup.email.form.dob")),r={birthYear:n}),f.post("/api/web/latest/auth/signUp",r,y$.proxy(function(e){var n=e.error.fullName,r=e.error.emailAddress,i=e.error.existingUser,s=e.error.password,o=e.error.birthYear,u="signup.email.";t==="fullName"&&(n?this.toggleFieldReturn("fullName",!0,u+this.getMessageKey(n),this.getMessageParams(n)):this.toggleFieldReturn("fullName",!1,"")),t==="emailAddress"&&(r?this.toggleFieldReturn("emailAddress",!0,u+this.getMessageKey(r),this.getMessageParams(r)):t==="emailAddress"&&i?this.toggleFieldReturn("emailAddress",!0,"signup.email.auth.existingUser"):this.toggleFieldReturn("emailAddress",!1,"")),t==="password"&&(s?this.toggleFieldReturn("password",!0,u+this.getMessageKey(s),this.getMessageParams(s)):this.toggleFieldReturn("password",!1,"")),t==="birthYear"&&(o?this.toggleFieldReturn("birthYear",!0,u+this.getMessageKey(o),this.getMessageParams(o)):this.toggleFieldReturn("birthYear",!1,""))},this))},showForm:function(e){var t=y$(this.parentSelector+" .email_signup_form"),n=y$(this.parentSelector+" .email_signin_form"),r=y$(this.parentSelector+" .email_forgot_psw"),i=y$(this.parentSelector+" .email_psw_reset_sent"),s=y$(this.parentSelector+" .signup-with-email"),o=y$(this.parentSelector+" .btn-soc-facebook"),u=y$(this.parentSelector+" .btn-soc-twitter");this.resetForm(),e==="email_signup_form"?(n.hide(),r.hide(),i.hide(),s.hide(),o.text(c.text("social.signup.facebook")),u.text(c.text("social.signup.twitter")),this.parentSelector===".signup-img"&&y$(".signup-img").addClass("signup-img-tall"),y$(this.parentSelector+" .connect").addClass("ems-signup"),y$(this.parentSelector+" .connect").removeClass("ems-signin"),y$(this.parentSelector+" .connect").removeClass("ems-forgotpsw"),t.show()):e==="email_signin_form"?(t.hide(),r.hide(),i.hide(),o.text(c.text("social.facebook.connect")),u.text(c.text("social.twitter.connect")),y$(this.parentSelector+" .connect").addClass("ems-signin"),y$(this.parentSelector+" .connect").removeClass("ems-signup"),y$(this.parentSelector+" .connect").removeClass("ems-forgotpsw"),n.show()):e==="email_forgot_psw"&&(n.hide(),i.hide(),y$(this.parentSelector+" .social-connect").hide(),y$(this.parentSelector+" .l-dlg-privacy").hide(),y$(this.parentSelector+" .connect h1").html(c.html("signin.email.forgotPsw.title")),y$(this.parentSelector+" .connect").addClass("ems-forgotpsw"),y$(this.parentSelector+" .connect").removeClass("ems-signin"),y$(this.parentSelector+" .connect").removeClass("ems-signup"),r.show())},validateForm:function(e,t){var n=e.closest(".email_signup_form"),r=e.closest(".email_forgot_psw"),i;y$(".ems-input-failed-msg").hide(),t==="signup"?(i={emailAddress:n.find("input[name=emailAddress]").val(),password:n.find("input[name=password]").val(),confirmPassword:n.find("input[name=password]").val(),fullName:n.find("input[name=fullName]").val(),birthYear:n.find("input[name=birthYear]").val(),sex:n.find("input[name=sex]").val()},f.post("/api/web/latest/auth/signUp",i,y$.proxy(this.handleSignUpPostResult,this))):t==="forgotpsw"&&(i={email:r.find("input[name=email]").val()},f.post("/api/web/latest/profile/resetPassword",i,y$.proxy(this.handleForgotPswPostResult,this)))},validateLogInForm:function(){var e=y$(this.parentSelector+" .email_signin_form"),t;y$(".ems-input-failed-msg").hide(),t={emailAddress:e.find("input[name=emailAddress]").val(),password:e.find("input[name=password]").val()},f.post("/api/web/latest/auth/signIn",t,y$.proxy(this.handleSignInPostResult,this))},getMessageKey:function(e){return typeof e=="string"?e:e[0]},getMessageParams:function(e){return typeof e=="string"?{}:e[1]},handleSignUpPostResult:function(e){var t,n,r,i,s,o,u="signup.email.";if(e.status!=="error"){a.saveAction(),o=window.location.href,o=f.buildUrl(o,{coachmark:"true"}),window.location=o;return}t=e.error.fullName,n=e.error.emailAddress,r=e.error.existingUser,i=e.error.password,s=e.error.birthYear,t?this.toggleFieldReturn("fullName",!0,u+this.getMessageKey(t),this.getMessageParams(t)):this.toggleFieldReturn("fullName",!1,""),n?this.toggleFieldReturn("emailAddress",!0,u+this.getMessageKey(n),this.getMessageParams(n)):r?this.toggleFieldReturn("emailAddress",!0,"signup.email.auth.existingUser"):this.toggleFieldReturn("emailAddress",!1,""),i?this.toggleFieldReturn("password",!0,u+this.getMessageKey(i),this.getMessageParams(i)):this.toggleFieldReturn("password",!1,""),s?this.toggleFieldReturn("birthYear",!0,u+this.getMessageKey(s),this.getMessageParams(s)):this.toggleFieldReturn("birthYear",!1,"")},handleSignInPostResult:function(e){var t,n,r,i;if(e.status!=="error"){a.saveAction(),window.location.reload();return}t=e.error.emailAddress,n=e.error.password,r=e.error.invalidUser,i=e.error.invalidPassword,t&&this.toggleFieldReturn("emailAddress",!0,""),n&&this.toggleFieldReturn("password",!0,"");if(r||i)this.toggleFieldReturn("emailAddress",!0,""),this.toggleFieldReturn("password",!0,""),y$(this.parentSelector).find(".email-signin-invalid").show()},handleForgotPswPostResult:function(e){var t;if(e.status!=="error"){y$(this.parentSelector+" .email-signin-invalid").hide(),y$(this.parentSelector+" .email-forgot-psw").hide(),y$(this.parentSelector+" .email-psw-reset-sent").show(),y$(this.parentSelector+" .connect h1").html(c.html("signin.email.forgotPsw.sent.title"));return}t=e.error.email,t?this.toggleFieldReturn("email",!0,"signin.email.forgotPsw.error"):this.toggleFieldReturn("email",!1,"")},toggleFieldReturn:function(e,t,n,r){var i=y$(this.parentSelector+" input[name="+e+"]"),s=i.parent(".ems-field");r=u(r,{}),t?(s.addClass("has-error"),s.removeClass("has-success"),s.find(".ems-input-failed-msg").html(c.html(n,r))):!t&&i.val()!==""&&(s.addClass("has-success"),s.removeClass("has-error"),s.find(".ems-input-failed-msg").html(),s.find(".ems-input-failed-msg").hide())},showErrorMsg:function(e){y$(".ems-input-failed-msg").hide(),e.next(".ems-input-failed-msg").show()},hideErrorMsg:function(e){e.next(".ems-input-failed-msg").hide()},chooseSex:function(e){var t=e.data("sexVal"),n=y$(this.parentSelector+" input[name=sex]");n.val(t),n.val()==="m"?(y$(this.parentSelector+" .ems_sex_opt[data-sex-val=m]").addClass("is-executed"),y$(this.parentSelector+" .ems_sex_opt[data-sex-val=f]").removeClass("is-executed")):(y$(this.parentSelector+" .ems_sex_opt[data-sex-val=f]").addClass("is-executed"),y$(this.parentSelector+" .ems_sex_opt[data-sex-val=m]").removeClass("is-executed"))},resetForm:function(){y$(this.parentSelector+" .ems-field input").val(""),y$(this.parentSelector+" input[name=sex]").val(""),y$(this.parentSelector+" .ems-field").removeClass("is-executed"),y$(this.parentSelector+" .ems-field").removeClass("has-error"),y$(this.parentSelector+" .ems-field").removeClass("has-success"),y$(this.parentSelector+" .ems-input-failed-msg").hide(),y$(this.parentSelector+" .email-signin-invalid").hide(),y$(this.parentSelector+" .social-connect").show(),y$(this.parentSelector+" .l-dlg-privacy").show(),y$(this.parentSelector+" .connect h1").html(c.html("shared.curatedShareCollect"))},showDialog:function(o){if(window.yoko.disableLoginView&&window.yoko.disableLogin){window.yoko.disableLoginView.showDialog(o);return}var u=y$(e.render(t,{socialAuth:window.yoko.connect.socialAuth,footerUrls:window.yoko.connect.footerUrls,emailSignupModal:window.yoko.emailSignupModal,disableLogin:window.yoko.disableLogin},{"../util/socialConnect.smarty":n,"../util/emailSignup.smarty":r,"../util/emailSignin.smarty":i,"../util/forgotPassword.smarty":s}));this.resetForm(),this.parentSelector=".l-dlg-signup",y$("body").append(u),y$(this.parentSelector+" .connect").addClass("ems-signin"),y$(this.parentSelector+" .btn-soc-facebook").text(c.text("social.facebook.connect")),y$(this.parentSelector+" .btn-soc-twitter").text(c.text("social.twitter.connect")),this.defaultModalView==="login"&&(y$(this.parentSelector).find(".email-signup").hide(),y$(this.parentSelector).find(".email-signin").show()),this.showOverlay(u)},closeDialog:function(){var e=y$(h);a.clearAction(),this.parentSelector=".signup-img",this.hideOverlay(e),e.fadeOut(function(){e.closest(".l-dlg-overlay").remove()})}}),window.yoko.signupView||(window.yoko.signupView=new d),window.yoko.signupView}),define("views/scrollToTop",["util/ifseta"],function(e){"use strict";var t=".scroll-to-top";return Backbone.View.extend({show:function(){var e=function(){y$("html, body").animate({scrollTop:0},1e3)};if(y$("body").hasClass("fixed-bg"))return;y$("body").on("click",t,e),y$(document).on("scroll",y_.throttle(y$.proxy(this.toggleVisibility,this),250))},toggleVisibility:function(){var e=y$(window).height()/2,n=y$(window).scrollTop();y$(t).toggleClass("is-visible",n>e)}})}),define("views/mainDialog",["views/overlay"],function(e){"use strict";return e.extend({initialFormValues:[],initialize:function(e){var t,n={autoCenter:!0,redirectIfNotSignedIn:!0,closeOnClickEsc:!0,startClosed:!0};typeof e=="object"&&(n=y$.extend(n,e)),n.redirectIfNotSignedIn&&!window.yoko&&!y$.isEmptyObject(window.yoko.user)?t=function(e){window.yoko.signupView===undefined?window.location=window.yoko.auth.signUp:window.yoko.signupView.showDialog(e)}:(t=y$.proxy(this.showDialog,this),this.initDialog(e.dialogSelector,n),this.$dialog.data("opts",n)),y$("body").on("click touchend",e.buttonSelector,t),this.initialFormValues=this.$dialog.find("form").serializeArray()},initDialog:function(e,t){this.$dialog=y$(e),t&&t.startClosed&&this.$dialog.addClass("is-closed"),window.hasOwnProperty("ontouchstart")?(this.$dialog.on("touchend",".l-dlg-close",y$.proxy(this.closeDialog,this)),this.$dialog.on("click",".l-dlg-close",function(e){e.preventDefault(),e.stopPropagation()})):this.$dialog.on("click",".l-dlg-close",y$.proxy(this.closeDialog,this)),window.hasOwnProperty("ontouchstart")&&y$(window).width()<=1024||this.$dialog.find(".l-dlg-header").css("cursor","move"),this.$dialog.on("touchstart",":input",function(e){var t=y$(e.target);t.is(":focus")||y$(e.target).trigger("focus")}),t.closeOnClickEsc?y$("body").on("click touchend",y$.proxy(function(t){if(!this.$dialog.is(":visible"))return;y$(t.target).closest(e).length||this.hasChanges()||this.closeDialog(t)},this)).on("keydown",y$.proxy(function(e){e.keyCode===27&&(this.hasChanges()||this.closeDialog(e),e.preventDefault(),e.stopPropagation())},this)):this.skipOverlayEvents(),y$(window).resize(y$.proxy(function(){this.centerDialog(this.$dialog)},this))},hasChanges:function(){var e=this.$dialog.find("form").serializeArray();return JSON.stringify(this.initialFormValues)!==JSON.stringify(e)},showDialog:function(e,t){var n=this.$dialog||t,r=this,i=y$(n);e&&(e.stopPropagation(),e.preventDefault()),r.resetDialog(),i.removeClass("is-closed"),r.showOverlay(n),r.centerDialog(n)},centerDialog:function(e){var t=y$(window);if(e.length===0||!e.data("opts").autoCenter)return;e.css("top",""),e.css({position:"relative",top:Math.max(0,Math.floor(t.height()/2-e.outerHeight()/2))})},closeDialog:function(e,t){var n=this,r=y$(this.$dialog);return!this.$dialog||!this.$dialog.is(":visible")?!1:(e&&e.stopPropagation(),this.$dialog.hasClass("is-locked-open")?!1:t&&t!==this.contentId?!1:(window.clearTimeout(this.successTimeout),this.$dialog.addClass("is-closed").css({top:"",left:""}),r.addClass("is-closed"),n.resetDialog(),this.hideOverlay(this.$dialog),!0))},resetDialog:function(){y$(".l-overlay, .tlb-item.is-active").removeClass("is-active")},showBusy:function(e){var t;t=this.$dialog.find(".l-frm-submit"),e===!1?(this.$dialog.find(".l-dlg-disabled, .ntc-loading").remove(),t.show()):(this.$dialog.append('<div class="l-dlg-disabled"></div>'),t.hide(),t.after('<div class="ntc-loading"></div>'))}})}),define("views/deepLink",["template","text!t/util/deepLink.smarty","views/mainDialog","deps/cookie-monster/cookie-monster.min"],function(e,t,n){"use strict";var r=n.extend({modeAppUrl:null,initialize:function(){var e=y$(".detail-wrapper").data("contentId"),t=y$("body.hub .content-parent").data("contentId"),n=y$("body.hub .l-waterfall").data("id"),r=y$(".username").data("contentId");y$("body").hasClass("home")?this.modeAppUrl="mode://":e?this.modeAppUrl="mode://story/"+e:t?this.modeAppUrl="mode://hub/"+t:n?this.modeAppUrl="mode://hub/"+n:r&&(this.modeAppUrl="mode://profile/"+r),y$("body").on("click",".dplk_goto_app",y$.proxy(function(e){this.deepLinkRedirect()},this)),y$(document).on("scroll",y_.throttle(y$.proxy(this.toggleCta,this),250))},toggleCta:function(){var e=y$(document).scrollTop(),t=y$(window).height()/2;e>t&&y$("#dplk_ios_redirect").slideUp("medium",function(){y$(".nav + .l-content").css("border-top","50px solid transparent")})},deepLinkRedirect:function(){y$("body").append('<iframe id="deep_link"/>'),y$("iframe#deep_link").css("visibility","hidden"),y$("iframe#deep_link").attr("src",this.modeAppUrl),setTimeout(function(){window.location="https://itunes.apple.com/us/app/mode-stories/id575737456?mt=8"},500)},showDeepLinkCta:function(){var n,r=monster.get("_count_cta_loads"),i=10;if(this.modeAppUrl===null||r>=1)return;r?(r=parseInt(r,i)+1,monster.set("_count_cta_loads",r,1)):(r=1,monster.set("_count_cta_loads",r,1)),(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i))&&document.cookie.indexOf("iphone_redirect=false")===-1&&(n=y$(e.render(t)),y$(".nav-sticky").prepend(n),y$(".nav + .l-content").css("border-top","113px solid transparent"))}});return new r}),define("placeholder",["i18n"],function(e){"use strict";var t={},n,r;return t.init=function(e,t){y$(e).each(function(){n(this,t)}),y$("body").on("focus",e,function(e){y$(this).data("usingPlaceholder")&&(y$(this).text(""),y$(this).toggleClass("placeholder",!1),y$(this).data("usingPlaceholder",!1),y$(this).prop("contenteditable")&&r(this))}),y$("body").on("blur",e,function(){n(this,t)})},t.release=function(e){y$("body").off("focus blur",e)},n=function(t,n){var r=y$(t).data("placeholder");n=n||{},!y$.trim(y$(t).text())&&r&&(y$(t).text(e.text(r,n)),y$(t).toggleClass("placeholder",!0),y$(t).data("usingPlaceholder",!0))},r=function(e){var t,n;t=document.createRange(),t.selectNodeContents(e),t.collapse(!0),n=window.getSelection(),n.removeAllRanges(),n.addRange(t),y$(e).click()},t}),define("util/limitCharacters",[],function(){"use strict";var e={attach:function(t,n){var r;if(!t)return;n=n||{},r=y$(t),r.on("focus",".char-show",e.showCharCount).on("keyup",".char-show",e.calculateCharacterCount).on("paste",".char-show",function(t){setTimeout(function(){e.enforceMaxLength(y$(t.target))},100)}),n.hideOnBlur===!1?e.showCharCount({target:r.find(".char-show")}):r.on("blur",".char-show",function(t){window.setTimeout(e.hideCharCount,300,t)})},showCharCount:function(t){var n=y$(t.target);e.calculateCharacterCount(t),n.siblings(".char-limit").css("display","block"),n.siblings(".char-limit").css("visibility","visible")},hideCharCount:function(e){var t=y$(e.target);t.siblings(".char-limit").css("display","none"),t.siblings(".char-limit").css("visibility","hidden")},calculateCharacterCount:function(t){var n,r,i=y$(t.target);n=i.data("maxLength"),r=i.is(":input")?i.val().length:i.text().length,i.data("usingPlaceholder")?i.siblings(".char-limit").children().first().text(n):r>n?i.siblings(".char-limit").children().first().text(0):i.siblings(".char-limit").children().first().text(n-r),e.enforceMaxLengthOnKeyEvent(t)},enforceMaxLengthOnKeyEvent:function(t){var n,r,i=y$(t.target);if(t.keyCode<48&&t.keyCode!==32)return;n=i.data("maxLength");if(!(n>0))return;r=i.is(":input")?i.val().length:i.text().trim().length,r>=n&&(t.preventDefault(),t.type==="keyup"&&r-n>=1&&e.enforceMaxLength(i))},enforceMaxLength:function(e){var t=e.data("maxLength"),n=e.is(":input")?e.val().length:e.text().length;t&&n>t&&(e.is(":input")?e.val(e.val().substr(0,t)).blur():e.text(e.text().substr(0,t)).blur())}};return e}),define("text!t/error/input.smarty",[],function(){return'{**\n * Input error.\n *\n * @param string $html Error in HTML.\n *}\n<span class="error">\n    {$html}\n</span>\n'}),define("text!t/util/edtGroupRemove.smarty",[],function(){return'{**\n * Group item remove icon.\n *}\n<a href="#" class="edt-group-remove"><i class="icon icn-remove"></i></a>\n'}),define("editable",["template","i18n","placeholder","util/http","util/limitCharacters","util/datetime","text!t/error/input.smarty","text!t/util/edtGroupRemove.smarty"],function(e,t,n,r,i,s,o,u){"use strict";var a={},f=!1,l,c,h,p,d,v,m,g,y,b,w,E,S;return a.init=function(){n.init(".editable"),y$(".edt-text, .edt-time, .edt-int, .edt-url").prop("contenteditable",!0),y$(".edt-url").each(function(e,t){w(y$(t))}),d(y$(".edt-group-item")),f||(y$("body").on("focus",".edt-text, .edt-group-item, .edt-time, .edt-int, .edt-url",l).on("focus",".edt-dropdown",c).on("click",".edt-clear-url",y).on("click",".edt-group-remove",v).on("paste",".edt-text, .edt-time, .edt-int, .edt-url",function(e){E(e),setTimeout(function(){i.enforceMaxLength(y$(e.target))},100)}).on("keydown",".edt-time",function(e){e.keyCode===13&&y$(e.target).trigger("blur")}).on("keydown",".edt-text, .edt-int, .edt-url",function(e){e.keyCode===13&&!y$(this).hasClass("edt-wysiwyg")&&y$(e.target).trigger("blur"),i.enforceMaxLengthOnKeyEvent(e)}).on("keyup",".edt-text, .edt-int, .edt-url",function(e){i.enforceMaxLengthOnKeyEvent(e)}).on("keyup",".char-show",i.calculateCharacterCount).on("blur",".edt-text, .edt-time, .edt-int",h).on("blur",".edt-url",p).on("blur",".edt-group-item",m).on("blur",".editable-dropdown select",g),f=!0)},l=function(e){var t=y$(e.target);i.showCharCount(e),b(t),t.data("editableValue")&&t.text(t.data("editableValue")),t.addClass("is-active")},h=function(e,t){var n=y$(e.target),r=n.data("editableId"),o=n.data("editableField"),u=n.data("editableValue"),a,f;i.enforceMaxLength(y$(e.target));if(n.data("editableCallDisabled"))return!1;n.hasClass("edt-wysiwyg")?a=n.html().replace(/<br>\s*<\/div>/gi,"<br>").replace(/<div>/gi,"").replace(/<\/div>/gi,"<br>"):a=y$.trim(n.text()),i.hideCharCount(e),n.data("editableValue")?n.addClass("disabled").prop("disabled",!0):n.removeClass("is-active"),b(n);if(n.hasClass("edt-time")){f=s.parseTimeToMinutes(a);if(isNaN(f)){n.text(s.timeDuration(u));return}a=f}else n.hasClass("edt-int")&&(a=parseInt(a,10));n.data("usingPlaceholder")&&(a=""),S(n,{editableId:r,editableField:o,fieldValue:a},t)},p=function(e){var t=y$(e.target),n=function(e){return w(t),!0};h(e,n)},d=function(t){var n=e.render(u),r;t.each(function(e,t){var i=y$(t),s=y$.trim(i.text());i.data("usingPlaceholder")||i.data("val",s),i.prop("contenteditable",!0),r=i.closest(".editable-group").find(".edt-group-item").not(".edt-group-item-new").length,r>1&&!i.hasClass("edt-group-item-new")&&!i.next().hasClass("edt-group-remove")&&i.after(n)})},v=function(e){var t=y$(e.target).closest(".edt-group-row"),n=t.find(".edt-group-item");e.preventDefault(),n.data({val:!1}).text("").trigger("blur")},m=function(t){var r=[],i=y$(t.target).closest(".edt-group-item"),s=i.closest(".editable-group"),o=s.find(".edt-group-row"),u=[],a=s.data("editableId"),f=s.data("editableField"),l=s.data("editableTemplate"),c=s.data("editableNewTemplate"),h=y$.trim(i.text()),p=i.data("val");i.removeClass("is-active");if(!(p===!1||h!==p&&!i.data("usingPlaceholder")))return;if(s.hasClass("disabled"))return;s.addClass("disabled").find("*").prop("contenteditable",!1),o.each(function(e,t){var n=[],i=y$(t);i.find(".edt-group-item").each(function(){var e=y$(this),t=parseInt(e.data("editableIndex"),10)-1,r=y$.trim(e.text());e.data("usingPlaceholder")&&(r=""),r||(r=e.data("val")),r&&(n[t]=r)}),r.push(n),i.hasClass("edt-group-new")&&i.find(".edt-group-item").text("")}),S(i,{editableId:a,editableField:f,fieldValue:r},function(t){if(t.status!=="ok")return;s.find(".edt-group-row").html(""),y$.each(t.data[f],function(t,n){u.push(e.render(l,{i:t,val:n,editable:!0}))}),u.push(e.render(c)),o.eq(-1).after(u.join("")),o.remove(),n.init(s.find(".editable")),d(s.find(".edt-group-item")),s.removeClass("disabled")})},c=function(e){var t=y$(e.target),n=t.siblings(".editable-dropdown"),r=n.children("select");t.hide(),n.addClass("is-active").show(),r.focus()},g=function(e){var t=y$(e.target),n=t.closest(".editable-dropdown"),r=n.data("editableId"),i=n.data("editableField"),s=y$.trim(t.val());t.removeClass("is-active"),S(t,{editableId:r,editableField:i,fieldValue:s},function(e){if(e.status==="ok"){var t=n.find("option:selected").text();n.hide().siblings(".edt-dropdown").text(t).show()}return!0})},y=function(e){var t=y$(e.target).siblings(".edt-url");t.parent().find(".edt-clear-url").remove(),y$(e.target).remove(),t.html(""),b(t),t.addClass("is-active"),t.focus()},b=function(e){e.removeClass("edt-error"),e.siblings(".error").remove()},w=function(e){e.parent().find(".edt-clear-url").remove(),e.html()&&!e.data("usingPlaceholder")&&e.after('<a class="edt-clear-url"></a>')},E=function(e){e.preventDefault();var t=(e.originalEvent||e).clipboardData.getData("text/plain"),n=y$(e.target);n.hasClass("edt-notabs")&&(t=t.replace(/[\r\n\t]/gm," ")),document.execCommand("insertText",!1,t)},S=function(n,i,s){var u=encodeURIComponent(i.editableId),a=encodeURIComponent(i.editableField),f;r.put("/api/web/latest/content/"+u+"/field/"+a,{fieldValue:i.fieldValue},function(r){var u=!0;s!==undefined&&(u=s.call(this,r)),u===!0&&r.status!=="ok"&&(f=e.render(o,{html:t.html(r.errors[i.editableField].message)}),n.addClass("edt-error"),n.siblings(".error").length>0?n.siblings(".error").replaceWith(f):n.after(f)),n.hasClass("edt-error")||n.data("editableValue")&&(n.data("editableValue",i.fieldValue),n.text(r.data[i.editableField])),n.removeClass("is-active disabled").prop("disabled",!1)})},a.doTimeOut=function(e,t,n){var r;n||(n=1e3),e.on("keyup change",function(){window.clearTimeout(r),r=window.setTimeout(function(){t()},n)})},a}),define("text!t/nav/changeRegionLanguage.smarty",[],function(){return'{**\n * Change region/Language dialog(ROL).\n *\n * @param array   $regionsData    Data for the regions to be displayed.\n * @param array   $languagesData  Data for the languages to be displayed.\n * @param boolean $i18nUILanguage If i18n UI language flag is on or off.\n *}\n<div id="dlg_changeROL" class="l-dialog l-dlg-modal l-dlg-main l-dlg-center-content six is-closed">\n    <h3 class="l-dlg-header">\n        <i class="l-dlg-close icon icn-close-l"></i>\n        {h k="nav.dialog.changeROL.header"}\n    </h3>\n    <div class="l-dlg-body dlg-changeROL-body">\n        <form name="regionLanguageForm" class="region-language-form">\n            <div class="l-row">\n                <div class="l-boxes l-box-left dlg-select-label">{h k="nav.dialog.country"}:</div>\n                <div class="l-boxes l-box-right dlg-select l-overflow-visible">\n                    <select id="user_regions" autocomplete="off" name="user-regions" {if $regionsData|count === 1}disabled=""{/if}>\n                    {foreach $regionsData as $region}\n                        <option value="{$region.region}" class="" data-region="{$region.region}" data-flag="{$region.flagImage}" {if $region.selected}selected{/if}>{$region.displayName}</option>\n                    {/foreach}\n                    </select>\n                </div>\n            </div>\n            {if $i18nUILanguage}\n            <div class="l-row">\n                <div class="l-boxes l-box-left dlg-select-label">{h k="nav.dialog.language"}:</div>\n                <div class="l-boxes l-box-right dlg-select l-overflow-visible">\n                    <select id="user_languages" autocomplete="off" name="user-languages">\n                    {foreach $languagesData as $language}\n                        <option value="{$language.languageWithVariant}" class="" data-language-with-variant="{$language.languageWithVariant}" {if $language.selected}selected{/if}>{$language.displayName}</option>\n                    {/foreach}\n                    </select>\n                </div>\n            </div>\n            {/if}\n            <div class="l-row">\n                <div class="l-boxes l-box-right">\n                    <div class="button btn-primary btn-primary-l btn-blue btn-confirm-ROL">{h k="button.dialog.save"}</div>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>\n'}),define("util/styledSelectMenu",[],function(){"use strict";var e={};return e.initialize=function(){e.createSelectMenu()},e.createSelectMenu=function(e,t){var n=y$("body").find(e),r=n.children("option"),i=n.children("option:selected"),s=y$("<div/>").addClass("slm-display-box"),o=y$("<span/>").addClass("slm-text").attr("data-form-value",i.val()),u=y$("<ul/>").addClass("slm-ul");if(n.length===0)return;o.text(i.text()),s.append(o),s.append(u),r.each(function(){var e=y$("<li/>").addClass("slm-li").attr("data-form-value",y$(this).val()).text(y$(this).text());o.data("formValue")===y$(this).val()&&(e.addClass("is-selected"),s.data("initialValue",y$(this).val())),u.append(e)}),s.insertBefore(n),n.hide(),s.on("click",".slm-text",function(){var e=y$(this).next(".slm-ul");if(e.is(":visible")){e.removeClass("is-open").hide();return}y$(".slm-ul.is-open").hide(),e.addClass("is-open").show()}),s.on("click",".slm-li",function(){var e=y$(this).closest(".slm-ul"),i=y$(this).data("formValue");r.prop("selected",!1),y$(".slm-li").removeClass("is-selected"),n.find('option[value="'+i+'"]').prop("selected",!0),y$(this).addClass("is-selected"),n.val(i),o.text(y$(this).text()),t&&n.trigger(t),e.removeClass("is-open").hide()}),y$(document).on("click",function(e){!s.is(e.target)&&s.has(e.target).length===0&&u.hide()})},e.closeSelect=function(e){var t=y$(".slm-display-box"),n=y$(".slm-ul");!t.is(e.target)&&t.has(e.target).length===0&&n.hide()},e.resetSelect=function(e){var t,n,r,i;e.each(function(){t=y$(this).siblings(".slm-display-box"),n=t.children("ul"),r=t.children(".slm-text"),i=t.data("initialValue"),r.text(n.find("[data-form-value='"+i+"']").text()),y$(this).find('option[value="'+i+'"]').prop("selected",!0),n.children().removeClass("is-selected"),n.find("[data-form-value='"+i+"']").addClass("is-selected")})},e.initialize(),e}),define("views/navigation/changeRegionLanguage",["i18n","template","views/mainDialog","text!t/nav/changeRegionLanguage.smarty","util/http","util/eventTrack","util/styledSelectMenu"],function(e,t,n,r,i,s,o){"use strict";var u=n.extend({$dialog:null,dialogSelector:"#dlg_changeROL",buttonSelector:".mnu-country-language",confirmChangeSelector:".btn-confirm-ROL",mobileChangeRegion:".mnu-mobile-change-region",mobileChangeLanguage:".mnu-mobile-change-language",changeRegionLanguageUrl:"/api/web/latest/profile",initialize:function(){var e,i=y$(this.buttonSelector).data("languages"),s=y$(this.buttonSelector).data("regions"),u="",a="",f=y$(this.buttonSelector).data("i18nUiLanguage"),l="",c="";window.yoko.user&&window.yoko.user.id.replace(/.*:/,""),e=y$(t.render(r,{languagesData:i,regionsData:s,i18nUILanguage:f})),y$("body").append(e),n.prototype.initialize.call(this,{dialogSelector:this.dialogSelector,buttonSelector:this.buttonSelector,closeOnClickEsc:!1}),this.$dialog=y$(this.dialogSelector),y$("body").on("click",this.confirmChangeSelector,y$.proxy(function(e){var t=this.$dialog.find("#user_regions"),n=this.$dialog.find("#user_languages");u=t.find("option:selected").data("region"),a=t.siblings(".slm-display-box").find(".slm-text").data("formValue"),l=n.find("option:selected").data("languageWithVariant"),c=n.siblings(".slm-display-box").find(".slm-text").data("formValue"),this.changeRegionLanguage(u,l,a,c),this.closeDialog(e)},this)).on("click",this.mobileChangeRegion,y$.proxy(function(e){u=y$(e.currentTarget).data("region"),this.changeRegionLanguage(u,null)},this)).on("click",this.mobileChangeLanguage,y$.proxy(function(e){l=y$(e.currentTarget).data("languageWithVariant"),this.changeRegionLanguage(null,l)},this)).on("click",".mnu-accordion-head",y$.proxy(function(e){var t=e.currentTarget;this.toggleAccordion(t)},this)),y$("body").on("click touchend",".l-dlg-overlay, "+this.dialogSelector,function(e){o.closeSelect(e)}),o.createSelectMenu("#user_regions","change"),o.createSelectMenu("#user_languages","change")},changeRegionLanguage:function(e,t,n,r){var o={};e&&(o.region=e,n||(n=null),s.trackUserSettings(s.userSettings.action.region,n+" | "+e)),t&&(o.language=t,r||(r=null),s.trackUserSettings(s.userSettings.action.language,r+" | "+t)),this.trigger("locale-save"),i.put(this.changeRegionLanguageUrl,o,y$.proxy(function(){window.location.reload()},this))},toggleAccordion:function(e){var t=y$(e);t.closest(".mnu-accordion").toggleClass("is-open"),t.closest(".mnu-accordion").hasClass("is-open")&&t&&y$(".mnu-discover > li").animate({scrollTop:y$(".mnu-discover > li").scrollTop()+t.offset().top},200)},closeDialog:function(e){o.closeSelect(e),o.resetSelect(y$("#user_regions, #user_languages")),this.constructor.__super__.closeDialog.apply(this,[e])}});return new u}),define("views/navigation/index",["template","text!t/util/changePassword.smarty","text!t/util/deepLink.smarty","util/http","util/eventTrack","util/stringUtils","views/navigation/signup","views/scrollToTop","views/dialog","views/deepLink","i18n","editable","views/navigation/changeRegionLanguage"],function(e,t,n,r,i,s,o,u,a,f,l,c,h){"use strict";var p,d,v,m,g,y,b,w,E,S;p=function(e,t){e.toggleClass("is-open",t).toggleClass("is-closed",!t),e.parent().toggleClass("is-hovering",t),e.hasClass("l-dlg-notifications")&&t&&(e.trigger("ntf-dlg-open"),i.trackRaw(i.category.topNavigation,"Notifications")),e.hasClass("l-dlg-notifications")&&!t&&e.trigger("ntf-dlg-close"),e.hasClass("l-dlg-profile")&&t&&i.trackRaw(i.category.topNavigation,"Profile")},d=function(e){var t=y$(".nav-search"),n=y$(".nav-btn-search"),i=y$(".nav-discover"),s=y$(".nav-filters"),o=y$(".nav .inp-search"),u=y$(".nav-menu-section");if(!e&&n.data("searching"))return window.location=r.buildUrl("/"),!1;t.toggle(e),i.toggle(!e),s.toggle(!e),u.toggle(!e),n.toggleClass("is-selected",e),e?(t.find(".inp-search").focus(),n.parent().addClass("nav-search-active"),n.closest(".nav-top").addClass("nav-active")):(n.parent().removeClass("nav-search-active"),n.closest(".nav-top").removeClass("nav-active"),o.val().length>0?n.addClass("user-term"):n.removeClass("user-term"),o.blur())},v=function(e){var t=".nav-search-collapsible";y$(t).length>0&&!(y$(e.target).parents(t).length>0)&&d(!1)},m=function(){var e=y$(".nav .inp-search"),t=!1;return s.isEmpty(e.val())?t=!1:t=!0,t},g=function(){var e=null,t=y$(".nav"),n,r;if(!window.hasOwnProperty("ontouchstart"))return;n=function(e){if(window.pageYOffset===r&&e!==!0)return;r=window.pageYOffset,t.css({position:"absolute",top:r})},t.on("focus",":input",function(){n(!0),e===null&&(e=window.setInterval(n,10))}),t.on("blur",":input",function(){e!==null&&(window.clearInterval(e),e=null,t.css({position:"fixed",top:0}))})},S=function(e){e.fadeOut(function(){e.closest(".l-dlg-overlay").remove()})},E=function(e){var t=window.location.search.substring(1),n=t.split("&"),r,i;for(i=0;i<n.length;i+=1){r=n[i].split("=");if(r[0]===e)return r[1]}},b=function(){var n=y$(e.render(t)),i,s,u;s=E("resetPassword"),u=E("resetPasswordExpired"),s==="1"?(y$("body").append(n),n.find("input[name=t]").val(E("t")),n.find("input[name=c]").val(E("c")),n.closest(".l-dlg-overlay").show(),n.show()):u==="1"&&(o.showDialog(),o.showForm("email_forgot_psw"),y$(".l-dlg-signup .email-signin-invalid span").text(l.html("signin.email.forgotPsw.expired")),y$(".l-dlg-signup .email-signin-invalid").show()),n.on("click","button[name=submit]",function(){i={t:n.find("input[name=t]").val(),c:n.find("input[name=c]").val(),password:n.find("input[name=password]").val(),confirmPassword:n.find("input[name=confirmPassword]").val()},r.post("/api/web/latest/profile/changePassword",i,y$.proxy(w,this))}),n.on("click",".l-dlg-close, button[name=cancel]",function(){S(n)})},w=function(e){var t=y$("#ems_change_password");if(e.status!=="ok"){t.find(".ems-change-psw-errors").show(),t.find(".ems-field").addClass("has-error");return}t.find(".ems-field").removeClass("has-error"),t.find(".ems-change-psw-errors").hide(),t.find(".ems-change-psw-form").hide(),t.find(".ems-header-default").hide(),t.find(".ems-header-success").show(),t.find(".ems-change-psw-success").show()},y=function(){var e=y$(".nav"),t=e.outerHeight(),n=y$("#nav_search"),r,s;c.init(),n.on("submit",m),b(),f.showDeepLinkCta(),y$("body").on("click",function(e){p(y$(".l-dlg-dropdown.is-open"),!1),v(e)}).on("click",".l-dlg-open",function(e){var t=y$(this).nextAll(".l-dialog").not(".is-open");e.preventDefault(),e.stopPropagation(),p(t,!0),p(y$(".l-dialog.is-open").not(t),!1),v(e)}).on("click touchstart",".l-dlg-dropdown",function(e){e.stopPropagation()}).on("click",".l-dlg-splash .l-dlg-close",function(e){e.preventDefault(),p(y$(this).closest(".l-dialog"),!1)}).on("click touchstart",".channel-link ",function(e){y$(e.target).hasClass("editable")&&e.preventDefault();var t=null;y$(e.target).closest("li").data("contentTitle")&&(t=y$(e.target).closest("li").data("contentTitle")),t&&i.trackRaw(i.category.topNavigation,"Channel",1,t)}).on("click touchstart",".nav-logo",function(e){i.trackRaw(i.category.topNavigation,"Logo")}).on("click touchstart",".nav-auth",function(e){i.trackRaw(i.category.topNavigation,"Login / Sign Up")}).on("click touchstart",".channel-menu",function(e){var t=null;y$(e.target).closest(".channel-item").get(0)?t=y$(e.target).closest(".channel-item").data("contentTitle"):y$(e.target).closest(".channel-item-mobile").get(0)&&(t=y$(e.target).closest(".channel-item-mobile").data("contentTitle")),t&&i.trackRaw(i.category.topNavigation,"Channel",1,t)}).on("click touchstart",".categories-menu",function(e){var t=null;y$(e.target).closest(".category-item").get(0)&&(t=y$(e.target).closest(".category-item").data("gaCategory"),i.trackRaw(i.category.topNavigation,"Category",1,t))}).on("click touchstart",".mnu-video-link",function(e){var t=y$(e.target).closest(".mnu-video-link").data("gaCategory");i.trackRaw(i.category.topNavigation,"Category",1,t)}).on("click touchstart",".nav-notifications-menu .ntf-seeall",function(e){i.trackRaw(i.category.topNavigation,"Notifications",1,"See All Notifications")}).on("mouseenter",".l-dlg-notifications",function(e){y$("body").addClass("no-scroll")}).on("mouseleave",".l-dlg-notifications",function(e){y$("body").removeClass("no-scroll")}),y$("html").hasClass("fileinput")||y$("#nav-add").remove(),window.hasOwnProperty("onorientationchange")&&window.addEventListener("orientationchange",function(){var t=e.offset();e.css({position:"absolute",top:t.top}),window.setTimeout(function(){e.css({position:"fixed",top:0})},1)},!1),e.data("top")==="pad"&&(y$("body").css("padding-top",t),y$(window).on("resize",function(){y$("body").css("padding-top",y$(".nav").outerHeight())})),y$(".nav").on("click touchstart",".nav-btn-search",function(e){var t=y$(".nav-btn-search");y$(this).hasClass("is-selected")||(i.track(i.category.navigationHeader,"click","",i.label.search),i.trackRaw(i.category.topNavigation,"Search Box")),e.preventDefault(),e.stopPropagation(),p(y$(".l-dialog.is-open"),!1),d(!t.hasClass("is-selected"))}).on("click",".inp-search",function(e){e.preventDefault(),e.stopPropagation(),d(!0)}).on("keyup",".inp-search",function(e){y$(".nav-clear-button").toggleClass("is-hidden",!y$(this).val().length)}).on("click touchstart",".l-dlg-open",function(){var e;y$(this).next().hasClass("is-open")||(y$(this).hasClass("icn-email")?e=i.label.notificationMenu:y$(this).hasClass("icn-star")?e=i.label.starMenu:y$(this).hasClass("icn-settings")?e=i.label.gearMenu:y$(this).hasClass("icn-document")?e=i.label.newMenu:y$(this).hasClass("nav-drop")&&(e=i.label.filterMenu),i.track(i.category.navigationHeader,"click","",e),i.trackRaw(i.category.topNavigation,"Hamburger Menu",1))}).on("click",".mnu-close-btn",function(e){p(y$(".mnu-discover"),!1),e.stopPropagation()}),y$(".nav-clear-button").bind("click",function(){var e=y$(".nav .inp-search");e.val(""),e.focus(),y$(this).addClass("is-hidden")}),y$(".nav-cancel-button").bind("click",function(e){var t=y$(".nav .inp-search");t.val(""),t.focus(),d(!1),y$(".nav-clear-button").addClass("is-hidden"),e.stopPropagation()}),window.screen.height<640&&window.location.hash===""&&y$(window).scrollTop()===0&&(window.scrollTo(0,1),r="calc(100% - "+t+"px)",y$(".about-flyout").css({top:t,height:r})),g(),s=new u,s.show(),h.on("locale-save",function(e){p(y$(".l-dialog.is-open"),!1)})},y$(y)}),define("views/navigation/signedOut",["views/navigation/index","views/navigation/signup"],function(){"use strict";return});