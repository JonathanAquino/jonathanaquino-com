define("util/http",[],function(){"use strict";var e={},t=window.location.href;return e.delete=function(e,t,n,r){return t=t||{},n=n||function(){y$.noop()},r=r||function(e){var t=JSON.parse(e.responseText);n(t)},y$.ajax({url:e,type:"DELETE",data:t,success:n,error:r})},e.put=function(e,t,n,r){return t=t||{},n=n||function(){y$.noop()},r=r||function(e){var t=JSON.parse(e.responseText);n(t)},y$.ajax({url:e,type:"PUT",data:t,success:n,error:r})},e.post=function(e,t,n,r){return t=t||{},n=n||function(){y$.noop()},r=r||function(e){var t=JSON.parse(e.responseText);n(t)},y$.ajax({url:e,type:"POST",data:t,success:n,error:r})},e.get=function(e,t,n,r){return t=t||{},n=n||function(){y$.noop()},r=r||function(e){var t=JSON.parse(e.responseText);n(t)},y$.ajax({url:e,type:"GET",data:t,success:n,error:r})},e.buildUrl=function(n,r,i,s){var o,u,a;return i=i||"abs",typeof n!="string"&&(n=t),o=e.parseUrl(n),a=e.parseUrl(t),u=e.parseStr(o.query,!0),r?typeof r=="string"&&(r=e.parseStr(r)):r={},o.host||(o.scheme=a.scheme,o.host=a.host,a.port&&(o.port=a.port)),y$.each(r,function(e,t){t===null?delete u[e]:u[e]=encodeURIComponent(t)}),o.query=e.buildQuery(u,!0),i==="ssl"?o.scheme="https":i==="!ssl"&&(o.scheme="http"),i!=="rel"?(o.user&&(o.auth=o.user+(o.pass?":"+o.pass:"")),n=(o.scheme||a.scheme)+"://"+(o.auth?o.auth+"@":"")+o.host+(o.port?":"+o.port:"")):n="",s!==undefined&&(o.fragment=s),n+(o.path||"/")+(o.query?"?"+o.query:"")+(o.fragment?"#"+o.fragment:"")},e.parseUrl=function(t){var n={},r,i,s;return t.indexOf("#")!==-1&&(r=e.psplit(t,"#",2),n.fragment=r[1],t=r[0]),t.indexOf("?")!==-1&&(r=e.psplit(t,"?",2),n.query=r[1],t=r[0]),t.indexOf("//")===0?(s=t.indexOf("/",2),n.host=t.substring(2,s),n.path=t.substr(s)):t.indexOf("/")===0?n.path=t:t.indexOf("://")!==-1&&(r=e.psplit(t,"://",2),n.scheme=r[0],r=e.psplit(r[1],"/",2),n.path="/"+(r[1]||""),r[0].indexOf("@")!==-1&&(r=e.psplit(r[0],"@",2),i=e.psplit(r[0],":",2),n.user=i[0],n.pass=i[1],r[0]=r[1]),r[0].indexOf(":")!==-1?(r=e.psplit(r[0],":",2),n.host=r[0],n.port=r[1]):n.host=r[0]),n},e.simplifyPath=function(e){var t,n,r=[],i;e=e.replace(/^\/+/,""),t=e.split("/"),n=t.length;for(i=0;i<n;i+=1)t[i]===".."?r.pop():t[i]&&t[i]!=="."&&r.push(t[i]);return"/"+r.join("/")},e.psplit=function(e,t,n){var r=e.split(t),i=[];return n!==undefined&&n<r.length?(i=r.splice(0,n-1),i[n-1]=r.join(t)):i=r,i},e.parseStr=function(t,n){var r,i={};return t?(r=t.split(/\&/),y$.each(r,function(t,r){var s=e.psplit(r,"=",2);n?i[decodeURIComponent(s[0])]=s[1]:i[decodeURIComponent(s[0])]=decodeURIComponent(s[1].replace(/\+/g,"%20"))}),i):i},e.buildQuery=function(e,t){var n=[];return y$.each(e,function(e,r){t?n.push(encodeURIComponent(e)+"="+r):n.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}),n.join("&")},e.setCurrentUrl=function(e){if(window.location.protocol!=="file:")throw{name:"UnitTestUseOnly",message:"Setting current URL is only allowed from unit tests."};t=e},jSmart.prototype.registerPlugin("function","u",function(t,n){return e.buildUrl(t.u,t.a,t.o)}),window.U=e.buildUrl,e}),define("util/replaceStateOrLocation",[],function(){"use strict";return function(e){window.history&&window.history.replaceState?window.history.replaceState({},"",e):window.location.replace(e)}}),define("util/eventTrack",["util/http","util/replaceStateOrLocation"],function(e,t){"use strict";var n={},r={};return n.logging=window.location.href.indexOf("testTracking")>-1,n.initializeLogging=function(){y$.noop()},n.log=function(e){if(!n.logging)return;window.console&&window.console.log&&window.console.log("Tracking: "+e)},r.category={add:"Add",beenThere:"Been There",bookmark:"Bookmark",collect:"Collect",shareEmbed:"Share Embed",emailShare:"Share Email",follow:"Follow",love:"Love",madeIt:"Made It",originalRecipe:"Original Recipe",subscribe:"Love",addManual:"Add - manual",addBookmarklet:"Add - bookmarklet",navigationHeader:"Navigation Header",collectionBackground:"Collection Detail Page",onboarding:"Onboarding",signUpTime:"Web Sign Up Time",signUpMethodLocation:"Web Sign Up Method & Location",objectView:"Object View",topNavigation:"Top Navigation",storyCreation:"Story Creation",chain:"Chain",trendingModule:"Trending Module",trendingVideoModule:"Trending Video Module",sessionStoreCategory:"Browser Settings",recommendedVideoModule:"Recommended Video Module"},r.socialNetwork={facebook:"Share Facebook",twitter:"Share Twitter",pinterest:"Share Pinterest"},r.socialAction={like:"Like",share:"Share",tweet:"Tweet",unlike:"Unlike"},r.onbdAction={viewed:"Viewed",cancel:"Cancel",loved:"Loved",unlove:"Unloved",followed:"Followed",unfollowed:"Unfollowed",onboarding:"Onboarding"},r.onboarding={action:{start:"Start",channel:"Channel",social:"Social",ptf:"People to Follow",finish:"Finish"},label:{view:"View",cancel:"Cancellation",love:"Love",fbOffered:"Facebook Offered",fbUnselect:"Facebook Unselect",twOffered:"Twitter Offered",twUnselect:"Twitter Unselect",follow:"Follow"}},r.userSettings={action:{region:"Region",language:"Language"}},r.video={action:{complete:"Completed",length:"Video Length",load:"Loaded",pause:"Paused",resume:"Resumed",skip:"Skipped",start:"Started",watched25:"Watched 25%",watched50:"Watched 50%",watched75:"Watched 75%",watched2s:"Watched 2s"}},r.label={"/":"Home","/collections/":"Collection Detail Page","/discover/collections/":"Discovery - Collections - Recent","/discover/collections/recent/":"Discovery - Collections - Recent","/discover/collections/following/":"Discovery - Collections - Following","/discover/everything/following/":"Discovery - Everything - Following","/discover/recipes/":"Discovery - Recipes - Recent","/discover/recipes/following/":"Discovery - Recipes - Following","/discover/recipes/recent/":"Discovery - Recipes - Recent","/discover/restaurants/":"Discovery - Restaurants - Recent","/discover/restaurants/following/":"Discovery - Restaurants - Following","/discover/restaurants/recent/":"Discovery - Restaurants - Recent",recipeAddManual:"Manual",recipeAddBookmarklet:"Bookmarklet",notificationMenu:"Notification menu",starMenu:"Star menu",newMenu:"New menu",gearMenu:"Gear menu",filterMenu:"Recent/Following menu",search:"Search expand",addBackground:"Add Background Image",helloPage:"Hello Page",channelsPage:"Channels Page",peoplePage:"People Page",socialPage:"Social Page",bookmark:"Bookmark",newItem:"New Item",existingItem:"Existing Item"},r.callback=function(e){r.ga("set","hitCallback",e)},r.parsePath=function(e){e=e.replace(/^(?:\/[\w|\-]+)+\/(collections)\/.*$/,"/$1/"),e.substr(-1)!=="/"&&(e+="/");if(this.label[e])return this.label[e]},r.extractResourceId=function(e,t){return t===!0&&(e=e.replace(/\?.+/,"")),e.replace(/^.*\/\/[^\/]+/,"")},r.extractResourceIdWithStoryParam=function(e){var t,n,r,i="",s;e=this.extractResourceId(e),n=e.split("?");if(n.length>1){r=n[1].split("&");for(t in r)r.hasOwnProperty(t)&&(s=r[t].split("="),s[0]!=="story"&&(i.length>1&&(i+="&"),s.length>1?i+=s[0]+"="+s[1]:i+=s[0]));i.length>1?(i="?"+i,e=n[0]+i):e=n[0]}return e},r.allowed=function(e){var t={cannes:[this.category.navigationHeader,this.category.collectionBackground],foodie:[]};return window.yoko&&window.yoko.appContext&&window.yoko.appContext.context&&t[window.yoko.appContext.context].indexOf(e)!==-1?!1:!0},r.getAction=function(){return window.yoko.action||window.location.href},r.track=function(e,t,n,i){var s=window.location.pathname;if(!this.allowed(e))return;t=this.getAction(t),i===undefined&&(i=this.parsePath(s),i||(i=window.location.href)),n===undefined||n===null?n=1:n=Number(n),r.ga("send","event",e,t,i,n)},r.trackUserSettings=function(e,t){this.trackRaw("User Settings Change",e,1,t)},r.trackOnboarding=function(e,t,n,r){this.trackRaw(e,t,n,r)},r.trackBookmarking=function(e,t,n,r){this.trackRaw(e,t,n,r)},r.trackVideo=function(e,t,n,r){r===undefined&&(r=1),this.trackRaw("Video",e,r,t,n)},r.trackRaw=function(e,t,n,i,s){n===undefined||n===null?n=1:n=Number(n);if(s===undefined||s===null)s=0;r.ga("send","event",e,t,i,n,{nonInteraction:s})},r.social=function(e,t,n){n||(n=window.location.href),t=this.getAction(t),r.ga("send","event",e,t,n)},r.trackBroadcast=function(e,t,n){var i;if(!e)return;i=e.split(","),y$.each(i,y$.proxy(function(e,i){var s=this.socialNetwork[i];if(!s)return;r.ga("send","event",s,t,n)},this))},r.trackFromCookie=function(){var e=document.cookie.split("; "),t={},n,r,i,s,o,u,a,f;if(!e)return;for(r in e)e.hasOwnProperty(r)&&(n=e[r].split("="),t[n[0]]=n[1]);u=t._sign_up_tracking;if(!u)return;a=unescape(u).split(",");if(a.length<3)return;i=a[0],s=a[1],o=a[2];if(!i||!s||!o)return;f=this.getAction(),f.indexOf("profile/settings")>-1&&(f="Sign Up"),f==="Video"&&(f="Single Video Page"),this.trackRaw(this.category.signUpMethodLocation,i,1,f),this.trackRaw(this.category.signUpTime,s,1,o),document.cookie="_sign_up_tracking=; expires=Thu, 01 Jan 1970 00:00:00 UTC"},r.trackFromUrl=function(){var n,i,s,o,u,a;n=window.location.search.match(/[\?\&]_ga=([^\&]+)/);if(!n)return;i=unescape(n[1]).split(","),s=i[0],o=i[1],u=this.parsePath(i[2]),s&&o&&u&&r.track(s,o,1,u),a=e.buildUrl(!0,{_ga:null}),t(a)},r.onload=function(){this.trackFromUrl(),this.trackFromCookie(),n.initializeLogging()},r.ga=function(){y$.noop()},window.yoko.eventTrack=r,r.onload(),r}),define("views/track",["util/eventTrack"],function(e){"use strict";var t,n,r,i;t=function(){n()},n=function(){y$(document).on("click","a[href^=http]",function(t){var n,s,o;t.currentTarget.host!==window.location.host&&(n=y$(this).attr("href"),s=y$(this).attr("target")==="_blank"||t.metaKey||t.ctrlKey,!/[a-z|0-9]\.foodie\.com$/i.test(i(n))&&!/[a-z|0-9]\.mode\.com$/i.test(i(n))&&(s||(t.preventDefault(),e.callback(function(){window.location.href=n})),o="External URL",window.yoko.appContext&&window.yoko.appContext.context&&window.yoko.appContext.context==="foodie"&&(o="Outbound Link"),r(o,n,e.extractResourceIdWithStoryParam(document.URL))))})},i=function(e){var t=document.createElement("a");return t.href=e,t.hostname},r=function(e,t,n,r,i){window.yoko.eventTrack.ga("send","event",e,t,n,r,{nonInteraction:1})},t()});